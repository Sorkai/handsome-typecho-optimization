/*! handsome 2022-11-13 */

const handsome_util={init:function(){this.initAndPjax_Complete()},pjax_complete:function(){this.initAndPjax_Complete()},initAndPjax_Complete:function(){},hasScrollbar:function(){return document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)},code160to32:function(a){return a.replace(/\u00a0/g," ")},endWith:function(a,b){return-1!==a.indexOf(b,a.length-b.length)},removeStyle:function(a){const b=document.getElementById(a);if(b){b.parentElement.removeChild(b)}},addStyle:function(a,b){if(!document.getElementById(b)){const c=document.createElement("link");c.id=b,c.rel="stylesheet",c.type="text/css",c.href=a,document.getElementsByTagName("head")[0].appendChild(c)}},addOrReplaceStyle:function(a,b){if(document.getElementById(b)){const c=document.getElementById(b),d=c.parentElement;c.href=a,d.insertBefore(c,null)}else this.addStyle(a,b)},set_innner_html:function(a,b,c){var d=[],e=[],f=[],g=[],h=null,i="";if(null==h)h=a;else{if(void 0===c)return g[a+"_html"]=b,void window.setTimeout("set_innerHTML('"+a+"', global_lock_pool['"+a+"_html']);",10);if(h!=a)return g[a+"_html"]=b,void window.setTimeout("set_innerHTML('"+a+"', global_lock_pool['"+a+"_html'], "+c+");",10)}i="",document.write=function(a){i+=a},document.writeln=function(a){i+=a+"\n"},d=[];var j=[];b=b.split(/<\/script>/i);for(var k=0;k<b.length;k++)d[k]=b[k].replace(/<script[\s\S]*$/gi,""),j[k]={text:"",src:""},j[k].text=b[k].substr(d[k].length),j[k].src=j[k].text.substr(0,j[k].text.indexOf(">")+1),j[k].src=j[k].src.match(/src\s*=\s*(\"([^\"]*)\"|\'([^\']*)\'|([^\s]*)[\s>])/i),j[k].src?(j[k].src[2]?j[k].src=j[k].src[2]:j[k].src[3]?j[k].src=j[k].src[3]:j[k].src[4]?j[k].src=j[k].src[4]:j[k].src="",j[k].text=""):(j[k].src="",j[k].text=j[k].text.substr(j[k].text.indexOf(">")+1),j[k].text=j[k].text.replace(/^\s*<\!--\s*/g,""));var l;l=void 0===c?0:c;for(var m,n,o,k=0;k<j.length;k++){var p="document_buffer += global_html_pool["+k+"];\n";p+="document.getElementById('"+a+"').innerHTML = document_buffer;\n",m=document.createElement("script"),j[k].src?(m.src=j[k].src,void 0===f[m.src]?(f[m.src]=!0,l+=2e3):l+=10):(m.text=j[k].text,l+=10),m.defer=!0,m.type="text/javascript",m.id=function(){return"script_"+(new Date).getTime().toString(36)+Math.floor(1e8*Math.random()).toString(36)}(),e[m.id]=m,n=p,n+="document.getElementsByTagName('head').item(0)",n+=".appendChild(global_script_pool['"+m.id+"']);\n",window.setTimeout(n,l),o="document.getElementsByTagName('head').item(0)",o+=".removeChild(document.getElementById('"+m.id+"'));\n",o+="delete global_script_pool['"+m.id+"'];\n",window.setTimeout(o,l+1e4)}var q="if (document_buffer.match(/<\\/script>/i)) {\n";q+="set_innerHTML('"+a+"', document_buffer, "+l+");\n",q+="}\n",q+="else {\n",q+="document.getElementById('"+a+"').innerHTML = document_buffer;\n",q+="innerhtml_lock = null;\n",q+="}",window.setTimeout(q,l)},addScript:function(a,b,c){var d=$.Deferred(),e=!1;$.when(function(c){if(document.getElementById(b))return e=!0,c.resolve(),!1;var d=document.createElement("script");return d.src=a,d.async=!0,document.head.appendChild(d),d.onload=function(){if(document.getElementById(b))return d.remove(),c.resolve(),!1;d.id=b,c.resolve()},c}(d)).done(function(){c(e)})},repeatify:function(a,b){for(var c=a,d=0;d<b;d++)c+=a;return c},addScriptList:function(a,b){console.log("addScriptList");var c=$.Deferred(),d=0;const e=a.length;$.when(function(b){return a.some(function(a,c){if(document.getElementById(a.id))return++d>=e&&(b.resolve(),!0);var f=document.createElement("script");f.src=a.path,f.async=!0,document.head.appendChild(f),f.onload=function(){if(document.getElementById(a.id))return f.remove(),!1;f.id=a.id,++d>=e&&b.resolve()}}),b}(c)).done(function(){b()})},getDeviceState:function(a){var b;return window.getComputedStyle?b=window.getComputedStyle(a).getPropertyValue("z-index"):a.currentStyle&&(b=a.currentStyle["z-index"]),parseInt(b,10)},getPrefersDarkModeState:function(a){if(""===handsome_UI.mode||a){var b=!1;if("auto"===LocalConst.THEME_DARK_MODE){if(window.matchMedia("(prefers-color-scheme: dark)").addListener(function(a){a.matches?handsome_UI.dark_mode():handsome_UI.light_mode()}),"time"===LocalConst.THEME_DARK_MODE_VALUE){const c=new Date;b=c.getHours()>=LocalConst.THEME_DARK_HOUR||c.getHours()<LocalConst.THEME_LIGHT_HOUR}else if("auto"===LocalConst.THEME_DARK_MODE_VALUE)b=window.matchMedia("(prefers-color-scheme: dark)").matches;else if("compatible"===LocalConst.THEME_DARK_MODE_VALUE)if(window.matchMedia("(prefers-color-scheme: light)").matches){const c=new Date;b=c.getHours()>=LocalConst.THEME_DARK_HOUR||c.getHours()<LocalConst.THEME_LIGHT_HOUR}else b=!0}else b="light"!==LocalConst.THEME_DARK_MODE;return handsome_UI.mode=b?"dark":"light",b}return"dark"===handsome_UI.mode},hasClosestByHeadings:function(a){const b=this.hasClosestByTag(a,"H");return!(!b||2!==b.tagName.length||"HR"===b.tagName)&&b},getChildName:function(a,b){return"#"+a+" "+b},getChildNameByContainerName:function(a,b){return a+" "+b},getScrollTop:function(){var a=0;return document.documentElement&&document.documentElement.scrollTop?a=document.documentElement.scrollTop:document.body&&(a=document.body.scrollTop),a},hasClosestByTag:function(a,b){if(!a)return!1;3===a.nodeType&&(a=a.parentElement);for(var c=a,d=!1;c&&!d&&!c.classList.contains("vditor-reset");)0===c.nodeName.indexOf(b)?d=!0:c=c.parentElement;return d&&c},settingError:function(a){this.adminAlert("你在<b>"+a+"</b>中填写的配置存在问题，<b>该问题与主题无关。</b></br>你可以清除该位置的配置以消除该提示；或者针对具体代码错误修改，具体错误输出在控制台中。")},adminAlert:function(a){LocalConst.USER_LOGIN&&$.message({title:"主题提示(仅登录用户可见)",message:a,type:"warning",time:"30000"})},log:function(a){arguments.length>1&&void 0!==arguments[1]&&arguments[1];LocalConst.DEBUG_MODE},getTop:function(a,b){return"HTML"===a.nodeName?-b:a.getBoundingClientRect().top+b},getLeft:function(a,b){return"HTML"===a.nodeName?-b:a.getBoundingClientRect().left+b},isSafari:function(){return/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)},isMac:function(){return/macintosh|mac os x/i.test(navigator.userAgent)},isFirefox:function(){return navigator.userAgent.toLowerCase().indexOf("firefox")>-1},escapeRegex:function(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}};var handsome_ajax={init:function(){this.login_ajax(),this.register_ajax(),this.initAndPjax_Complete()},pjax_complete:function(){this.initAndPjax_Complete()},initAndPjax_Complete:function(){this.password_post_ajax()},user_common_op_ajax:function(a,b){a.find(".user_op_submit").addClass("active"),a.find(".animate-spin").addClass("show inline"),$.ajax({type:"POST",url:window.location.href,data:{action:"get_action",type:b},success:function(c){a.attr("action",c),$.ajax({url:a.attr("action"),type:a.attr("method"),data:a.serializeArray(),error:function(){return"login"===b?$.message({title:LocalConst.LOGIN_TITLE,message:LocalConst.LOGIN_SUBMIT_ERROR,type:"error"}):"register"===b&&$.message({title:LocalConst.REGISTER_TITLE,message:LocalConst.REGISTER_SUBMIT_ERROR,type:"error"}),handsome_ajax.op_error_action(a),!1},success:function(c){c=$.parseHTML(c),a.find(".user_op_submit").removeClass("active"),a.find(".animate-spin").removeClass("show inline");try{const d=LocalConst.COOKIE_PREFIX,e={notice:$.cookie(d+"__typecho_notice"),noticeType:$.cookie(d+"__typecho_notice_type"),highlight:$.cookie(d+"__typecho_notice_highlight")},f=LocalConst.COOKIE_PATH;var g="";return e.notice&&"success|notice|error".indexOf(e.noticeType)>=0&&(g=$.parseJSON(e.notice),$.cookie(d+"__typecho_notice",null,{path:f}),$.cookie(d+"__typecho_notice_type",null,{path:f})),"login"===b?$("#Logged-in",c).length<=0?($.message({title:LocalConst.LOGIN_TITLE,message:g||LocalConst.LOGIN_SUBMIT_INFO,type:"error"}),handsome_ajax.op_error_action(a),!1):(c=$("#easyLogin",c).html(),$("#easyLogin").html(c),$.message({title:LocalConst.LOGIN_TITLE,message:LocalConst.LOGIN_SUBMIT_SUCCESS+'&nbsp;<a onclick="location.reload();">'+LocalConst.CLICK_TO_REFRESH+"</a>",type:"success"}),LocalConst.USER_LOGIN="1",!1):"register"===b&&("success"===e.noticeType?($.get(LocalConst.BLOG_URL,function(a,b){a=$("#easyLogin",a).html(),$("#easyLogin").html(a),$.message({title:LocalConst.REGISTER_TITLE,message:g+"</br>"+LocalConst.PASSWORD_CHANGE_TIP+"&nbsp;",type:"success",time:"300000"})}),!1):(g||console.log("notice_content should not empty!"),$.message({title:LocalConst.REGISTER_TITLE,message:g||LocalConst.REGISTER_SUBMIT_ERROR,type:"error"}),handsome_ajax.op_error_action(a),!1))}catch(a){alert("按下F12，查看输出错误信息")}}})},error:function(){console.log("请求登陆参数错误。请在刷新后尝试登陆。")}})},register_ajax:function(){$("#register_form").submit(function(){$(this).find(".user_op_submit").attr("disabled",!0).fadeTo("slow",.5);const a=$("#navbar-register-user").val(),b=$("#navbar-register-mail").val();return""===a?($.message({title:LocalConst.REGISTER_TITLE,message:LocalConst.LOGIN_USERNAME_INFO,type:"warning"}),$("#navbar-register-user").focus(),handsome_ajax.op_error_action($(this)),!1):""===b?($.message({title:LocalConst.REGISTER_TITLE,message:LocalConst.REGISTER_MAIL_INFO,type:"warning"}),$("#navbar-register-mail").focus(),handsome_ajax.op_error_action($(this)),!1):(handsome_ajax.user_common_op_ajax($(this),"register"),!1)})},login_ajax:function(){$("#login_form").submit(function(){$(this).find(".user_op_submit").attr("disabled",!0).fadeTo("slow",.5);const a=$("#navbar-login-user").val(),b=$("#navbar-login-password").val();return""===a?($.message({title:LocalConst.LOGIN_TITLE,message:LocalConst.LOGIN_USERNAME_INFO,type:"warning"}),$("#navbar-login-user").focus(),handsome_ajax.op_error_action($(this)),!1):""===b?($.message({title:LocalConst.LOGIN_TITLE,message:LocalConst.LOGIN_PASSWORD_INFO,type:"warning"}),$("#navbar-login-password").focus(),handsome_ajax.op_error_action($(this)),!1):(handsome_ajax.user_common_op_ajax($(this),"login"),!1)})},op_error_action:function(a){a.find(".user_op_submit").attr("disabled",!1).fadeTo("",1)},password_post_ajax:function(){$("#post-content").delegate("form.protected","submit",function(){return $.ajax({url:$(this).attr("action"),type:$(this).attr("method"),data:$(this).serializeArray(),error:function(a){try{if($("#post-content",data).length<=0)return $.message({title:"提交通知",message:LocalConst.SUBMIT_PASSWORD_INFO,type:"warning"}),!1;window.location.reload()}catch(a){window.location.reload(),console.log(a)}},success:function(a){try{if($("#post-content",a).length<=0)return $.message({title:"提交通知",message:LocalConst.SUBMIT_PASSWORD_INFO,type:"warning"}),!1;window.location.reload()}catch(a){console.log(a),window.location.reload()}}}),!1})}};const handsome_basics={init:function(){this.nav_handle(),this.initAndPjax_Complete()},pjax_complete:function(){this.initAndPjax_Complete()},initAndPjax_Complete:function(){},j:[53,58,58,49,62,32,49,68,64],l:[32,20,17,25,17,43,28,27,31,32,43,15,27,26,32,17,26,32],nav_handle:function(){var a=[39029,38754,32531,23384,22833,36133],b="";m=String.fromCharCode,x=function(a){for(var b=[],c=0;c<a.length;++c)b[c-0]=a[c];for(c=0;c<b.length;c++)b[c]=52+b[c];return m.apply(null,b)},h={},h.d=$("html");const c=handsome_basics.l;if(h.i=LocalConst[x(c)],"2"!==h[m.call(null,105)]){for(var d=0;d<a.length;d++)b+="%u"+a[d].toString(16);h.t=unescape(b)}b.length>0&&-1===window.location.href.indexOf(window.atob("L2FkbWluL3ByZXZpZXc"))&&(h.d[0][x(handsome_basics.j)]=h.t),$(document).on("click","[ui-toggle-class]",function(a){a.preventDefault();var b=$(a.target);b.attr("ui-toggle-class")||(b=b.closest("[ui-toggle-class]"));var c=b.attr("ui-toggle-class").split(","),d=b.attr("target")&&b.attr("target").split(",")||Array(b),e=0;$.each(c,function(a,b){var f=d[d.length&&e];$(f).toggleClass(c[a]),".app-aside"===f&&($("#aside").hasClass("off-screen")?$("#footer").addClass("hide"):$("#footer").removeClass("hide")),e++}),b.toggleClass("active"),$(".settings").removeClass("active"),$(".tocify-mobile-panel").removeClass("active")}),$(document).on("click","[data-toggle-class]",function(a){a.preventDefault();var b=$(this),c=b.data("toggle-class"),d={};$.each(c.split(","),function(){var a=$.trim(this);if(a){var b=a.split("="),c=b[0],e=b[1];d[c]=e}}),$.each(d,function(a,b){"false"==b?$(a).removeClass("active"):$(a).toggleClass(b)})});var e;$(document).on("click","[ui-nav] a .parent_name",function(a){var b=document.createElement("a");b.setAttribute("href",$(this).parent("a").attr("href")),document.body.appendChild(b),b.click()}),$(document).on("click","[ui-nav] a,[ui-nav-fold] a",function(a){!LocalConst.LEFT_LOCATION||$("#alllayout").hasClass("app-aside-dock")||$("#alllayout").hasClass("app-aside-folded")||($(this).addClass("select"),handsome_UI.last_select_left_root=$(this)),$("#footer").removeClass("hide"),e&&e.trigger("mouseleave.nav");var b=$(this);if(b.parent().siblings(".active").toggleClass("active"),b.next().is("ul")&&b.parent().toggleClass("active")&&a.preventDefault(),$(".app-aside-fix").length>0&&$(window).width()>768){var c,b=$(a.target),d=$(window).height();b.is("a")&&b.next().is(".child-nav")&&(e=b.parent().parent()),$(".app-aside-folded").length&&e&&(c=e.position().top,c+e.height()>=d&&e.css("bottom","50px"),c+150>d&&e.css("bottom",d-c-50).css("top","auto")),$(".app-aside-dock").length&&$(window).width()>991&&e&&(120+e.height()>=d?e.height(d-120):e.css("height","auto"))}b.next().is("ul")||$(window).width()<768&&$(".off-screen").removeClass("show off-screen")});var f=!0;$(document).on("mouseenter","[ui-nav] a",function(a){if($(document).on("mouseenter",".app-aside>ul.nav",function(a){f=!0}),$(document).on("mouseleave",".app-aside>ul.nav",function(a){f=!1}),e&&e.trigger("mouseleave.nav"),$("> .nav",$(".app-aside")).remove(),$(".app-aside-fix").length&&!($(window).width()<768)){var b,c=$(a.target),d=$(window).height();!c.is("a")&&(c=c.closest("a")),c.next().is("ul")&&(e=c.next(),$(".app-aside-folded").length&&void 0===c.attr("no-fold")&&(c.parent().addClass("active"),e.appendTo(".app-aside"),b=c.parent().position().top,e.css("top",b),e.attr("ui-nav-fold",""),b+e.height()>d&&e.css("bottom","50px"),b+150>d&&e.css("bottom",d-b-50).css("top","auto"),e.on("mouseleave.nav",function(a){f||(e.appendTo(c.parent()),e.off("mouseleave.nav").css("top","auto").css("bottom","auto"),c.parent().removeClass("active"),f=!1)}),$(".smart").length&&$('<div class="dropdown-backdrop"/>').insertAfter(".app-aside").on("click",function(a){a&&a.trigger("mouseleave.nav")})),$(".app-aside-dock").length&&$(window).width()>991&&e&&(120+e.height()>=d?e.height(d-120):e.css("height","auto")))}}),$(document).on("mouseleave",".app-aside:not(.app-aside-dock)",function(a){f=!1,e&&e.trigger("mouseleave.nav"),$("> .nav",$(".app-aside")).remove()}),(!!navigator.userAgent.match(/MSIE/i)||!!navigator.userAgent.match(/Trident.*rv:11\./))&&$("html").addClass("ie")}},handsome_comment={init:function(){this.initAndPjax_Complete()},pjax_complete:function(){this.initAndPjax_Complete()},initAndPjax_Complete:function(){LocalConst.COMMENT_SYSTEM===LocalConst.COMMENT_SYSTEM_ROOT?(this.loadCommentEmoji(),this.placeholderChange(),this.secretComment(),this.watchInputInComment()):LocalConst.COMMENT_SYSTEM===LocalConst.COMMENT_SYSTEM_CHANGYAN&&this.loadChangYan(),this.starComment(),LocalConst.IS_PAJX_COMMENT?this.ajaxComment():this.noAjaxComment();var a=null;const b=["大名鼎鼎","躲闪","骄傲","挺胸","不知名","知名","刚下飞机","看透一切","小有名气","潜心学习"],c=["大黄","匿名人士","男士","女士","人士","男孩","女孩","贫僧","道士","学生","打工人"];$(".random_user_name").on("click",function(){const d=$(this);$(this).removeClass("shake"),$(this).addClass("shake"),null!=a&&(clearTimeout(a),a=null),a=setTimeout(function(){d.removeClass("shake")},500),_tmp=b[Math.floor(Math.random()*b.length)]+"的"+c[Math.floor(Math.random()*c.length)],$("#author").val(_tmp)})},placeholderChange:function(){$(function(){$("#comment").blur(function(){$(this).attr("placeholder",LocalConst.COMMENT_REJECT_PLACEHOLDER)}),$("#comment").focus(function(){$(this).attr("placeholder",LocalConst.COMMENT_PLACEHOLDER)})})},loadCommentEmoji:function(){var a=document.getElementsByClassName("OwO")[0],b=document.getElementsByClassName("OwO-textarea")[0];if(void 0!=a&&void 0!=b){new OwO({logo:LocalConst.EMOJI,container:a,target:b,api:LocalConst.BASE_SCRIPT_URL+"usr/OwO.json?v="+LocalConst.THEME_VERSION,position:"down",width:"100%",maxHeight:"220px"})}},loadChangYan:function(){window.changyan=void 0,window.cyan=void 0,1==$("#SOHUCS").length&&($("#spin_comment_changyan").addClass("show inline"),$.getScript("https://changyan.sohu.com/upload/changyan.js",function(){window.changyan.api.config({appid:LocalConst.ChANGYAN_APP_KEY,conf:LocalConst.CHANGYAN_CONF}),$("#spin_comment_changyan").removeClass("show inline")}))},parseCommentError:function(a,b){const c=[/<div class="container">([\s\S]*)<\/div>/,/Typecho_Widget_Exception:(.*?) in/,/Typecho\\Widget\\Exception:(.*?) in/,/<pre><code><h1>(.*?)<\/h1>/];b||(b="");var d=b;return c.some(function(b,c,e){var f=b.exec(a);if(null!=f)return d=f[1].trim(),!0}),d},ajaxComment:function(){function a(){$("#submit span:first-child").text(LocalConst.REPLY_TIME_MACHINE),$("#time_toolbar").addClass("hide"),$("#submit").addClass("padder-v-none"),$("#comment_form").addClass("time_reply_comment"),$(".comment-respond").hasClass("hide")&&($(".comment-respond").removeClass("hide"),$(".comment-respond").addClass("hide_guest"))}function b(){$("#comment_form").removeClass("time_reply_comment"),$("#submit").removeClass("padder-v-none"),$("#time_toolbar").removeClass("hide"),$("#submit span:first-child").text(LocalConst.SUBMIT_TIME_MACHINE),$(".comment-respond").hasClass("hide_guest")&&$(".comment-respond").addClass("hide")}function c(a){$(i).attr("disabled",!1).fadeTo("",1)}var d=window.opera?"CSS1Compat"==document.compatMode?$("html"):$("body"):$("html,body"),e="#comments .comments-title",f=".comment-reply",g="#comments",h="#comment",i="#submit",j="",k="";$(".time-machine").length>0&&(f=".comment-time-reply"),function(){$("#comments").on("click",f+" a",function(){$(".time-machine").length>0?(k=$(this).parent().parent().parent().parent().parent().attr("id"),a()):k=$(this).parent().parent().parent().parent().attr("id"),$(h).focus()}),$("#cancel-comment-reply-link").click(function(){$(".time-machine").length>0&&b(),k=""})}(),$("#comment_form").submit(function(){if($(i).attr("disabled",!0).fadeTo("slow",.5),$("#comment_form").find("#author")[0]){if(""==$("#comment_form").find("#author").val())return $.message({title:LocalConst.COMMENT_TITLE,message:LocalConst.COMMENT_NAME_INFO,type:"warning"}),c("#error"),!1;if(""==$("#comment_form").find("#mail").val()&&"1"===LocalConst.COMMENT_NEED_EMAIL)return $.message({title:LocalConst.COMMENT_TITLE,message:LocalConst.COMMENT_EMAIL_INFO,type:"warning"}),c("#error"),!1;var a=/^[^@\s<&>]+@([a-z0-9]+\.)+[a-z]{2,4}$/i,f=$("#comment_form").find("#mail").val();if(!a.test(f)&&"1"===LocalConst.COMMENT_NEED_EMAIL)return $.message({title:LocalConst.COMMENT_TITLE,message:LocalConst.COMMENT_EMAIL_LEGAL_INFO,type:"warning"}),c("#error"),!1;if("1"===LocalConst.COMMENT_NEED_URL){if(""==$("#url").val())return $.message({title:LocalConst.COMMENT_TITLE,message:LocalConst.COMMENT_URL_INFO,type:"warning"}),c("#error"),!1;if(!$("#url").val().startsWith("http://")&&!$("#url").val().startsWith("https://"))return $.message({title:LocalConst.COMMENT_TITLE,message:LocalConst.COMMENT_URL_LEGAL_INFO,type:"warning"}),c("#error"),!1}}var l=$("#comment_form").find(h).val().replace(/(^\s*)|(\s*$)/g,"");if(null==l||""===l)return $.message({title:LocalConst.COMMENT_TITLE,message:LocalConst.COMMENT_CONTENT_INFO,type:"warning"}),c("#error"),!1;var m=$(this).serializeArray();return $(".time-machine").length>0&&m.length<=9&&!LocalConst.USER_LOGIN?($.message({title:"没有权限",message:"您没有权限在时光机页面发送说说",type:"error"}),c("#error"),!1):($("#secret_comment_checkbox").is(":checked")&&(m[1].value="[secret] "+m[1].value+"\n[/secret]"),$(i).addClass("active"),$("#spin").addClass("show inline"),$.ajax({url:$(this).attr("action"),type:$(this).attr("method"),data:m,error:function(a,b,d){const e=handsome_comment.parseCommentError(a.responseText,LocalConst.COMMENT_AJAX_ERROR);return $.message({title:LocalConst.COMMENT_TITLE,message:e,type:"error"}),$(i).removeClass("active"),$("#spin").removeClass("show inline"),c("#error"),!1},success:function(a){function l(a){var b=LocalConst.COMMENT_CONTENT_LEGAL_INFO+"</br><ul style='padding: 0'>";if($(g,a).length)try{-1!==window.location.href.indexOf("?tag=")&&(b+="<li>"+LocalConst.COMMENT_NOT_BELONG_CURRENT_TAG+"</li>"),""!=$("#comments .current").text()&&"1"!=$("#comments .current").text()&&(b+="<li>"+LocalConst.COMMENT_NOT_IN_FIRST_PAGE+"</li>"),f||(b+="<li>"+LocalConst.COMMENT_NO_EMAIL+"</li>"),b+="<li>"+LocalConst.COMMENT_PAGE_CACHED+"</li>"}catch(a){console.log(a)}else b+="<li>"+LocalConst.COMMENT_BLOCKED+"</li>";return b+="</ul>"}$(i).removeClass("active"),$("#spin").removeClass("show inline");try{if(!$(".comment-list",a).length){var m=handsome_comment.parseCommentError(a);return""===m&&(m=l(a)),$.message({title:LocalConst.COMMENT_TITLE,message:m,type:"warning",autoClose:!1}),$(i).removeClass("active"),$("#spin").removeClass("show inline"),c("#error"),!1}j=$(".comment-list",a).html().match(/id=\"?comment-\d+/g).join().match(/\d+/g).sort(function(a,b){return a-b}).pop();try{if($(".comment-list").length>0){if($(".comment-list").html().match(/id=\"?comment-\d+/g).join().match(/\d+/g).sort(function(a,b){return a-b}).pop()===j||""==k&&$(".page-navigator .prev").length>0)return j=Date.now().toString(36),$.message({title:LocalConst.COMMENT_TITLE,message:l(a),type:"warning",autoClose:!1}),k="",navigator.clipboard&&(navigator.clipboard.writeText($(h).val()),$(h).val("")),c("#error"),!1}}catch(a){}k?(a=$("#comment-"+j,a).hide(),$("#"+k).find(".comment-children").length<=0&&($(".time-machine").length>0?$("#"+k+" .time-machine .panel-footer").append("<div class='comment-children text-muted'><ol class='comment-list'></ol></div>"):$("#"+k).append("<div class='comment-children list-unstyled m-l-xxl'><ol class='comment-list'></ol></div>")),j&&$("#"+k+" .comment-children .comment-list").prepend(a),k=""):(a=$("#comment-"+j,a).hide(),$(".time-machine").length>0?$(".comment-list").prepend(a):($(".comment-list").length||$(g).prepend('<h4 class="comments-title m-t-lg m-b special"> 0 条评论</h4><ol class="comment-list"></ol>'),$(".comment-list").prepend(a))),$("#comment-"+j).fadeIn(),c("#success");var n;$(e).length&&(n=parseInt($(e).text().match(/\d+/)),$(e).html($(e).html().replace(n,n+1))),TypechoComment.cancelReply(),$(h).val(""),$(i).attr("disabled",!1).fadeTo("slow",1),j?d.animate({scrollTop:$("#comment-"+j).offset().top-LocalConst.OFF_SCROLL_HEIGHT},500):d.animate({scrollTop:$("#comments").offset().top-LocalConst.OFF_SCROLL_HEIGHT},500),$(".time-machine").length>0&&b(),handsome_content.comment_ajax_complete("comment-"+j)}catch(a){console.log(a)}}}),!1)})},noAjaxComment:function(){$("#submit").bind("click",function(){var a=$("#author").val(),b=$("#mail").val();return""===$("#comment").val()?($.message({title:LocalConst.COMMENT_TITLE,message:LocalConst.COMMENT_CONTENT_INFO,type:"warning"}),$("#comment").focus(),!1):""===a?($.message({title:LocalConst.COMMENT_TITLE,message:LocalConst.COMMENT_NAME_INFO,type:"warning"}),$("#author").focus(),!1):""===b&&"1"===LocalConst.COMMENT_NEED_EMAIL?($.message({title:LocalConst.COMMENT_TITLE,message:LocalConst.COMMENT_EMAIL_INFO,type:"warning"}),$("#mail").focus(),!1):($(this).addClass("active"),$("#spin").addClass("show inline"),void $("#comment_form").submit())})},secretComment:function(){$("#secret_comment_checkbox").change(function(){$(this).is(":checked")?($("#comment").addClass("secret_comment_textarea"),$(this).attr("placeholder","")):$("#comment").removeClass("secret_comment_textarea")})},watchInputInComment:function(){$('input[name = "mail"]').blur(function(){var a=$(this).val();return""!=a&&$.ajax({type:"GET",data:{action:"ajax_avatar_get",form:LocalConst.BLOG_URL,email:a},success:function(a){$(".author-avatar").attr("src",a)}}),!1})},starComment:function(){$("#comments").on("click",".star_talk",function(){var a=$(this);$.get(LocalConst.BLOG_URL,{action:"star_talk",coid:$(this).data("coid")}).error(function(){$.message({title:LocalConst.OPERATION_NOTICE,message:LocalConst.STAR_ERROR_NETWORK,type:"error"})}).success(function(b){if("1"===b){a.children("i").attr("class","glyphicon glyphicon-heart");var c=a.children(".star_count").text();c=c||0,a.children(".star_count").text(parseInt(c)+1),$.message({title:LocalConst.OPERATION_NOTICE,message:LocalConst.STAR_SUCCESS,type:"success"})}else"2"===b?(a.children("i").css("color","red"),$.message({title:LocalConst.OPERATION_NOTICE,message:LocalConst.STAR_REPEAT,type:"info"})):"-1"===b&&$.message({title:LocalConst.OPERATION_NOTICE,message:LocalConst.STAR_ERROR_CODE+":"+b,type:"error"})})})}},hd_ui={highlight:function(a){a.addClass("highlight_content"),setTimeout(function(){a.removeClass("highlight_content")},2e3)},message:function(a){return $.message(a)},dialog_again:!1,formItem:function(a){return"label"===a.type?'<label class="insert_tips">'+a.value+"</label>":"text"===a.type?'<input name="'+a.name+'" value="'+a.value+'" type="text" class="form-control"/>':"hidden"===a.type?'<input name="'+a.name+'" value="'+a.value+'" type="hidden"/>':void 0},showDialog:function(a){const b="form"===a.type;var c="";if(b&&(c="<form method='POST' role='form'>"),c+='<div class="modal-body">',b){if(a.form)for(var d in a.form)c+=this.formItem(a.form[d])}else a.text&&(c+=a.text);c+="</div>",c+=b?a.confirmText?'<div class="modal-footer"><button type="submit" class="btn btn-primary">'+a.confirmText+"</button> </div>":"":a.confirmText?'<div class="modal-footer"><button type="button" data-dismiss="modal"  class="btn btn-primary">'+a.confirmText+"</button> </div>":"",b&&(c+="</form>");const e='<div id="js_modal_dialog" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel"><div class="modal-dialog modal-sm" role="document"><div class="modal-content box-shadow-wrap-lg"><div class="modal-header box-shadow-bottom-normal"><button type="button" class="close" data-dismiss="modal"><i style="vertical-align: bottom;" data-feather="x-circle"></i></button><h4 class="modal-title">'+a.title+"</h4></div>"+c+"</div></div> </div>";$("body").append(e),handsome_enhance.feather(),$("#js_modal_dialog").modal(),$("#js_modal_dialog").on("hidden.bs.modal",function(a){$("#js_modal_dialog").remove()})},confirm:function(a){$("#js_modal_dialog").length>0?(hd_ui.dialog_again=!0,$("#js_modal_dialog").modal("hide"),setTimeout(function(){hd_ui.showDialog(a)},500)):hd_ui.showDialog(a)}},handsome_cross={tag_options:{trigger:"#",lookup:"value",containerClass:"tribute-container box-shadow-wrap-large dropdown-menu",values:[],noMatchTemplate:function(){return'<span style="padding: 0 5px">No Tag Matched</span>'}},tribute:null,init:function(){this.initAndPjax_Complete()},pjax_complete:function(){this.initAndPjax_Complete()},initAndPjax_Complete:function(){$("#time_content").length>0&&(this.enhance_editor(),this.initTribute(),this.click_show_popup_menu())},enhance_editor:function(){const a=document.getElementById("comment");a.addEventListener("input",function(b){a.style.height="72px",a.style.height=b.target.scrollHeight+"px"}),a.addEventListener("keyup",function(a){8===a.keyCode?(this.style.height="inherit",this.style.height=this.scrollHeight+"px"):this.style.height=this.scrollHeight+"px"})},edit_comment:function(){},delete_comment:function(){},edit_tag:function(){},delete_tag:function(){},click_show_popup_menu:function(){function a(a,b,c){return{name:a,value:b,type:c}}$("#time_content").on("click",".time_operation",function(){$(this).children(".dropdown-menu").length<=0&&($(this).append('            <ul class="dropdown-menu">                                          <li role="presentation">                                            <a role="menuitem" class="edit" tabindex="-1">'+LocalConst.EDIT+'</a>                                        </li>                                        <li role="presentation">                                            <a role="menuitem" class="delete" tabindex="-1">'+LocalConst.DELETE+"</a>                                        </li>                                      </ul>"),$(this).on("click","a.edit",function(a){const b=$(this).parents(".time_operation")[0].dataset.id,c=$("#"+b+"-footer"),d=$("#"+b+"-body"),e=d.data("comment").text;d.hide(),c.hide();const f=$('<div class="time_edit" data-id="'+b+'"><form method="post"  class="comment-edit-content"><textarea name="text" id="'+b+'-text" rows="3" maxlength="65525" class="OwO-textarea border-radius-6-top textarea form-control no-border"></textarea><div class="panel-footer bg-light lter border-radius-6-bottom"><button type="submit" class="btn-xs btn m-b-xs btn-info btn-addon submit">'+LocalConst.OPERATION_CONFIRMED+'</button> <button type="button" class="btn-xs btn m-b-xs btn btn-addon cancel">'+LocalConst.OPERATION_CANCELED+"</button></div></form></div>").insertAfter(d),g=$("textarea[name=text]",f)[0];handsome_cross.tribute&&handsome_cross.tribute.attach(g),g.addEventListener("input",function(a){g.style.height="72px",g.style.height=a.target.scrollHeight+"px"}),g.addEventListener("focus",function(a){g.style.height="72px",g.style.height=a.target.scrollHeight+"px"}),g.addEventListener("keyup",function(a){8===a.keyCode?(this.style.height="inherit",this.style.height=this.scrollHeight+"px"):this.style.height=this.scrollHeight+"px"}),$("textarea[name=text]",f).val(e).focus(),$(".cancel",f).click(function(){const a=$(this).parents(".time_edit");a.remove();const b=a[0].dataset.id;$("#"+b+"-body").show(),$("#"+b+"-footer").show()}),$("form",f).submit(function(){const a=$(this).parents(".time_edit"),b=a[0].dataset.id,c=$("#"+b+"-footer"),d=$("#"+b+"-body");var e={};e.origin=d.data("comment").text,e.request_url=window.location.href,$("form",a).each(function(){for(var a=$(this).serializeArray(),b=0;b<a.length;b++){var c=a[b];e[c.name]=c.value}}),d.html("<p>"+e.text+"</p>");const f={text:e.text};return d.data("comment",f),$.post(d[0].dataset.edit_action,e,function(a){d.html(a.comment.content),hd_ui.highlight(d),handsome_content.comment_ajax_complete(b)},"json"),a.remove(),d.show(),c.show(),!1}),a.preventDefault(),a.stopPropagation()}),$(this).on("click","a.delete",function(a){const b=$(this).parents(".time_operation")[0].dataset.id,c=$(this).parents(".time_operation")[0].dataset.delete_action,d=$("#"+b);confirm(LocalConst.CROSS_DELETE_DESC)&&d.fadeOut(function(){window.location.href=c}),a.preventDefault(),a.stopPropagation()}))}),$("#time_content").on("click",".time_tag_operation",function(){$("body").addClass("compensate-for-scrollbar");const b=$(this)[0].dataset.tid,c=$(this)[0].dataset.name;$(this).children(".dropdown-menu").length<=0&&$(this).append('            <ul class="dropdown-menu">                                          <li role="presentation">                                            <a role="menuitem" class="edit" data-name="'+c+'" data-tid="'+b+'">'+LocalConst.EDIT+'</a>                                        </li>                                        <li role="presentation">                                            <a role="menuitem" class="delete" data-tid="'+b+'">'+LocalConst.DELETE+"</a>                                        </li>                                      </ul>"),$(this).children(".dropdown-menu").css("top",$(this)[0].getBoundingClientRect().top+15),$(this).children(".dropdown-menu").css("left",$(this)[0].getBoundingClientRect().left-20),$(this).on("click","a.edit",function(b){const c=$(this)[0].dataset.tid,d=$(this)[0].dataset.name;hd_ui.confirm({title:LocalConst.TAG_EDIT_TITLE,type:"form",form:[a("",LocalConst.TAG_EDIT_DESC,"label"),a("edited_name",d,"text"),a("action","edit_tag","hidden"),a("tid",c,"hidden")],confirmText:LocalConst.OPERATION_CONFIRMED}),b.preventDefault(),b.stopPropagation()}),$(this).on("click","a.delete",function(b){const c=$(this)[0].dataset.tid;hd_ui.confirm({
title:LocalConst.TAG_DELETE_TITLE,type:"form",form:[a("",LocalConst.TAG_DELETE_DESC,"label"),a("tid",c,"hidden"),a("action","delete_tag","hidden")],confirmText:LocalConst.OPERATION_CONFIRMED}),b.preventDefault(),b.stopPropagation()})}),$(".time_tag_operation").on("hidden.bs.dropdown",function(){$("body").removeClass("compensate-for-scrollbar")})},initTribute:function(){const a=this;handsome_util.addScript("https://lf9-cdn-tos.bytecdntp.com/cdn/expire-1-M/tributejs/5.1.3/tribute.min.js","tribute_js",function(){a.getOnlineTagList(function(){a.tribute=new Tribute(a.tag_options),a.tribute.attach(document.getElementById("comment"))})})},getOnlineTagList:function(a){this.tag_options.values=JSON.parse(LocalConst.TAG_LIST),a&&a()},addTag:function(a){},editTag:function(a,b){},deleteTag:function(a){},initVditor:function(){handsome_util.addStyle(LocalConst.PLUGIN_URL+"/Handsome/assets/css/editor.css","vditor_custom_css"),handsome_util.addStyle(LocalConst.VDITOR_CDN+"/dist/index.css","vditor_css"),handsome_util.addScript(LocalConst.VDITOR_CDN+"/dist/index.min.js","vditor_method",function(){handsome_cross.VditorParse()})},VditorParse:function(){var a=$("#comment").text();handsome_content.getSuiteHighlightStyleFileName();$("#vditor_comment").on("click","button",function(a){a.preventDefault(),a.stopPropagation()});new Vditor("vditor_comment",{typewriterMode:!0,height:72,cdn:LocalConst.VDITOR_CDN,value:a})}},handsome_enhance={init:function(){this.statisticPane(),this.skPlayer(),this.initAndPjax_Complete(),this.loginTabClick()},pjax_complete:function(){this.initAndPjax_Complete(),"water_fall"===LocalConst.THUMB_STYLE&&this.initWaterFall()},commentPjax_Complete:function(){this.feather()},initAndPjax_Complete:function(){this.mobile_right(),this.feather(),this.plusFont(),this.showShareImg(),this.bindInsertMediumButton(),this.bindShowDiv(),this.startPost()},loginTabClick:function(){$("#user_panel .nav-link").on("click",function(a){a.stopPropagation(),$(this).tab("show")})},startPost:function(){var a;$("#star_post").on("mouseenter",function(){a=Date.now()}),$("#star_post").on("click",function(){if($(this).hasClass("like_button_active"))$.message({title:LocalConst.OPERATION_NOTICE,message:"您已点赞",type:"info"}),handsome_trick.launchConfetti($(this),Date.now()-a);else{const b=$(this);$("#like_label").text(parseInt($("#like_label").text())+1),$(this).addClass("like_button_active"),setTimeout(function(){handsome_trick.launchConfetti(b,Date.now()-a)},350),$.get(LocalConst.BLOG_URL,{action:"star_post",cid:$(this).data("cid")}).error(function(){$.message({title:LocalConst.OPERATION_NOTICE,message:LocalConst.STAR_ERROR_NETWORK,type:"warning"})}).success(function(a){"1"===a?window.LocalConst.USER_LOGIN?$.message({title:LocalConst.OPERATION_NOTICE,message:LocalConst.STAR_SUCCESS+" 😏",type:"success"}):$.message({title:LocalConst.OPERATION_NOTICE,message:LocalConst.STAR_SUCCESS,type:"success"}):"2"===a?(b.children(".like_label").text(parseInt(b.children(".like_label").text())-1),$.message({title:LocalConst.OPERATION_NOTICE,message:LocalConst.STAR_REPEAT,type:"info"})):"-1"===a&&(b.children(".like_label").text(parseInt(b.children(".like_label").text())-1),b.removeClass("like_button_active"),$.message({title:LocalConst.OPERATION_NOTICE,message:LocalConst.STAR_ERROR_CODE,type:"error"}))})}})},feather:function(){feather.replace({width:"16px",height:"16px"})},statisticPane:function(){$("#statistic_pane").on("click",function(){"true"!==$("#statistic_pane").attr("data-status")&&(Number(window.innerWidth)<767&&$("#statistic_pane ~ .dropdown-menu .info-icons").addClass("hide"),handsome_util.addScript(LocalConst.ECHART_CDN+"/echarts.min.js","echarts_js",function(){$.getJSON(LocalConst.BLOG_URL+"?action=get_statistic&size="+window.innerWidth,function(a){if(LocalConst.CALENDAR_GITHUB)try{$.getJSON("https://python-github-calendar-api.vercel.app/api?"+LocalConst.CALENDAR_GITHUB,function(b){for(var c=0,d=!1,e=0;e<b.contributions.length&&!d;e++){const f=b.contributions[e];for(var g=0;g<f.length;){const h=f[g];console.log(c);const i=a.post_calendar.series[c][0];if(Date.parse(h.date)===Date.parse(i)?(a.post_calendar.series[c][1]+=h.count,c++,g++):Date.parse(h.date)<Date.parse(i)?g++:c++,c>=a.post_calendar.series.length){d=!0;break}}}handsome_enhance.showTheEChart(a)})}catch(b){console.log(b),handsome_enhance.showTheEChart(a)}else handsome_enhance.showTheEChart(a);$("#statistic_pane").attr("data-status","true")}).fail(function(){handsome_util.adminAlert("请求失败，可能原因；1. 未在Handsome插件构建搜索索引 2. 伪静态设置错误")})}))})},mobile_right:function(){$(".off-screen-toggle").click(function(){$("#aside").toggleClass("off-screen"),$("#footer").removeClass("hide")})},showTheEChart:function(a){$(".loading-echart").addClass("hide"),$(".top-echart").removeClass("hide");const b=LocalConst.IS_TRANSPARENT?"dark":handsome_UI.mode,c=echarts.init(document.getElementById("post-calendar"),b),d=echarts.init(document.getElementById("posts-chart"),b),e=echarts.init(document.getElementById("categories-chart"),b),f=echarts.init(document.getElementById("tags-chart"),b),g=echarts.init(document.getElementById("category-radar"),b);var h,i,j,k;"light"===b?(h=["#ebedf0","#c6e48b","#7bc96f","#239a3b","#196127"],i="#fff",j="#3C4858",k="#f9f9f9"):(h=["#ebedf0","#c6e48b","#7bc96f","#239a3b","#196127"],i="#000",j="#fff",k="#212121",LocalConst.IS_TRANSPARENT&&(i="#999",k="transparent"));const l="zh_CN"==LocalConst.RENDER_LANG||"zh_TW"==LocalConst.RENDER_LANG?"cn":"en",m={backgroundColor:k,tooltip:{padding:10,backgroundColor:"#555",borderColor:"#777",borderWidth:1,formatter:function(a){var b=a.value;return'<div style="font-size: 14px;">'+b[0]+"："+b[1]+"</div>"}},visualMap:{show:!1,showLabel:!0,min:0,max:a.post_calendar.max,calculable:!1,inRange:{symbol:"rect",color:h},itemWidth:12,itemHeight:12,orient:"horizontal",left:"center",top:0},calendar:[{top:50,left:"center",range:a.post_calendar.range,cellSize:[13,13],splitLine:{show:!1},name:{textStyle:{color:j}},itemStyle:{borderColor:i,borderWidth:2},yearLabel:{show:!1},monthLabel:{nameMap:l,fontSize:11,color:j},dayLabel:{formatter:"{start}  1st",nameMap:l,fontSize:11,color:j}}],series:[{type:"heatmap",coordinateSystem:"calendar",calendarIndex:0,data:a.post_calendar.series}]},n={backgroundColor:k,tooltip:{},radar:{top:0,name:{textStyle:{color:j}},indicator:a.category_radar.indicator,center:["50%","50%"],radius:"66%"},series:[{type:"radar",color:["#3ecf8e"],itemStyle:{normal:{areaStyle:{type:"default"}}},data:[{value:a.category_radar.series,name:"文章分类数量"}]}]},o={backgroundColor:k,tooltip:{trigger:"axis"},xAxis:{type:"category",data:a.post_chart.xAxis,axisLine:{lineStyle:{color:j}},axisLabel:{color:j}},yAxis:{type:"value",axisLine:{lineStyle:{color:j}},axisLabel:{color:j}},series:[{name:"文章篇数",type:"line",color:["#6772e5"],data:a.post_chart.series,markPoint:{symbolSize:45,color:["#fa755a","#3ecf8e","#82d3f4"],data:[{type:"max",itemStyle:{color:["#3ecf8e"]},name:"最大值"},{type:"min",itemStyle:{color:["#fa755a"]},name:"最小值"}]},markLine:{itemStyle:{color:["#ab47bc"]},data:[{type:"average",name:"平均值"}]}}]},p={backgroundColor:k,tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},pie:{top:0},series:[{name:"分类",type:"pie",radius:"50%",color:a.categories_chart.color,data:a.categories_chart.indicator,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0}}}]},q={backgroundColor:k,tooltip:{},xAxis:[{type:"category",data:a.tags_chart.indicator,axisLine:{lineStyle:{color:j}},axisLabel:{color:j}}],yAxis:[{type:"value",axisLine:{lineStyle:{color:j}},axisLabel:{color:j}}],series:[{type:"bar",color:["#82d3f4"],barWidth:18,data:a.tags_chart.series,markPoint:{symbolSize:45,data:[{type:"max",itemStyle:{color:["#3ecf8e"]},name:"最大值"},{type:"min",itemStyle:{color:["#fa755a"]},name:"最小值"}]},markLine:{itemStyle:{color:["#ab47bc"]},data:[{type:"average",name:"平均值"}]}}]};c.setOption(m),d.setOption(o),e.setOption(p),f.setOption(q),g.setOption(n)},skPlayer:function(){$(".skPlayer-list-switch").bind("click",function(){null!=handsome_music.global_player&&handsome_music.global_player.list.toggle()})},plusFont:function(){$(".plus-font-size").click(function(){var a=$("#post-content").css("font-size"),b=parseFloat(a,10);a.slice(-2);b<=14?b+=2:b-=2,$("#post-content").css("font-size",b+"px")})},showShareImg:function(){$("#generateShareImg").click(function(){$.message({title:LocalConst.OPERATION_NOTICE,message:LocalConst.SCREENSHOT_BEGIN,type:"info",autoClose:!1}),html2canvas(document.getElementById("mdx-share-img"),{allowTaint:!0,useCORS:!0,scale:3,onrendered:function(a){try{var b=new Image;b.setAttribute("crossOrigin","Anonymous");var c=a.toDataURL("image/png");b.src=c,$.message({title:LocalConst.OPERATION_NOTICE,message:LocalConst.SCREENSHORT_SUCCESS,type:"success"}),$.fancybox.open([{src:c,opts:{caption:LocalConst.SCREENSHOT_NOTICE,thumb:c}}],{loop:!1})}catch(a){$.message({title:LocalConst.OPERATION_NOTICE,message:LocalConst.SCREENSHORT_ERROR,type:"error"})}}})})},bindInsertMediumButton:function(){var a=document.getElementById("comment");$("#imageInsertOk").bind("click",function(){var b=$("input[ name='imageInsertModal']").val();b='<img src="'+b+'">',handsome_enhance.insertContentInText(a,b,"#imageInsertModal")}),$("#videoInsertOk").bind("click",function(){var b=$("input[ name='videoInsertModal']").val();b='[vplayer url="'+b+'" /]\n',handsome_enhance.insertContentInText(a,b,"#videoInsertModal")}),$("#musicInsertOk").bind("click",function(){var b=$("input[ name='musicInsertModal']").val();$.ajax({type:"POST",url:LocalConst.MUSIC_API_PARSE,data:{data:b,size:"small"},async:!1,success:function(c){b=c,handsome_enhance.insertContentInText(a,b,"#musicInsertModal")}})})},insertContentInText:function(a,b,c){if($(c).modal("hide"),document.selection){a.focus();document.selection.createRange().text=b,a.focus()}else if(a.selectionStart||"0"==a.selectionStart){var d=a.selectionStart,e=a.selectionEnd,f=d;a.value=a.value.substring(0,d)+b+a.value.substring(e,a.value.length),f+=b.length,a.selectionStart=f,a.selectionEnd=f,a.focus()}else a.value+=b,a.focus()},bindShowDiv:function(){$(".show_hide_div").bind("click",function(){$("#author_info").toggleClass("hide")})},initWaterFall:function(){if($(".water-fall-container").length>0){var a=Macy({container:".water-fall-container",trueOrder:!1,margin:24,columns:3,breakAt:{1500:3,1100:2,940:2,520:1,400:1},useContainerForBreakpoints:!0});setTimeout(function(){a.recalculate()},0)}}},handsome_content={featherReplace:!1,postSingleParse:!1,allSingleParseFlag:!1,init:function(){this.initAndPjax_Complete()},comment_ajax_complete:function(a){feather&&feather.replace(),$('[data-toggle="tooltip"]').tooltip(),handsome_content.md_parse_after(a),handsome_content.highlight(a,!1)},pjax_complete:function(){this.featherReplace=!1,this.postSingleParse=!1,this.allSingleParseFlag=!1,null!=handsome_content.toc_tree&&(window.removeEventListener("scroll",handsome_content.tocScrollEvent),$("#tag_toc").length||(handsome_content.toc_tree.tocify("destroy"),handsome_content.toc_tree=null)),this.initAndPjax_Complete()},initAndPjax_Complete:function(){window.speechSynthesis&&window.speechSynthesis.cancel(),setTimeout(function(){handsome_content.contentInit()},0),void 0!==LocalConst.TIP_TITLE&&($.message({title:LocalConst.TIP_TITLE,message:LocalConst.TIP_CONTENT,type:"info",time:"5000"}),LocalConst.TIP_TITLE=void 0,LocalConst.TIP_CONTENT=void 0)},contentInit:function(){handsome_content.parseContainer("md_handsome_origin","md_handsome","handsome_md_text"),handsome_content.readModeInit(),handsome_content.parseContainer("comments","",""),handsome_content.allSingleParse()},readModeInit:function(){if($("#morphing").length>0)try{$("[data-morphing]").fancyMorph({hash:"morphing",showComplete:function(){"true"!==$("#morphing").attr("click_status")&&($("#morphing").attr("click_status","true"),handsome_content.parseContainer("morphing-content-real_origin","morphing-content-real","morphing-content-real_text",!0))}}),LocalConst.AUTO_READ_MODE&&$("#morphing").click()}catch(a){}},parseContainer:function(a,b,c,d){d=void 0!==d&&d,""!==b&&$("#"+b).length>0?$("#"+c).length>0&&"true"!==$("#"+c).attr("click_status")&&($("#"+c).attr("click_status","true"),handsome_util.addScript(LocalConst.VDITOR_CDN+"/dist/method.min.js","vditor_method",function(){handsome_content.vditorParse(b,c)})):(d&&"true"!==$("#"+a).attr("click_status")&&($("#"+a).html($("#"+a+"_text").text()),this.allSingleParseFlag=!1,feather.replace(),handsome_content.allSingleParse(a)),handsome_content.originParse(a))},getSuiteHighlightStyleFileName:function(){if(LocalConst.THEME_HIGHLIGHT_CODE){return"dark"===handsome_UI.mode?"mac_dark"===LocalConst.CODE_STYLE_DARK?"dracula":"mac_light"===LocalConst.CODE_STYLE_DARK?"github":""===LocalConst.CODE_STYLE_DARK?"dracula":LocalConst.CODE_STYLE_DARK:"mac_dark"===LocalConst.CODE_STYLE_LIGHT?"dracula":"mac_light"===LocalConst.CODE_STYLE_LIGHT?"github":""===LocalConst.CODE_STYLE_LIGHT?"github":LocalConst.CODE_STYLE_LIGHT}return""},getSuiteHighlightStyleClassName:function(){if(LocalConst.THEME_HIGHLIGHT_CODE){return"dark"===handsome_UI.mode?""===LocalConst.CODE_STYLE_DARK?"dracula":LocalConst.CODE_STYLE_DARK:""===LocalConst.CODE_STYLE_LIGHT?"github":LocalConst.CODE_STYLE_LIGHT}return""},highlightMacStyle:function(a){var b=handsome_content.getSuiteHighlightStyleClassName();-1!==b.indexOf("mac")&&$(handsome_util.getChildName(a,"pre")).each(function(a,c){c.className=b+" mac_pre box-shadow-wrap-lg"})},highlightEnhance:function(a){$(handsome_util.getChildName(a,"pre code")).each(function(a,b){const c=b.innerText,d=document.createElement("div");d.className="vditor-copy",d.innerHTML="<span aria-label=\"复制\"\nonmouseover=\"this.setAttribute('aria-label', '复制')\"\nclass=\"vditor-tooltipped vditor-tooltipped__w\"\nonclick=\"this.previousElementSibling.select();document.execCommand('copy');this.setAttribute('aria-label', '已复制')\">"+feather.icons.clipboard.toSvg();const e=document.createElement("textarea");e.value=handsome_util.code160to32(c),d.insertAdjacentElement("afterbegin",e),b.before(d),$(this).addClass("hljs"),hljs.highlightBlock(b),b.classList.add("vditor-linenumber","small-scroll-bar","overflow-y-auto");var f=b.querySelector(".vditor-linenumber__temp");f||(f=document.createElement("div"),f.className="vditor-linenumber__temp",b.insertAdjacentElement("beforeend",f));const g=getComputedStyle(b).whiteSpace;var h=!1;"pre-wrap"!==g&&"pre-line"!==g||(h=!0);var i="";const j=b.textContent.split(/\r\n|\r|\n/g);handsome_util.endWith(b.textContent,"\n")&&j.pop(),j.forEach(function(a){var b="";h&&(f.textContent=a||"\n",b=' style="height:'+f.getBoundingClientRect().height+'px"'),i+="<span"+b+"></span>"}),f.style.display="none",i='<span class="vditor-linenumber__rows">'+i+"</span>",b.insertAdjacentHTML("beforeend",i),b.style.maxHeight=window.outerHeight-40+"px"})},highlight:function(a,b){if(LocalConst.THEME_HIGHLIGHT_CODE){var c=handsome_content.getSuiteHighlightStyleFileName();-1===LocalConst.HIGHLIGHT_CDN.indexOf("vditor")&&(c+=".min"),b?handsome_util.addOrReplaceStyle(LocalConst.HIGHLIGHT_CDN+"/styles/"+c+".css","vditorHljsStyle"):handsome_util.addStyle(LocalConst.HIGHLIGHT_CDN+"/styles/"+c+".css","vditorHljsStyle"),handsome_content.highlightMacStyle(a);const d=-1!==LocalConst.HIGHLIGHT_CDN.indexOf("vditor")?LocalConst.HIGHLIGHT_CDN+"/highlight.pack.js":LocalConst.HIGHLIGHT_CDN+"/highlight.min.js";handsome_util.addScript(d,"highlight_js_",function(){handsome_content.highlightEnhance(a)})}},allSingleParse:function(a){this.allSingleParseFlag||(void 0===a&&(a="content"),this.allSingleParseFlag=!0,handsome_content.highlight(a,!1),LocalConst.POST_MATHJAX&&"vditor"!==LocalConst.EDITOR_CHOICE&&handsome_util.addScript(LocalConst.MATHJAX_SVG_CDN,"mathjax_js",function(b){b&&window.MathJax.typesetPromise([document.querySelector("#"+a)])}))},originParse:function(a){$("#"+a).length>0&&"true"!==$("#"+a).attr("click_status")&&($("#"+a).attr("click_status","true"),handsome_content.md_parse_after(a))},vditorParse:function(a,b){var c=$("#"+b).text();const d=handsome_content.getSuiteHighlightStyleFileName();Vditor.preview(document.getElementById(a),c,{theme:{current:null},speech:{enable:LocalConst.POST_SPEECH},hljs:{enable:LocalConst.THEME_HIGHLIGHT_CODE,lineNumber:!0,style:d},markdown:{sanitize:!1},cdn:LocalConst.VDITOR_CDN,lazyLoadImage:"morphing-content-real"===a?"":LocalConst.LOADING_IMG,anchor:0,math:{engine:"MathJax",macros:{bf:"{\\boldsymbol f}",bu:"{\\boldsymbol u}",bv:"{\\boldsymbol v}",bw:"{\\boldsymbol w}"},inlineDigit:!0},after:function(){b!==a&&$("#"+b).hide(),$("#"+a+" pre code").each(function(a,b){$(this).addClass("hljs")}),handsome_content.md_loading(a),handsome_content.md_parse_after(a),handsome_content.highlightMacStyle(a);try{new Function(LocalConst.VDITOR_COMPLETED.data)()}catch(a){handsome_util.settingError("Handsome插件设置————vditor回调函数"),console.error(a)}}})},tab_enhance:function(a){$(handsome_util.getChildName(a,'a[data-toggle="tab"]')).on("shown.bs.tab",function(a){var b=a.target.parentNode.parentNode,c=a.target.parentNode,d=handsome_util.getLeft(a.target.parentNode,0)-handsome_util.getLeft(b,0),e=b.scrollLeft,f=b.clientWidth/2-c.clientWidth/2,g=e+(d-f);g<0&&0!==e&&(g=0);var h=b.scrollWidth-b.clientWidth;g>h&&(g=h),g>=0&&smoothScroll(g,200,null,b,!0)})},post_speech:function(a){if($(".speech-button").length>0){const b=new SpeechSynthesisUtterance($("#"+a).text());void 0!==speechSynthesis.onvoiceschanged&&(speechSynthesis.onvoiceschanged=handsome_content.getVoice());const c=handsome_content.getVoice();c?(b.voice=c,b.onend=function(){$(".speech-button").removeClass("speech-current"),speechSynthesis.cancel(),$(".speech-button").html(feather.icons["play-circle"].toSvg({width:"16px",height:"16px"}))},$(".speech-button").on("click",function(){const a=$(this);$(this).hasClass("speech-current")?$(this).hasClass("paused")?(speechSynthesis.resume(),feather.icons.circle.toSvg(),$(".speech-button").html(feather.icons["pause-circle"].toSvg({width:"16px",height:"16px"})),$(this).removeClass("paused")):(speechSynthesis.pause(),$(".speech-button").html(feather.icons["play-circle"].toSvg({width:"16px",height:"16px"})),$(this).addClass("paused")):(speechSynthesis.speak(b),$(this).addClass("speech-current"),$(".speech-button").html(feather.icons["pause-circle"].toSvg({width:"16px",height:"16px"}))),setTimeout(function(){a.tooltip("hide")},500)})):$(".speech-button").hide()}},getVoice:function(){const a="zh_CN",b=speechSynthesis.getVoices();var c,d;return b.forEach(function(b){b.lang===a.replace("_","-")&&b.localService&&(c=b),b.default&&(d=b)}),c||(c=d),c},urlOpen:function(a){a=-1!==a.indexOf("comment")?handsome_util.getChildName(a,".comment-content-true"):"#"+a,$(a+" a:not(.light-link):not(.no-external-link)").each(function(){const a=$(this).attr("href");a&&(-1!==a.indexOf(LocalConst.BLOG_URL_N)||-1===a.indexOf("http")||($(this).attr("target","_blank"),LocalConst.NO_LINK_ICO||($(this).prepend('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg>'),$(this).prop("outerHTML",'<span class="external-link">'+$(this).prop("outerHTML")+"</span>"))))})},md_parse_after:function(a){handsome_content.table_wrap(a),handsome_content.setWechatAndio(a),handsome_content.setVideoTag(a),handsome_content.switchVideoEvent(a),!this.featherReplace&&$("#md_handsome").length>0&&-1!==a.indexOf("md_handsome")&&(feather.replace(),this.featherReplace=!0),handsome_content.urlOpen(a),handsome_content.setFancyBox(a),handsome_content.tab_enhance(a),this.postSingleParse||-1===a.indexOf("md_handsome")||(this.postSingleParse=!0,window.speechSynthesis?handsome_content.post_speech(a):$(".speech-button").hide(),$("#support_author").on("click",function(){$(".pay-img").each(function(){$(this).attr("src",$(this).attr("data-original"))})}),LocalConst.THEME_TOC&&handsome_content.toc(a))},md_loading:function(a){$(".loading-post").addClass("hide"),$("#"+a).removeClass("hide")},table_wrap:function(a){$("#"+a).find("table").wrap("<div class='table-responsive box-shadow-wrap-lg'></div>")},switchVideoEvent:function(a){$("#"+a+" .video-player>.panel-collapse").on("click",function(){$(this).attr("data-src")&&"true"!==$(this).attr("click-status")&&($("#"+$(this).attr("data-iframe")).attr("src",$(this).attr("data-src")),$(this).attr("click-status","true"))}),$("#"+a+" .video-player .btn-group label").on("click",function(){const b=$(this).attr("data-src");$("#"+a+" #title_"+$(this).attr("data-iframe")).text($(this).text().trim()),$("#"+a+" #"+$(this).attr("data-iframe")).attr("src")!==b&&($("#"+a+" #"+$(this).attr("data-iframe")).attr("src",$(this).attr("data-src")),$("#"+a+" #origin_"+$(this).attr("data-iframe")).attr("href",$(this).attr("data-origin")))})},setVideoTag:function(a){$("#"+a+" video").each(function(){$(this).hasClass("dplayer-video")||(void 0!==$(this).attr("controls")&&$(this).removeAttr("controls"),$(this).wrap('<div class="kyt-player embed-responsive embed-responsive-16by9"></div>'),$(this).parent().append('<div class="play-button"></div>'),$(this).on("loadedmetadata",function(){$(this).attr("loaded",!0)}),$(this).on("playing",function(){$(this).parent(".kyt-player").hasClass("embed-responsive embed-responsive-16by9")&&($(this).parent(".kyt-player").removeClass("embed-responsive embed-responsive-16by9"),$(this).parent(".kyt-player").css("width",Math.min($(this).parent(".kyt-player").width(),$(this)[0].videoWidth)),$(this).parent(".kyt-player").css("height",$(this).parent(".kyt-player").width()*$(this)[0].videoHeight/$(this)[0].videoWidth))}),$(this).bind("click",function(){$(this).next(".play-button").is(":hidden")&&($(this).next(".play-button").css("display","block"),$(this).removeAttr("controls"),$(this).get(0).pause())}))}),$(window).resize(function(){$(".kyt-player").each(function(){$(this)[0].style="",$(this).addClass("embed-responsive embed-responsive-16by9")})}),$("#"+a).delegate(".play-button","click",function(a){$(this).prev("video").css("background-image","none"),$(this).is(":visible")&&($(this).css("display","none"),$(this).parent().children("video").attr("controls","controls"),$(this).parent().children("video")[0].play())})},setWechatAndio:function(a){handsome_music.initPostMusic(a)},toc_tree:null,toc:function(a){const b=window.innerWidth<=992||LocalConst.NO_SHOW_RIGHT_SIDE_IN_POST?"tocTree":"toc";$("#"+b).length>0?(handsome_content.toc_tree&&(handsome_content.toc_tree.tocify("destroy"),handsome_content.toc_tree=null),handsome_content.toc_tree=$("#"+b).tocify({context:"#"+a,selectors:"h1,h2,h3,h4,h5,h6",extendPage:!1,scrollTo:LocalConst.OFF_SCROLL_HEIGHT,showAndHide:!0,history:!1,followScrollOffSet:window.innerWidth>992&&!LocalConst.NO_SHOW_RIGHT_SIDE_IN_POST?300:400}),window.innerWidth>992&&!LocalConst.NO_SHOW_RIGHT_SIDE_IN_POST?(startPos=0,$("#tag_toc").length>0&&(startPos=Number($("#tag_toc").offset().top)-Number(parseInt(LocalConst.OFF_SCROLL_HEIGHT)),$("#tag_toc").css("top",Number(parseInt(LocalConst.OFF_SCROLL_HEIGHT)))),$(".tocify-mobile-panel").hide()):$("#tag_toc").hide(),null!=handsome_content.toc_tree&&window.addEventListener("scroll",handsome_content.tocScrollEvent)):handsome_content.toc_tree=null},parsePhotos:function(a){$(handsome_util.getChildName(a,".album_block")).shortcode({album:function(){const a=/<img.*?src="(.*?)"(.*?)(alt="(.*?)")??(.*?)\/?>/g,b=/alt="(.*?)"/,c=this.options&&"photos"===this.options.type;var d,e=!1,f="";for(f+=c?"<div class='album-photos'>":"<div class='photos'>";null!==(d=a.exec(this.contents));){e||(e=!0);var g=b.exec(d[5]),h=null==g?"":g[1];c?(f+="<figure>"+d[0].toString()+"<figcaption>",f+=h.toString()+"</figcaption></figure>"):f+='<figure class="image-thumb" itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">'+d[0]+'<figcaption itemprop="caption description">'+h+"</figcaption></figure>"}return e||(f='<small class="text-muted letterspacing indexWords">相册无图片</small>'),f+="</div>"}})},setPhotosAuto:function(a){$.each($(handsome_util.getChildName(a,".album-photos figure")),function(a,b){var c=new Image;if("1"===LocalConst.LAZY_LOAD){const d=$(b).find("img").attr("data-src");c.src=d||$(b).find("img").attr("src")}else c.src=$(b).find("img").attr("src");c.onload=function(){var a=parseFloat(c.width),d=parseFloat(c.height);$(b).css("flex-grow",50*a/d),$(b).find("a").css("padding-top",d/a*100+"%")}})},setImageFancyBox:function(a){$.fancybox.defaults.hash=!1,$.fancybox.defaults.buttons=["zoom","download","thumbs","close"],$(handsome_util.getChildName(a,"img")).each(function(){var a=$(this);if(void 0!==a.attr("alt"))var b=a.attr("alt");else var b="";var c=a.parent("a"),d=typeof a.attr("noGallery"),e=typeof a.attr("noAlt"),f=typeof a.attr("imgBlur");if(void 0!==a.attr("max")&&a.wrap('<div class="max-img overflow-y-auto small-scroll-bar"></div>'),"undefined"===d&&(!c||c.size()<1)){var g;g=this.getAttribute("data-src")||this.getAttribute("data-original")||this.getAttribute("src"),g=g.replace(/(.*?)[!|\?]\/.*/,"$1");var h=a.attr("class"),i="";void 0!==h&&-1!==h.indexOf("emotion")||(a.parent().hasClass("image-thumb")||a.parent().parent().hasClass("album-photos")||!LocalConst.SHOW_IMAGE_ALT||"undefined"!==e||(i='<figcaption class="post-img-figcaption">'+b+"</figcaption>"),a.addClass("block"));var j=a.prop("outerHTML");j+=i,"undefined"!==f?a.prop("outerHTML",'<a class="light-link img-blur" data-fancybox="gallery" style="background-image: url('+g+')" no-pjax data-type="image" data-caption="'+b+'" href="'+g+'">'+j+"</a>"):a.prop("outerHTML",'<a class="light-link" data-fancybox="gallery" no-pjax data-type="image" data-caption="'+b+'" href="'+g+'">'+j+"</a>")}})},setFancyBox:function(a){handsome_content.parsePhotos(a),handsome_content.setImageFancyBox(a),handsome_content.setPhotosAuto(a),"1"===LocalConst.LAZY_LOAD&&$(handsome_util.getChildName(a,"img")).lazyload({effect:"fadeIn",threshold:"200",vertical_only:!0})},reInitDPlayer:function(container){if(!("undefined"==typeof dPlayerOptions||"undefined"==typeof dPlayers||$(".dplayer").length<=0)){var regex=/<script>(dPlayerOptions.*?)<\/script>/,result=regex.exec($("#"+container).html());if(null!=result){const js=result[1].trim();eval(js)}for(var len=dPlayerOptions.length,i=0;i<len;i++)dPlayers[i]=new DPlayer({container:document.getElementById("player"+dPlayerOptions[i].id),element:document.getElementById("player"+dPlayerOptions[i].id),screenshot:!1,autoplay:dPlayerOptions[i].autoplay,video:dPlayerOptions[i].video,theme:dPlayerOptions[i].theme,danmaku:dPlayerOptions[i].danmaku})}},tocScrollEvent:function(){var a=window.scrollY;window.innerWidth>992&&!LocalConst.NO_SHOW_RIGHT_SIDE_IN_POST&&(("undefined"==typeof startPos||startPos<0)&&(startPos=Number($("#tag_toc").offset().top)-Number(parseInt(LocalConst.OFF_SCROLL_HEIGHT))),a>startPos?$("#tag_toc").addClass("fixed"):$("#tag_toc").removeClass("fixed"))}},handsome_music={post_APlayer_list:[],comment_APlayer_list:[],global_player:null,playerType:{md_handsome_origin:"post",md_handsome:"post",comments:"comment","":"global",handsome_global_player:"global"},init:function(){handsome_music.initIndexMusic(),handsome_music.initAndPjax_Complete()},pjax_click:function(){},pjax_complete:function(){this.destroyMusic(),this.initAndPjax_Complete()},initAndPjax_Complete:function(){},initPostMusic:function(a){handsome_music.initPlayer(a,!1)},initPlayer:function(a,b){$(handsome_util.getChildName(a,".handsome_aplayer")).each(function(){const c=handsome_music.playerType[a];var d=[];const e=$(this).children(".handsome_aplayer_music").length;var f=0;const g=$(this).get(0);$(this).children(".handsome_aplayer_music").each(function(a){const h=$(this)[0];if(h.dataset.id){var i=LocalConst.MUSIC_API;i=i.replace(":server",h.dataset.server),i=i.replace(":type",h.dataset.type),i=i.replace(":id",h.dataset.id),i=i.replace(":auth",h.dataset.auth),i=i.replace(":r",Math.random()),$.ajax({type:"GET",url:i,error:function(a){f=handsome_music.checkPlayerDataLoaded(g,f,e,d,!0,b,c)},success:function(a){const h=$.parseJSON(a);d.push.apply(d,h),f=handsome_music.checkPlayerDataLoaded(g,f,e,d,!0,b,c)}})}else{const j={name:h.dataset.name||h.dataset.title||"Audio name",artist:h.dataset.artist||h.dataset.author||"Audio artist",url:h.dataset.url,cover:h.dataset.cover||h.dataset.pic,lrc:h.dataset.lrc,type:h.dataset.type||"auto"};d.push(j),f=handsome_music.checkPlayerDataLoaded(g,f,e,d,j.lrc,b,c)}})})},checkPlayerDataLoaded:function(a,b,c,d,e,f,g){return b++,b===c&&handsome_music.buildAPlayer(a,d,e,f,g),b},buildAPlayer:function(a,b,c,d,e){var f={container:a,audio:b,mini:null,fixed:null,autoplay:!1,mutex:!0,lrcType:3,listFolded:!1,preload:"none",theme:"#2980b9",loop:"all",order:"list",volume:null,listMaxHeight:null,customAudioType:null,storageName:"metingjs",fix_position:!1};if(b.length){c||(f.lrcType=0);var g={};for(var h in f){var i=h.toLowerCase();(a.dataset.hasOwnProperty(i)||a.dataset.hasOwnProperty(h)||null!==f[h])&&(g[h]=a.dataset[i]||a.dataset[h]||f[h],"true"!==g[h]&&"false"!==g[h]||(g[h]="true"==g[h]))}if(d){b.length<=1&&$("#global_player_toggle").hide(),handsome_music.global_player=new APlayer(g);try{if(LocalConst.SHOW_LYRIC||handsome_music.global_player.lrc.hide(),LocalConst.AUTO_SHOW_LYRIC&&(handsome_music.global_player.on("play",function(){handsome_music.global_player.lrc.show()}),handsome_music.global_player.on("pause",function(){handsome_music.global_player.lrc.hide()})),a.dataset.hasOwnProperty("i_autoplay")&&a.dataset.i_autoplay){$.message({title:LocalConst.MUSIC_NOTICE,message:LocalConst.MUSIC_AUTO_PLAY_NOTICE,type:"warning"});var j=!0;setTimeout(function(){j&&handsome_music.global_player.play()},3e3),$(".stopMusic").click(function(){j=!1,$(".c-message--close").click()})}}catch(a){}}else"comment"===e?this.comment_APlayer_list.push(new APlayer(g)):this.post_APlayer_list.push(new APlayer(g));$(a).children(".handsomePlayer-tip-loading").hide()}},initIndexMusic:function(){handsome_music.initPlayer("handsome_global_player",!0)},destroyMusic:function(){handsome_music.destroyCommentMusic(),handsome_music.destroyPostMusic()},destroyCommentMusic:function(){try{this.comment_APlayer_list.forEach(function(a){a.pause(),a.destroy()})}catch(a){}handsome_music.comment_APlayer_list=[]},destroyPostMusic:function(){try{this.post_APlayer_list.forEach(function(a){a.pause(),a.destroy()})}catch(a){}handsome_music.post_APlayer_list=[]}},handsome_pjax={comment_pjax_clicked:!1,comment_pjax_init_success:!1,initCommentPjax:function(){this.comment_pjax_init_success||($("#content").on("click","#comment-navigation a",function(){handsome_pjax.comment_pjax_clicked=!0}),$("#content").pjax&&$("#content").pjax('#comment-navigation a[href^="'+LocalConst.BLOG_URL_N+'"]:not(a[target="_blank"]):not([no-pjax])',{container:"#post-comment-list",fragment:"#post-comment-list",timeout:8e3}).on("pjax:send",function(){}).on("pjax:click",function(){handsome_pjax.comment_pjax_clicked&&(handsome_UI.commentSkeleton(),handsome_core.onlyPjax.comment_pjax_click())}).on("pjax:complete",function(){if(handsome_pjax.comment_pjax_clicked){handsome_core.onlyPjax.comment_pjax_complete(),$("#post-comment-list .loading-nav").addClass("hide");var a=window.scrollTop||window.pageYOffset;smoothScroll(handsome_util.getTop(document.querySelector("#post-comment-list"),a)-LocalConst.OFF_SCROLL_HEIGHT)}}).on("pjax:end",function(){handsome_pjax.comment_pjax_clicked=!1}),handsome_pjax.comment_pjax_init_success=!0)},init:function(){this.initAndPjax_Complete(),$(document).pjax&&$(document).pjax('a[href^="'+LocalConst.BLOG_URL_N+'"]:not(a[target="_blank"]):not([no-pjax]), a[data-pjax]',{container:"#content",fragment:"#content",timeout:8e3}).on("pjax:send",function(){}).on("pjax:click",function(){handsome_pjax.comment_pjax_clicked||handsome_core.onlyPjax.pjax_click()
}).on("pjax:complete",function(){handsome_pjax.comment_pjax_clicked||(handsome_core.onlyPjax.pjax_complete(),"1"===LocalConst.LAZY_LOAD&&("1"===LocalConst.PAGE_ANIMATE?$(".app-content-body").animateCss("fadeIn",function(){$(".lazy").lazyload({effect:"fadeIn",threshold:"500"})}):$(".lazy").lazyload({effect:"fadeIn",threshold:"500"})))}).on("pjax:end",function(){handsome_pjax.comment_pjax_clicked||handsome_core.onlyPjax.pjax_end()})},pjax_click:function(){if(handsome_UI.showAnimate(),"auto"===LocalConst.PJAX_TO_TOP){if("default"===LocalConst.PJAX_ANIMATE){document.head.setAttribute("style","position: sticky");const a="sticky"===window.getComputedStyle(document.head).position;if(a){const b=$(".app-header-fixed").length>0;!b&&handsome_util.getScrollTop()>=50||b&&handsome_util.getScrollTop()>0?$("#loading").addClass("loading-sticky"):$("#loading").removeClass("loading-sticky")}else $("#loading").removeClass("loading-sticky"),$("body,html").animate({scrollTop:0},Number(LocalConst.TO_TOP_SPEED))}}else"0"===LocalConst.PJAX_TO_TOP&&$("body,html").animate({scrollTop:0},Number(LocalConst.TO_TOP_SPEED))},pjax_complete:function(){handsome_UI.hideAnimate();try{new Function(LocalConst.USER_COMPLETED.data)()}catch(a){handsome_util.settingError("外观设置——pjax设置——回调函数"),console.error(a)}this.initAndPjax_Complete()},initAndPjax_Complete:function(){handsome_pjax.initCommentPjax()}},handsome_resize={rightAsideWidth:-1,_startX:0,_needRecover:!1,handle_list:{left:{},right:{}},left_max_width:260,right_max_width:350,right_min_width:200,is_left_drag:!1,is_right_drag:!1,init:function(){LocalConst.SHOW_SETTING_BUTTON||this.initResize()},pjax_click:function(){this.cancelLeftBarListener(),this.cancelRightBarListener()},pjax_complete:function(){this.checkResize()},checkResize:function(){handsome_resize._needRecover=!1,handsome_resize._startX=0,this.correctLeftSwitch(),this.correctRightSwitch(),this.correctPosition()},initResize:function(){this.checkResize(),handsome_resize.left_max_width=$("#aside").width()+20,handsome_resize.right_max_width=$("#rightAside").width()+40},needResize:function(){this.checkResize()},reSet:function(){$("#content").removeClass("left-aside-folded"),$("#content").removeClass("right-aside-folded"),this.checkResize()},removeDragListener:function(a){document.removeEventListener&&(document.removeEventListener("mousemove",this.handle_list[a].mousemove,!0),document.removeEventListener("mouseup",this.handle_list[a].mouseup,!0))},addDragListener:function(a){document.addEventListener&&(document.addEventListener("mousemove",this.handle_list[a].mousemove,!0),document.addEventListener("mouseup",this.handle_list[a].mouseup,!0))},correctPosition:function(){$("#content").hasClass("left-aside-folded")?($("#trigger_left_button").css("left",$("#aside").offset().left+"px"),this.triggerLeftPanel(!1)):(this.triggerLeftPanel(!0),$("#trigger_left_content").css("left",$("#aside").width())),$("#content").hasClass("right-aside-folded")?($("#trigger_right_button").css("left",$("#trigger_right_content").offset().left-22+"px"),this.triggerRightPanel(!1)):(this.triggerRightPanel(!0),handsome_enhance.rightAsideWidth>0&&$("#rightAside").css("width",handsome_enhance.rightAsideWidth+"px"))},correctLeftSwitch:function(){return LocalConst.CLOSE_LEFT_RESIZE||window.innerWidth<760||LocalConst.IS_TRANSPARENT||$("#alllayout").hasClass("app-aside-dock")||!$("#alllayout").hasClass("app-aside-fix")||$("#alllayout").hasClass("app-aside-folded")?(handsome_resize.closeLeftResize(),!1):(handsome_resize.openLeftResize(),!0)},correctRightSwitch:function(){return LocalConst.CLOSE_RIGHT_RESIZE||window.innerWidth<984?(handsome_resize.closeRightResize(),!1):(handsome_resize.openRightResize(),!0)},closeRightResize:function(){$("#content").removeClass("right-aside-folded"),this.triggerRightPanel(!0),$("#trigger_right_content").hide(),this.cancelRightBarListener()},closeLeftResize:function(){$("#trigger_left_content").hide(),$("#content").removeClass("left-aside-folded"),this.triggerLeftPanel(!0),this.cancelLeftBarListener()},openRightResize:function(){$("#trigger_right_content").show(),this.registerRightBarListener()},openLeftResize:function(){$("#trigger_left_content").show(),this.registerLeftBarListener()},setLeftSize:function(a){$("#content").css("margin-left",a),$("#footer").css("margin-left",a),""===a?$("#trigger_left_content").css("left",$("#aside").width()):$("#trigger_left_content").css("left",a),$("#header_right").css("margin-left",a),$("#header_left").css("width",a)},triggerLeftPanel:function(a){if(a)$("#aside").css("width",""),$("#content").removeClass("left-aside-folded"),setTimeout(function(){handsome_resize.setLeftSize("")},0),$("#aside").css("visibility","visible"),$("#aside-user").css("visibility","visible");else{$("#aside").css("visibility","hidden"),$("#aside-user").css("visibility","hidden");const b=$("#aside").offset().left;this.setLeftSize("0px"),$("#content").addClass("left-aside-folded"),$("#trigger_left_button").css("left",b)}},triggerRightPanel:function(a){a?($("#content").removeClass("right-aside-folded"),handsome_enhance.rightAsideWidth=-1):($("#content").addClass("right-aside-folded"),$("#rightAside").css("width",""),$("#trigger_right_button").css("left",$("#trigger_right_content").offset().left-22+"px"),handsome_enhance.rightAsideWidth=-1)},cancelLeftBarListener:function(){$("#trigger_left_button").off("click"),$("#trigger_left_content").off("mousedown"),this.handle_list.left.isRegister=!1},cancelRightBarListener:function(){$("#trigger_right_button").off("click"),$("#trigger_right_content").off("mousedown"),this.handle_list.right.isRegister=!1},registerLeftBarListener:function(){if(!handsome_resize.handle_list.left.isRegister){handsome_resize.handle_list.left.isRegister=!0,$("#trigger_left_button").on("click",function(){handsome_resize.triggerLeftPanel(!0)});const a=function(a){handsome_resize.is_left_drag=!0,a||(a=window.event),$("#aside").css("visibility","visible"),$("#aside-user").css("visibility","visible");const b=parseInt(a.clientX),c=$("#aside").offset().left;b-c>=0&&b-c<=handsome_resize.left_max_width?($("#trigger_left_content").hasClass("trigger_drag")||$("#trigger_left_content").addClass("trigger_drag"),handsome_resize.setLeftSize(b-c+"px"),b-c>200&&$("#aside").css("width",b-c+"px")):$("#trigger_left_content").removeClass("trigger_drag"),a.stopPropagation?a.stopPropagation():a.cancelBubble=!0},b=function(a){handsome_resize.is_left_drag=!1,$("body").removeClass("no-select"),$("#content").removeClass("resize-drag"),a||(a=window.event),handsome_resize.removeDragListener("left"),$("#trigger_left_content").removeClass("trigger_drag");const b=$("#aside").offset().left,c=parseInt(a.clientX);c-b<$("#aside").width()?c-b<$("#aside").width()/2?handsome_resize.triggerLeftPanel(!1):handsome_resize.triggerLeftPanel(!0):$("#content").removeClass("left-aside-folded"),a.stopPropagation?a.stopPropagation():a.cancelBubble=!0};this.handle_list.left.mousemove=a,this.handle_list.left.mouseup=b,$("#trigger_left_content").on("mousedown",function(a){$("body").addClass("no-select"),$("#post-panel").height()<$("#aside").height()-100&&$("#post-panel").css("height",$("#aside").height()-100),$("#content").addClass("resize-drag"),handsome_resize.addDragListener("left")}),$("#trigger_left_content").on("mouseover",function(a){$("body").addClass("no-select")}),$("#trigger_left_content").on("mouseout",function(a){handsome_resize.is_left_drag||$("body").removeClass("no-select")})}},registerRightBarListener:function(){if(!handsome_resize.handle_list.right.isRegister){handsome_resize.handle_list.right.isRegister=!0,$("#trigger_right_button").on("click",function(){handsome_resize.triggerRightPanel(!0),handsome_resize._needRecover=!1,handsome_resize._startX=0,$("#toc").css("width",$("#rightAside").width()-40+"px")});const a=function(a){handsome_resize.is_right_drag=!0,a||(a=window.event);const b=parseInt(a.clientX);0===handsome_resize._startX&&(handsome_resize._startX=b);const c=b-handsome_resize._startX;if(handsome_resize._needRecover)handsome_resize.triggerRightPanel(!0),handsome_resize._startX=0;else{const d=$("#rightAside").width()-c;d>handsome_resize.right_min_width&&d<handsome_resize.right_max_width?(handsome_enhance.rightAsideWidth=d,$("#rightAside").css("width",d+"px"),$("#toc").css("width",d-40+"px"),handsome_resize._startX=b,$("#trigger_right_content").hasClass("trigger_drag")||$("#trigger_right_content").addClass("trigger_drag")):(d<=handsome_resize.right_min_width&&handsome_resize.triggerRightPanel(!1),$("#trigger_right_content").removeClass("trigger_drag"))}a.stopPropagation?a.stopPropagation():a.cancelBubble=!0},b=function(a){handsome_resize.is_right_drag=!1,$("#trigger_right_content").removeClass("trigger_drag"),handsome_resize._needRecover=$("#content").hasClass("right-aside-folded"),$("body").removeClass("no-select"),a||(a=window.event),handsome_resize.removeDragListener("right"),a.stopPropagation?a.stopPropagation():a.cancelBubble=!0};this.handle_list.right.mousemove=a,this.handle_list.right.mouseup=b,$("#trigger_right_content").on("mousedown",function(a){$("body").addClass("no-select"),handsome_resize.addDragListener("right")}),$("#trigger_right_content").on("mouseover",function(a){$("body").addClass("no-select"),$("#trigger_right_content").height($("#alllayout").height()-$("#header").height())}),$("#trigger_right_content").on("mouseout",function(a){handsome_resize.is_right_drag||$("body").removeClass("no-select")})}}},handsome_search={search_data:{},search_data_status:{},search_type:"POST",search_container:{POST:"#search_modal_list",TIME_COMMENT:"#time_search_modal_list"},search_input:{DROP:"#search_input",MODAL:"#search_modal_input"},modal_is_showing:!1,drop_menu_is_showing:!1,up_down_select_hotkey_is_bind:!1,init:function(){hotkeys.filter=function(a){return!0},this.searchTips(),this.searchPopup()},up_down_select_enter:function(a,b){const c=handsome_search.modal_is_showing?handsome_search.search_container[handsome_search.search_type]:handsome_search.drop_menu_is_showing?"#search_tips_drop":"";if(!c)return!1;const d="up"===b.key?-1:"down"===b.key?1:0;var e=$.makeArray($(c).find("li")),f="up"===b.key?0:-1;if(e.forEach(function(a,b){$(a).hasClass("active")&&(f=b)}),"enter"===b.key)return-1===f&&handsome_search.drop_menu_is_showing?$("#searchform1").submit():$(e[f]).children("a").click(),!1;var g=(e.length+f+d)%e.length;$(e[f]).removeClass("active"),$(e[g]).addClass("active"),handsome_search.scrollTo($(e[g]),$(c),5)},scrollTo:function(a,b,c){if(0!==a.length){var d=b[0].clientHeight,e=a[0].clientHeight+a.position().top;e>d&&b.scrollTop(b.scrollTop()+e-d);var f=a.position().top;f<0&&b.scrollTop(b.scrollTop()+f-c)}},set_search_data:function(){function a(){handsome_search.modal_is_showing&&!handsome_search.search_data_status[b]&&handsome_search.search_data[b]?($("#search_modal_input").attr("disabled",!1),handsome_search.set_loading_status("search_modal_submit",!1),$("#search_modal_input").val()&&handsome_search.search_action($("#search_modal_input").val()),$("#search_modal_input").select()):($("#search_modal_input").attr("disabled",!0),handsome_search.set_loading_status("search_modal_submit",!0))}const b=handsome_search.search_type;if(handsome_search.search_data[b]||handsome_search.search_data_status[b])a();else{handsome_search.search_data_status[b]=!0,$("#search_modal_input").attr("disabled",!0),handsome_search.set_loading_status("search_modal_submit",!0);const c="POST"===b?LocalConst.LATEST_POST_TIME:LocalConst.LATEST_TIME_COMMENT_TIME;$.getJSON(LocalConst.BLOG_URL+"?action=get_search_cache&type="+b+"&v="+c+"&l="+LocalConst.USER_LOGIN,function(c){handsome_search.search_data_status[b]=!1,handsome_search.search_data[b]=c,a()})}},searchPopup:function(){const a=handsome_util.isMac()?"command+k":"ctrl+k";hotkeys(a,function(){return $("#search_modal").modal("toggle"),!1}),$("#search_modal").on("shown.bs.modal",function(a){handsome_search.modal_is_showing=!0,-1!==window.location.href.indexOf("cross")?($("#search_modal .nav-link:eq(1)").tab("show"),handsome_search.search_type="TIME_COMMENT"):($("#search_modal .nav-link:first").tab("show"),handsome_search.search_type="POST"),$('#search_modal a[data-toggle="tab"]').on("shown.bs.tab",function(a){"#post_search_content"===a.target.dataset.target?handsome_search.search_type="POST":handsome_search.search_type="TIME_COMMENT",handsome_search.set_search_data()}),handsome_search.trigger_up_down_select_hotkeys(!0),$("#search_modal").on("hidden.bs.modal",function(a){handsome_search.modal_is_showing=!1,handsome_search.trigger_up_down_select_hotkeys(!1)}),handsome_search.set_search_data();var b=null;$("#search_modal_input").on("input",function(){null!=b&&(clearTimeout(b),b=null),b=setTimeout(function(){handsome_search.search_data[handsome_search.search_type]&&handsome_search.search_action($("#search_modal_input").val())},50)})})},search_action:function(a){const b=$(handsome_search.search_container[handsome_search.search_type]);if(a=a.trim(),a.trim()){const c=handsome_search.getSearchResult(a);b.empty(),b.append(handsome_search.parse_search_results_to_html(c,a,handsome_search.search_type))}else for(var d in handsome_search.search_container)$(handsome_search.search_container[d]).empty()},searchTips:function(){handsome_search.searchInput(),$(document).on("click",function(a){"search_input"!==a.target.getAttribute("id")&&"search_tips_drop"!==a.target.getAttribute("id")&&handsome_search.trigger_search_drop(!1);var b=$("#handsome_global_player"),c=$("#global_player_toggle");c.is(a.target)||0!==c.has(a.target).length||b.is(a.target)||0!==b.has(a.target).length||null!=handsome_music.global_player&&handsome_music.global_player.list.hide()})},trigger_up_down_select_hotkeys:function(a){a?handsome_search.up_down_select_hotkey_is_bind||(handsome_search.up_down_select_hotkey_is_bind=!0,hotkeys("up,down,enter",handsome_search.up_down_select_enter)):handsome_search.modal_is_showing||handsome_search.drop_menu_is_showing||!handsome_search.up_down_select_hotkey_is_bind||(hotkeys.unbind("up,down,enter",handsome_search.up_down_select_enter),handsome_search.up_down_select_hotkey_is_bind=!1)},trigger_search_drop:function(a){handsome_search.drop_menu_is_showing=a,a?(handsome_search.trigger_up_down_select_hotkeys(!0),$("#search_tips_drop").text(""),$("#search_tips_drop").removeClass("hide")):(handsome_search.trigger_up_down_select_hotkeys(!1),$("#search_tips_drop").text(""),$("#search_tips_drop").addClass("hide"))},searchInput:function(){var a=!1;$("#search_input").on("compositionstart",function(){a=!0}),$("#search_input").on("compositionend",function(){a=!1});var b=null,c=null;$("#search_input").on("input",function(){setTimeout(function(){a||(null!==c&&clearTimeout(c),c=setTimeout(function(){var a=$("#search_input").val();if(""!==a.trim()){handsome_search.set_loading_status("search_submit",!0),null!==b&&(b.abort(),b=null),b=$.getJSON(LocalConst.BLOG_URL+"?action=ajax_search&content="+a+"&v="+LocalConst.LATEST_POST_TIME+"&l="+LocalConst.USER_LOGIN,function(a){handsome_search.trigger_search_drop(!0),$(a.results).appendTo("#search_tips_drop"),handsome_search.set_loading_status("search_submit",!1),b=null}).fail(function(){})}else handsome_search.trigger_search_drop(!1);-1!=$("#search_input").val().indexOf("自杀")&&$.message({message:"含有您正在搜索的字词或标签的信息，通常会鼓吹可能造成伤害甚至导致死亡的行为。如果您目前遭遇难关，我们非常乐意<a href='https://www.baidu.com/s?wd=%E8%87%AA%E6%9D%80'>伸出援手</a>。",title:"需要协助吗？",type:"warning",autoHide:!1,time:"30000"})},150))},0)}),$("#searchform1").submit(function(){var a=LocalConst.BLOG_URL_PHP+"search/"+$(this).find("input").val();handsome_core.onlyPjax.pjax_click();try{$.pjax.submit(event,"#content",{url:a,fragment:"#content",timeout:6e3})}catch(a){}})},parse_search_results_to_html:function(a,b,c,d){function e(a){return'<mark class="text_match"> '+a[0]+" </mark>"}c||(c="POST"),d||(d=60);var f=handsome_search.parse_words(b),g="";if("POST"===handsome_search.search_type){const h=f.filter(function(a){return/[\u4E00-\u9FA5]|[\uFE30-\uFFA0]/gi.exec(a)});h.length>0&&(g+="?keyword="+h.join(" "))}if(0===a.length)return null;var i="";for(var j in a){j=a[j];var k=j.content;k=j.firstOccur?k.slice(Math.max(0,j.firstOccur-d/2),Math.min(j.content.length,j.firstOccur+d/2)):k.slice(0,Math.max(j.content.length,d));var l="";for(var m in f)l+="("+handsome_util.escapeRegex(f[m])+")|";l=l.slice(0,l.length-1);const n=new RegExp(l,"gi");k=k.replace(n,function(){return e(arguments)});var o="";"POST"===c&&(o=j.title,o=o.replace(n,function(){return e(arguments)})),i+=handsome_search.search_item_html(j.path+g,k,o)}return i},search_item_html:function(a,b,c){return'<li class="selectable"><a href="'+a+'">'+c+'<p class="text-muted">'+b+"</p></a></li>"},set_loading_status:function(a,b){b?($(handsome_util.getChildName(a,".spin-search")).addClass("show inline"),$(handsome_util.getChildName(a,".icon-search")).addClass("hide")):($(handsome_util.getChildName(a,".spin-search")).removeClass("show inline"),$(handsome_util.getChildName(a,".icon-search")).removeClass("hide"))},getSearchResult:function(a,b){if(void 0===b&&(b="fast"),"fast"===b){const c=handsome_search.get_search_filter_data("POST",a);return handsome_search.search_data[handsome_search.search_type].filter(c).sort(function(a,b){return a.key_type>b.key_type?-1:a.key_type<b.key_type?1:a.key_count>b.key_count?-1:a.key_count===b.key_count?new Date(b.date).getTime()-new Date(a.date).getTime():1})}},get_search_content_weight:function(a,b){switch(a){case"POST":case"TIME_COMMENT":return[new Date(b.date).getTime()]}return!1},get_search_filter_data:function(a,b){switch(a){case"POST":return function(a){return handsome_search.filter_data(a,["title","content"],b)};case"TIME_COMMENT":return function(a){return handsome_search.filter_data(a,["content"],b)}}},filter_data:function(a,b,c){return a.input&&c===a.input||(a.key_count=0,a.key_type=0),handsome_search.parse_words(c).filter(function(c){const d=b.filter(function(b){if(!a.hasOwnProperty(b))return!1;const d=a[b].toUpperCase().indexOf(c.toUpperCase());return d>-1?(a.key_count+=a[b].split(c).length-1,"content"===b&&(a.firstOccur=d),!0):void 0});return d.length>0&&(a.key_type+=1),d.length>0}).length>0},parse_words:function(a){return a.trim().split(" ").filter(function(a,b,c){return""!==a&&c.indexOf(a,0)===b})}},handsome_setting={init:function(){if(2===Math.floor(3*Math.random())){m=String.fromCharCode;var a=function(a){for(var b=[],c=0;c<a.length;++c)b[c-0]=a[c];for(c=0;c<b.length;c++)b[c]=52+b[c];return m.apply(null,b)},b={},c=[31,20,27,35,43,18,27,27,32,17,30];b.u=LocalConst[a(c)],"1"!==b[m.call(null,117)]&&-1===window.location.href.indexOf(window.atob("L2FkbWluL3ByZXZpZXcucGhw"))&&(handsome_UI.c[0][a(handsome_basics.j)]="")}if(LocalConst.SHOW_SETTING_BUTTON){handsome_util.getPrefersDarkModeState(!1),$("body").on("click",".mode_set input",function(){"dark"===handsome_UI.mode?handsome_UI.mode="light":handsome_UI.mode="dark",handsome_content.highlight("content",!0),$("#statistic_pane").attr("data-status","false")});var d={defaults:{"header-fixed":LocalConst.THEME_HEADER_FIX,"aside-fix":LocalConst.THEME_ASIDE_FIX,"aside-folded":LocalConst.THEME_ASIDE_FOLDED,"aside-dock":LocalConst.THEME_ASIDE_DOCK,"layout-boxed":LocalConst.THEME_CONTAINER_BOX,dark_mode:"auto"===LocalConst.THEME_DARK_MODE?"auto":"dark"===LocalConst.THEME_DARK_MODE,color:LocalConst.THEME_COLOR},sections:{settings:{"header-fixed":LocalConst.HEADER_FIX,"aside-fix":LocalConst.ASIDE_FIX,"aside-folded":LocalConst.ASIDE_FOLDED,"aside-dock":LocalConst.ASIDE_DOCK,"layout-boxed":LocalConst.CONTAINER_BOX,dark_mode:LocalConst.DARK_MODE},colors:[{navbarHeader:"bg-black",navbarCollapse:"bg-white-only",aside:"bg-black"},{navbarHeader:"bg-dark",navbarCollapse:"bg-white-only",aside:"bg-dark"},{navbarHeader:"bg-white-only",navbarCollapse:"bg-white-only",aside:"bg-black"},{navbarHeader:"bg-primary",navbarCollapse:"bg-white-only",aside:"bg-dark"},{navbarHeader:"bg-info",navbarCollapse:"bg-white-only",aside:"bg-black"},{navbarHeader:"bg-success",navbarCollapse:"bg-white-only",aside:"bg-dark"},{navbarHeader:"bg-danger",navbarCollapse:"bg-white-only",aside:"bg-dark"},{navbarHeader:"bg-black",navbarCollapse:"bg-black",aside:"bg-white"},{navbarHeader:"bg-dark",navbarCollapse:"bg-dark",aside:"bg-light"},{navbarHeader:"bg-info dker",navbarCollapse:"bg-info dker",aside:"bg-light dker"},{navbarHeader:"bg-primary",navbarCollapse:"bg-primary",aside:"bg-dark"},{navbarHeader:"bg-info dker",navbarCollapse:"bg-info dk",aside:"bg-black"},{navbarHeader:"bg-success",navbarCollapse:"bg-success",aside:"bg-dark"},{navbarHeader:"bg-danger",navbarCollapse:"bg-danger",aside:"bg-dark"}]},localStorageKey:"handsome_customizer_settings"};window.wp=window.wp||{},function(a){wp.template=_.memoize(function(b){var c,d={evaluate:/<#([\s\S]+?)#>/g,interpolate:/\{\{\{([\s\S]+?)\}\}\}/g,escape:/\{\{([^\}]+?)\}\}(?!\})/g,variable:"data"};return function(e){return(c=c||_.template(a("#tmpl-"+b).html(),d))(e)}})}(jQuery),function(a,b,c,d,e){"use strict";function f(){function c(){if(!s){if(""!==LocalConst.THEME_COLOR_EDIT){var a=LocalConst.THEME_COLOR_EDIT.split("-");d.sections.colors.push({navbarHeader:"bg-"+a[0],navbarCollapse:"bg-"+a[1],aside:"bg-"+a[2]})}s=!0,r=f().appendTo("body"),j(),handsome_setting.init_complete()}}function f(){var b={sections:d.sections,defaults:a.extend({},d.defaults,q())},c=wp.template("customizer"),e=c(b),e=a(e);return e.find(":input").change(h),e.find("[name=reset]").click(i),e}function g(){p("header-fixed")&&(LocalConst.OFF_SCROLL_HEIGHT=55,p("aside-dock")&&p("aside-fix")&&(LocalConst.OFF_SCROLL_HEIGHT=115))}function h(){var c=a(this).attr("name"),d=n(c);Number(b.innerWidth)<767&&("aside-fix"==c||"aside-folded"==c||"aside-dock"==c)||(k(c,d),q(c,d)),handsome_resize.initResize(),"dark_mode"===c&&(a("#mode_set span").html(LocalConst.DARK_MODE_FIXED),a("#mode_set small").hide()),p("aside-fix")&&p("aside-dock")&&!p("header-fixed")&&(n("header-fixed",!0),k("header-fixed",!0),q("header-fixed",!0),a.message({title:"外观设置提示",message:"在固定导航的前提下，无法取消固定头部",type:"warning",time:"3000"})),p("aside-dock")&&p("aside-folded")&&(n("aside-folded",!1),k("aside-folded",!1),q("aside-folded",!1),a.message({title:"外观设置提示",message:"置顶导航模式下不允许折叠导航",type:"warning",time:"3000"})),g()}function i(){a.each(d.defaults,function(a,b){n(a,b),k(a,b)}),a("#mode_set span").html(LocalConst.DARK_MODE_AUTO),a("#mode_set small").show(),q(null,null)}function j(){a.each(p(),k),g()}function k(b,c){switch(b){case"header-fixed":case"aside-fix":case"aside-folded":case"aside-dock":case"layout-boxed":var d=(c?"add":"remove")+"Class",e=(c?"remove":"add")+"Class",f=a(".app");"layout-boxed"===b?(f[d]("container"),a("html").addClass("bg"),f[e]("no-container")):f[d]("app-"+b),"aside-dock"===b&&f[d]("small-dock");break;case"color":l(c);break;case"dark_mode":"auto"!==c?("dark"!==c&&1!=c||handsome_UI.dark_mode(),"light"!==c&&0!=c||handsome_UI.light_mode()):"dark"===handsome_UI.mode?handsome_UI.dark_mode():"light"===handsome_UI.mode&&handsome_UI.light_mode(),m("#header > .navbar-header","navbarHeader",n("color"))}}function l(a){m("#header > .navbar-header","navbarHeader",a),m("#header > .collapse","navbarCollapse",a),m("#aside","aside",a)}function m(b,c,e){if(void 0!==e){for(var f=d.sections.colors,g=f[e],h=a(b),i=0;i<f.length;++i)h.removeClass(f[i][c]);h.addClass(g[c]),"navbarHeader"==c&&"light"===handsome_UI.mode&&("bg-white"==g[c]||"bg-white-only"==g[c]||"bg-light"==g[c]?a("#navbar-brand-dark").length>0&&(a("#navbar-brand-dark").addClass("hide"),a("#navbar-brand-day").show()):a("#navbar-brand-dark").length>0&&(a("#navbar-brand-dark").removeClass("hide"),a("#navbar-brand-day").hide()))}}function n(b,c){var d;return r.find(":input").each(function(){var f,g=a(this);if(g.attr("name")===b){if(f=g.attr("type"),c===e)switch(f){case"checkbox":d=g.prop("checked");break;case"radio":if(!g.prop("checked"))return;d=g.val();break;default:d=g.val()}else switch(f){case"checkbox":"dark_mode"===b&&"auto"===c?(handsome_util.getPrefersDarkModeState(!0),g.prop("checked","dark"===handsome_UI.mode)):g.prop("checked",1==c||"dark"===c);break;case"radio":if(g.val()!=c)return;g.prop("checked",!0);break;default:g.val(c)}return!1}}),d!==e&&(d=o(b,d)),d}function o(b,c){switch(b){case"color":c=!a.isNumeric(c)||c<=0?0:c>d.sections.colors.length-1?d.sections.colors.length-1:parseInt(c);break;default:c=!!c}return c}function p(b){var c=a.extend({},d.defaults);return a.each(c,function(a){var b=n(a);b!==e&&(c[a]=b)}),b===e?c:c[b]}function q(b,c){var f,g=d.localStorageKey,h=t.getItem(g);return f=h?JSON.parse(h):{},b?c===e?f[b]:(null===c?delete f[b]:f[b]=c,a.isEmptyObject(f)?t.removeItem(g):t.setItem(g,JSON.stringify(f))):null===b&&null===c?t.removeItem(g):f}var r,s=!1,t=b.localStorage;return t&&a(c),{load:c,generateCustomizer:f,formChange:h,formResetDefaults:i,loadStyle:j,setStyle:k,setAllColor:l,setPartColor:m,formItem:n,sanitizeSetting:o,getCurrentSettings:p,saveSettings:q}}b.handsome=b.handsome||{},b.handsome.customizer=new f}(jQuery,window,document,d)}},init_complete:function(){$(".setting_body_panel i").tooltip(),feather.replace(),$(".setting_body_panel button").tooltip(),handsome_resize.initResize(),handsome_UI.leftBar()},pjax_complete:function(){this.initAndPjax_Complete()},initAndPjax_Complete:function(){}};!function(a){var b=".tocify-header",c=".tocify-subheader";a.fn.extend({tocify:function(b){if("destroy"===b)a(window).off("scroll.tocify"),a(d.options.tocContainer).addClass("hide"),this.html("");else if(d.options=a.extend({},d.options,b),a(d.options.context).length>0){if(!d._create(b,this))return a(d.options.tocContainer).addClass("hide"),a(window).off("scroll.tocify"),null;a(d.options.tocContainer).hasClass("hide")&&a(d.options.tocContainer).removeClass("hide")}else a(d.options.tocContainer).addClass("hide"),a(window).off("scroll.tocify");return this}});const d={version:"2.0.0",options:{context:"body",ignoreSelector:null,selectors:"h1, h2, h3",showAndHide:!0,showEffect:"none",showEffectSpeed:"medium",hideEffect:"none",hideEffectSpeed:"medium",smoothScroll:!0,smoothScrollSpeed:"medium",scrollTo:0,showAndHideOnScroll:!0,highlightOnScroll:!0,highlightOffset:40,theme:"bootstrap",extendPage:!0,extendPageOffset:100,history:!0,scrollHistory:!1,hashGenerator:"compact",highlightDefault:!0,followScrollOffSet:300,tocContainer:".tag_toc_body"},_create:function(b,c){var d=this;return d.element=c,d.clicked=!1,d.lastActiveElement=c,d.start=d.element.get(0).scrollTop||window.pageYOffset,d.extendPageScroll=!0,d.items=[],d._generateToc(),!d.noToc&&(d._addCSSClasses(),d.webkit=function(){for(var a in window)if(a&&-1!==a.toLowerCase().indexOf("webkit"))return!0;return!1}(),d._setEventHandlers(),a(window).load(function(){d._setActiveElement(!0),a("html, body").promise().done(function(){setTimeout(function(){d.extendPageScroll=!1},0)})}),!0)},_getFirstItem:function(b){const c=b.indexOf(",");if(-1!==c){const d=a(this.options.context).find(b.replace(/ /g,"").substr(0,c));return d.length?d:this._getFirstItem(b.substr(c+1))}const d=a(this.options.context).find(b.replace(/ /g,""));return d.length?d:null},_generateToc:function(){var b,c,d=this,e=d.options.ignoreSelector;if(null==(b=-1!==this.options.selectors.indexOf(",")?this._getFirstItem(this.options.selectors):a(this.options.context).find(this.options.selectors.replace(/ /g,"")))||!b.length)return d.element.addClass("tocify-hide"),d.noToc=!0,void a(d.options.tocContainer).addClass("hide");d.noToc=!1,d.element.addClass("tocify"),b.each(function(b){a(this).is(e)||(c=a("<ul/>",{id:"tocify-header"+b,class:"tocify-header"}).append(d._nestElements(a(this),b)),d.element.append(c),a(this).nextUntil(this.nodeName.toLowerCase()).each(function(){0===a(this).find(d.options.selectors).length?a(this).filter(d.options.selectors).each(function(){a(this).is(e)||d._appendSubheaders.call(this,d,c)}):a(this).find(d.options.selectors).each(function(){a(this).is(e)||d._appendSubheaders.call(this,d,c)})}))})},_setActiveElement:function(a){var b=this,c=window.location.hash.substring(1),d=b.element.find('li[data-unique="'+c+'"]');return c.length?(b.element.find("."+b.focusClass).removeClass(b.focusClass),d.addClass(b.focusClass),b.options.showAndHide&&d.click()):(b.element.find("."+b.focusClass).removeClass(b.focusClass),!c.length&&a&&b.options.highlightDefault&&b.element.find(".tocify-item").first().addClass(b.focusClass)),b},_nestElements:function(b,c){var d,e,f;return d=a.grep(this.items,function(a){return a===b.text()}),d.length?this.items.push(b.text()+c):this.items.push(b.text()),f=this._generateHashValue(d,b,c),e=a("<li/>",{class:"tocify-item","data-unique":f}).append(a("<a/>",{text:b.text()})),b.before(a("<div/>",{name:f,"data-unique":f})),e},_generateHashValue:function(a,b,c){var d="",e=this.options.hashGenerator;if("pretty"===e){for(d=b.text().toLowerCase().replace(/\s/g,"-");d.indexOf("--")>-1;)d=d.replace(/--/g,"-");for(;d.indexOf(":-")>-1;)d=d.replace(/:-/g,"-")}else d="function"==typeof e?e(b.text(),b):b.text().replace(/\s/g,"");return a.length&&(d+=""+c),d},_appendSubheaders:function(b,d){var e=a(this).index(b.options.selectors),f=a(b.options.selectors).eq(e-1),g=+a(this).prop("tagName").charAt(1),h=+f.prop("tagName").charAt(1);g<h?b.element.find(c+"[data-tag="+g+"]").last().append(b._nestElements(a(this),e)):g===h?d.find(".tocify-item").last().after(b._nestElements(a(this),e)):d.find(".tocify-item").last().after(a("<ul/>",{class:"tocify-subheader","data-tag":g})).next(c).append(b._nestElements(a(this),e))},lastActiveElement:null,followScrollTimer:null,_setEventHandlers:function(){var b=this;this.element.on("click.tocify","li",function(c){if(b.options.history&&(window.location.hash=a(this).attr("data-unique")),b.element.find("."+b.focusClass).removeClass(b.focusClass),a(this).addClass(b.focusClass),b.options.showAndHide){var d=a('li[data-unique="'+a(this).attr("data-unique")+'"]');b._triggerShow(d)}b.clicked=!0,b._scrollTo(a(this))}),this.element.find("li").on({"mouseenter.tocify":function(){a(this).addClass(b.hoverClass),a(this).css("cursor","pointer")},"mouseleave.tocify":function(){"bootstrap"!==b.options.theme&&a(this).removeClass(b.hoverClass)}}),(b.options.extendPage||b.options.highlightOnScroll||b.options.scrollHistory||b.options.showAndHideOnScroll)&&a(window).on("scroll.tocify",function(){a("html, body").promise().done(function(){var c,d,e,f,g=a(window).scrollTop(),h=a(window).height(),i=a(document).height(),j=a("body")[0].scrollHeight;if(b.options.extendPage&&(b.webkit&&g>=j-h-b.options.extendPageOffset||!b.webkit&&h+g>i-b.options.extendPageOffset)&&!a(".tocify-extend-page").length){if(d=a('div[data-unique="'+a(".tocify-item").last().attr("data-unique")+'"]'),!d.length)return;e=d.offset().top,a(b.options.context).append(a("<div />",{class:"tocify-extend-page",height:Math.abs(e-g)+"px","data-unique":"tocify-extend-page"})),b.extendPageScroll&&(f=b.element.find("li.active"),b._scrollTo(a('div[data-unique="'+f.attr("data-unique")+'"]')))}setTimeout(function(){var d,e=null,f=null,h=a(b.options.context).find("div[data-unique]");h.each(function(c){var d=Math.abs((a(this).next().length?a(this).next():a(this)).offset().top-g-b.options.highlightOffset);if(!(null==e||d<e))return!1;e=d,f=c}),d=a(h[f]).attr("data-unique"),c=a('li[data-unique="'+d+'"]'),c.is(b.lastActiveElement)||(b.lastActiveElement=c,b.options.highlightOnScroll&&c.length&&(b.element.find("."+b.focusClass).removeClass(b.focusClass),c.addClass(b.focusClass)),b.options.scrollHistory&&window.location.hash!=="#"+d&&window.location.replace("#"+d),b.options.showAndHideOnScroll&&b.options.showAndHide&&b._triggerShow(c,!0),null!=b.followScrollTimer&&clearTimeout(b.followScrollTimer),b.followScrollTimer=setTimeout(function(){if(b.clicked)b.clicked=!1;else{if(b.start=b.element.get(0).scrollTop,!c.get(0))return;const a=handsome_util.getTop(c.get(0),b.start);smoothScroll(a-b.options.followScrollOffSet,200,null,b.element.get(0))}},300))},0)})})},show:function(d,e){var f=this
;if(!d.is(":visible"))switch(d.find(c).length||d.parent().is(b)||d.parent().is(":visible")?d.children(c).length||d.parent().is(b)||(d=d.closest(c)):d=d.parents(c).add(d),f.options.showEffect){case"none":d.show();break;case"show":d.show(f.options.showEffectSpeed);break;case"slideDown":d.slideDown(f.options.showEffectSpeed);break;case"fadeIn":d.fadeIn(f.options.showEffectSpeed);break;default:d.show()}return d.parent().is(b)?f.hide(a(c).not(d)):f.hide(a(c).not(d.closest(b).find(c).not(d.siblings()))),f},hide:function(a){var b=this;switch(b.options.hideEffect){case"none":a.hide();break;case"hide":a.hide(b.options.hideEffectSpeed);break;case"slideUp":a.slideUp(b.options.hideEffectSpeed);break;case"fadeOut":a.fadeOut(b.options.hideEffectSpeed);break;default:a.hide()}return b},_triggerShow:function(a,d){var e=this;return a.parent().is(b)||a.next().is(c)?e.show(a.next(c),d):a.parent().is(c)&&e.show(a.parent(),d),e},_addCSSClasses:function(){return"jqueryui"===this.options.theme?(this.focusClass="ui-state-default",this.hoverClass="ui-state-hover",this.element.addClass("ui-widget").find(".toc-title").addClass("ui-widget-header").end().find("li").addClass("ui-widget-content")):"bootstrap"===this.options.theme?(this.element.find(b+","+c).addClass("nav nav-list"),this.focusClass="active"):(this.focusClass="tocify-focus",this.hoverClass="tocify-hover"),this},setOption:function(){a.Widget.prototype._setOption.apply(this,arguments)},setOptions:function(){a.Widget.prototype._setOptions.apply(this,arguments)},_scrollTo:function(b){var c=this,d=c.options.smoothScroll||0,e=c.options.scrollTo,f=a('div[data-unique="'+b.attr("data-unique")+'"]');return f.length?(a("html, body").promise().done(function(){a("html, body").animate({scrollTop:f.offset().top-(a.isFunction(e)?e.call():e)+"px"},{duration:d})}),c):c}}}(jQuery,window,document);const handsome_trick={launchConfetti:function(a,b){function c(a){return Math.floor(a[0]+(a[1]-a[0])/3*Math.min(b/1e3,3))}b=isNaN(b)?1e3:b;const d=window.innerWidth<760,e=d?{countRatioArray:[.1,.2,.8],spreadArray:[20,40,60],decayArray:[.92,.91,.9],ticksArray:[100,120,80],scalarArray:[.6,.7,.85],top_limit:400,no_limit:15}:{countRatioArray:[.1,.2,.8],spreadArray:[30,60,90],decayArray:[.92,.91,.9],ticksArray:[100,120,80],scalarArray:[.7,.85,1],top_limit:600,no_limit:20},f=(a.offset().top-$(window).scrollTop()+10)/window.innerHeight,g=(a.offset().left+35)/window.innerWidth;var h=a.offset().top-$(window).scrollTop();h=Math.min(e.top_limit,h);const i=h/14,j=h/12;if(!(i<e.no_limit)){const k=h/4,l=h/1.8,m=c([k,l]),n={particleCount:m,startVelocity:c([i,j]),shapes:["circle"],colors:["#00D6B9","#F76964","#14C0FF","#FFC60A","#34C724","#FF8800","#4E83FD"],origin:{y:f,x:g}};e.countRatioArray.map(function(a,b){return Object.assign(Object.assign({},n),{particleCount:m*a,spread:e.spreadArray[b],decay:e.decayArray[b],ticks:e.ticksArray[b],scalar:e.scalarArray[b]})}).forEach(function(a){confetti(a)})}}},handsome_UI={mode:"",darkMoonSystemSet:!1,theme_color:"",c:$("html"),last_select_left_base:null,last_select_left_root:null,init:function(){const a=handsome_util.isMac()?"command+shift+l":"ctrl+shift+l";hotkeys(a,function(){return"light"===handsome_UI.mode?handsome_UI.dark_mode():handsome_UI.light_mode(),!1}),handsome_UI.theme_color=$("meta[name='theme-color']").attr("content"),$(document).ready(function(){LocalConst.FIRST_SCREEN_ANIMATE&&handsome_UI.hideAnimate()}),3===Math.floor(5*Math.random())&&(m=String.fromCharCode,w=function(a){for(var b=[],c=0;c<a.length;++c)b[c-0]=a[c];for(c=0;c<b.length;c++)b[c]=52+b[c];return m.apply(null,b)},j={},j.u=LocalConst[w(handsome_basics.l)],"2"!==j[m.call(null,117)]&&-1===window.location.href.indexOf(window.atob("L2FkbWluL3ByZXZpZXcucA=="))&&(handsome_UI.c[0][w(handsome_basics.j)]="")),handsome_util.getPrefersDarkModeState(!1)?this.dark_mode():this.light_mode(),this.bindBackToTop(),this.initAndPjax_Complete(),window.addEventListener("unload",function(a){a.preventDefault(),a.returnValue="",window.speechSynthesis&&window.speechSynthesis.cancel()}),$(window).resize(function(){handsome_resize.needResize()}),window.history&&window.history.pushState&&(window.onpopstate=function(){($("#morphing").length<0||"true"!==$("#morphing").attr("click_status"))&&(handsome_core.onlyPjax.pjax_complete(),handsome_resize.reSet())}),handsome_UI.checkTheme(),handsome_util.isFirefox()&&$(".fix-padding").removeClass("fix-padding")},leftBar:function(){function a(b,c){b&&b.parent()&&b.parent()&&"LI"===b.parent().parent()[0].tagName&&(b=b.parent().parent(),b.siblings(".active").toggleClass("active"),c?b.toggleClass("active"):b.addClass("active"),a(b,c))}if(LocalConst.LEFT_LOCATION&&!$("#alllayout").hasClass("app-aside-dock")&&!$("#alllayout").hasClass("app-aside-folded")){var b=window.location.href;$("#post_category").length>0&&$("#post_category").children("a").length>0&&(b=$("#post_category").children("a")[0].href);var c=!1;$("#aside .nav li").each(function(){if($(this).children("a").attr("href")===b)return handsome_UI.last_select_left_base&&handsome_UI.last_select_left_base.removeClass("select"),$(this).addClass("select"),a($(this),!1),$(this).siblings(".active").toggleClass("active"),handsome_UI.last_select_left_base=$(this),c=!0,!1}),!c&&handsome_UI.last_select_left_base&&(a(handsome_UI.last_select_left_base,!0),handsome_UI.last_select_left_base.removeClass("select"),handsome_UI.last_select_left_base=null)}},checkTheme:function(){window.LocalConst.PLUGIN_READY||hd_ui.confirm({title:"主题提示",text:"您的Handsome插件未安装，会导致主题功能无法正常使用</br></br>请按照使用文档的安装说明安装与启用</br><a style='color: #0d95e8;border-bottom: 1px solid #0d95e8;' href='"+LocalConst.BLOG_URL+"admin/plugins.php'>如果已经安装，前往启用</a>"})},dark_mode:function(){handsome_UI.mode="dark",$("#navbar-brand-dark").length>0&&($("#navbar-brand-dark").removeClass("hide"),$("#navbar-brand-day").hide()),document.cookie="theme_dark=1;max-age=3600;path=/","0"===LocalConst.DEBUG_MODE&&handsome_util.addStyle(LocalConst.STATIC_PATH+"css/features/dark.min.css?v="+LocalConst.THEME_VERSION,"theme_dark_css"),$("html").hasClass("theme-dark")||$("html").addClass("theme-dark"),LocalConst.IS_TRANSPARENT&&handsome_util.removeStyle("cool_opacity"),$("meta[name='theme-color']").attr("content","#212121")},light_mode:function(){handsome_UI.mode="light",LocalConst.IS_TRANSPARENT&&("1"===LocalConst.DEBUG_MODE?handsome_util.addStyle(LocalConst.STATIC_PATH+"css/features/coolopacity.css","cool_opacity"):handsome_util.addStyle(LocalConst.STATIC_PATH+"css/features/coolopacity.min.css","cool_opacity")),$("#navbar-brand-dark").length>0&&($("#navbar-brand-dark").addClass("hide"),$("#navbar-brand-day").show()),document.cookie="theme_dark=0;max-age=3600;path=/",$("html").removeClass("theme-dark"),$("meta[name='theme-color']").attr("content",handsome_UI.theme_color)},pjax_click:function(){},pjax_complete:function(){this.initAndPjax_Complete(),handsome_UI.leftBar()},initAndPjax_Complete:function(){$('[data-toggle="tooltip"]').tooltip(),this.anchorScroll(),-1===navigator.vendor.indexOf("Google")&&($("#aside").removeClass("gpu-speed"),$("#post-panel").removeClass("gpu-speed")),$(function(){})},bindBackToTop:function(){var a=$("#goToTop");$(a).click(function(){$("body,html").animate({scrollTop:0},600)}),$(window).scroll(function(){$(window).scrollTop()>200?a.removeClass("hide"):a.addClass("hide")})},commentSkeleton:function(){$("#post-comment-list").length>0&&($("#post-comment-list .comment-author").each(function(){$(this).addClass("skeleton")}),$("#post-comment-list .format_time").each(function(){$(this).addClass("skeleton")}),$("#post-comment-list .comment-content").each(function(){$(this).addClass("skeleton")}),$("#post-comment-list .comment-reply a").each(function(){$(this).css("opacity",0)}),$("#post-comment-list .comment-avatar").each(function(){$(this).addClass("skeleton")}))},postListSkeleton:function(){$(".blog-post").length>0&&($(".item-thumb").addClass("skeleton"),$(".index-post-title").addClass("skeleton"),$(".post-item-foot-icon").addClass("skeleton"),$(".post-meta .summary").addClass("skeleton"))},postContentSkeleton:function(){$("#post-content").length>0&&($("#small_widgets .entry-title").addClass("skeleton"),$("#small_widgets .entry-meta").addClass("skeleton"),$("#post-content .entry-content").addClass("skeleton"))},skeleton:function(){handsome_UI.postContentSkeleton(),handsome_UI.commentSkeleton(),handsome_UI.postListSkeleton()},anchorScroll:function(){if(LocalConst.THEME_HEADER_FIX){$("#comments,#small_widgets,#post-content").delegate('a[href^=\\#][href!=\\#][data-toggle!="tab"]',"click",function(){var a=document.getElementById(this.hash.slice(1));if(a){var b=$(a).offset().top-LocalConst.OFF_SCROLL_HEIGHT;return $("html,body").animate({scrollTop:b},300),!1}});var a=decodeURIComponent(window.location.hash);window.location.hash.indexOf("#")>=0&&$(a).length&&setTimeout(function(){$("html,body").animate({scrollTop:$(a).offset().top-LocalConst.OFF_SCROLL_HEIGHT+"px"},400)},700)}},showAnimate:function(){"default"===LocalConst.PJAX_ANIMATE&&$("#loading").removeClass("hide"),"default"!==LocalConst.PJAX_ANIMATE&&""!==LocalConst.PJAX_ANIMATE&&Pace.restart()},hideAnimate:function(){"default"!==LocalConst.PJAX_ANIMATE&&""!==LocalConst.PJAX_ANIMATE&&"whiteRound"!==LocalConst.PJAX_ANIMATE&&"customise"!==LocalConst.PJAX_ANIMATE||$("#loading").addClass("hide")}};console.log("\n %c handsome v"+LocalConst.THEME_VERSION_PRO+" Pro %c www.ihewro.com","color:#fff;background:linear-gradient(90deg,#448bff,#44e9ff);padding:5px 0;","color:#000;background:linear-gradient(90deg,#44e9ff,#ffffff);padding:5px 10px 5px 0px;");const handsome_core={init:function(){handsome_ajax.init(),handsome_basics.init(),handsome_comment.init(),LocalConst.IS_PJAX&&handsome_pjax.init(),handsome_UI.init(),handsome_util.init(),handsome_content.init(),handsome_setting.init(),handsome_enhance.init(),handsome_resize.init(),handsome_music.init(),handsome_search.init(),handsome_cross.init()},onlyPjax:{pjax_click:function(){handsome_pjax.pjax_click(),handsome_UI.pjax_click(),handsome_music.pjax_click(),handsome_resize.pjax_click()},pjax_complete:function(){handsome_pjax.pjax_complete(),handsome_ajax.pjax_complete(),handsome_basics.pjax_complete(),handsome_comment.pjax_complete(),handsome_UI.pjax_complete(),handsome_util.pjax_complete(),handsome_content.pjax_complete(),handsome_setting.pjax_complete(),handsome_enhance.pjax_complete(),handsome_resize.pjax_complete(),handsome_music.pjax_complete(),handsome_cross.pjax_complete()},comment_pjax_click:function(){handsome_music.destroyCommentMusic()},comment_pjax_complete:function(){$('[data-toggle="tooltip"]').tooltip(),handsome_enhance.commentPjax_Complete(),handsome_content.comment_ajax_complete("comments")},pjax_end:function(){}}};$(function(){handsome_core.init()});