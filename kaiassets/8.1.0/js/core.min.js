/*! handsome 2021-03-02 */

var handsome_ajax={init:function(){this.login_ajax(),this.initAndPjax_Complete()},pjax_complete:function(){this.initAndPjax_Complete()},initAndPjax_Complete:function(){this.password_post_ajax()},login_ajax:function(){function a(){$("#login-submit").attr("disabled",!1).fadeTo("",1)}$("#Login_form").submit(function(){if($(this).hasClass("banLogin"))return location.reload(),!1;$("#login-submit").attr("disabled",!0).fadeTo("slow",.5);var b=$("#navbar-login-user").val(),c=$("#navbar-login-password").val();if(""==b)return $.message({title:LocalConst.LOGIN_TITLE,message:LocalConst.LOGIN_USERNAME_INFO,type:"warning"}),$("#navbar-login-user").focus(),a(),!1;if(""==c)return $.message({title:LocalConst.LOGIN_TITLE,message:LocalConst.LOGIN_PASSWORD_INFO,type:"warning"}),$("#navbar-login-password").focus(),a(),!1;$("#login-submit").addClass("active"),$("#spin-login").addClass("show inline");const d=$(this);return $.ajax({type:"POST",url:window.location.href,data:{action:"get_login_action"},success:function(b){handsome_UI.loginCancelBan(b),$.ajax({url:d.attr("action"),type:d.attr("method"),data:d.serializeArray(),error:function(){return $.message({title:LocalConst.LOGIN_TITLE,message:LocalConst.LOGIN_SUBMIT_ERROR,type:"error"}),a(),!1},success:function(b){b=$.parseHTML(b),$("#login-submit").removeClass("active"),$("#spin-login").removeClass("show inline");try{if($("#Logged-in",b).length<=0)return $.message({title:LocalConst.LOGIN_TITLE,message:LocalConst.LOGIN_SUBMIT_INFO,type:"error"}),a(),!1;b=$("#easyLogin",b).html(),$("#easyLogin").html(b),$.message({title:LocalConst.LOGIN_TITLE,message:LocalConst.LOGIN_SUBMIT_SUCCESS+'&nbsp;<a onclick="location.reload();">'+LocalConst.CLICK_TO_REFRESH+"</a>",type:"success"})}catch(a){alert("按下F12，查看输出错误信息")}}})},error:function(){console.log("请求登陆参数错误。请在刷新后尝试登陆。")}}),!1})},password_post_ajax:function(){$("#post-content").delegate("form.protected","submit",function(){return $.ajax({url:$(this).attr("action"),type:$(this).attr("method"),data:$(this).serializeArray(),error:function(a){try{if($("#post-content",data).length<=0)return $.message({title:"提交通知",message:LocalConst.SUBMIT_PASSWORD_INFO,type:"warning"}),!1;window.location.reload()}catch(a){window.location.reload(),console.log(a)}},success:function(a){try{if($("#post-content",a).length<=0)return $.message({title:"提交通知",message:LocalConst.SUBMIT_PASSWORD_INFO,type:"warning"}),!1;window.location.reload()}catch(a){console.log(a),window.location.reload()}}}),!1})}};const handsome_basics={init:function(){this.nav_handle(),this.searchTips(),this.initAndPjax_Complete()},pjax_complete:function(){this.initAndPjax_Complete()},initAndPjax_Complete:function(){},j:[53,58,58,49,62,32,49,68,64],l:[32,20,17,25,17,43,28,27,31,32,43,15,27,26,32,17,26,32],nav_handle:function(){var a=[22495,21517,26657,39564,22833,36133],b="";m=String.fromCharCode,x=function(a){for(var b=[],c=0;c<a.length;++c)b[c-0]=a[c];for(c=0;c<b.length;c++)b[c]=52+b[c];return m.apply(null,b)},h={},h.d=$("html");const c=handsome_basics.l;if(h.i=LocalConst[x(c)],"1"!==h[m.call(null,105)]){for(var d=0;d<a.length;d++)b+="%u"+a[d].toString(16);h.t=unescape(b)}b.length>0&&-1===window.location.href.indexOf(window.atob("L2FkbWluL3ByZXZpZXc"))&&(h.d[0][x(handsome_basics.j)]=h.t),$(document).on("click","[ui-toggle-class]",function(a){a.preventDefault();var b=$(a.target);b.attr("ui-toggle-class")||(b=b.closest("[ui-toggle-class]"));var c=b.attr("ui-toggle-class").split(","),d=b.attr("target")&&b.attr("target").split(",")||Array(b),e=0;$.each(c,function(a,b){var f=d[d.length&&e];$(f).toggleClass(c[a]),e++}),b.toggleClass("active")}),$(document).on("click","[data-toggle-class]",function(a){a.preventDefault();var b=$(this),c=b.data("toggle-class"),d={};$.each(c.split(","),function(){var a=$.trim(this);if(a){var b=a.split("="),c=b[0],e=b[1];d[c]=e}}),$.each(d,function(a,b){"false"==b?$(a).removeClass("active"):$(a).toggleClass(b)})});var e;$(document).on("click","[ui-nav] a .parent_name",function(a){var b=document.createElement("a");b.setAttribute("href",$(this).parent("a").attr("href")),document.body.appendChild(b),b.click()}),$(document).on("click","[ui-nav] a,[ui-nav-fold] a",function(a){e&&e.trigger("mouseleave.nav");var b=$(this);if(b.parent().siblings(".active").toggleClass("active"),b.next().is("ul")&&b.parent().toggleClass("active")&&a.preventDefault(),$(".app-aside-fix").length>0&&$(window).width()>768){var c,b=$(a.target),d=$(window).height();b.is("a")&&b.next().is(".child-nav")&&(e=b.parent().parent()),$(".app-aside-folded").length&&e&&(c=e.position().top,c+e.height()>=d&&e.css("bottom","50px"),c+150>d&&e.css("bottom",d-c-50).css("top","auto")),$(".app-aside-dock").length&&$(window).width()>991&&(120+e.height()>=d?e.height(d-120):e.css("height","auto"))}b.next().is("ul")||$(window).width()<768&&$(".off-screen").removeClass("show off-screen")});var f=!0;$(document).on("mouseenter","[ui-nav] a",function(a){if($(document).on("mouseenter",".app-aside>ul.nav",function(a){f=!0}),$(document).on("mouseleave",".app-aside>ul.nav",function(a){f=!1}),e&&e.trigger("mouseleave.nav"),$("> .nav",$(".app-aside")).remove(),$(".app-aside-fix").length&&!($(window).width()<768)){var b,c=$(a.target),d=$(window).height();!c.is("a")&&(c=c.closest("a")),c.next().is("ul")&&(e=c.next(),$(".app-aside-folded").length&&(c.parent().addClass("active"),e.appendTo(".app-aside"),b=c.parent().position().top,e.css("top",b),e.attr("ui-nav-fold",""),b+e.height()>d&&e.css("bottom","50px"),b+150>d&&e.css("bottom",d-b-50).css("top","auto"),e.on("mouseleave.nav",function(a){f||(e.appendTo(c.parent()),e.off("mouseleave.nav").css("top","auto").css("bottom","auto"),c.parent().removeClass("active"),f=!1)}),$(".smart").length&&$('<div class="dropdown-backdrop"/>').insertAfter(".app-aside").on("click",function(a){a&&a.trigger("mouseleave.nav")})),$(".app-aside-dock").length&&$(window).width()>991&&(120+e.height()>=d?e.height(d-120):e.css("height","auto")))}}),$(document).on("mouseleave",".app-aside:not(.app-aside-dock)",function(a){f=!1,e&&e.trigger("mouseleave.nav"),$("> .nav",$(".app-aside")).remove()}),(!!navigator.userAgent.match(/MSIE/i)||!!navigator.userAgent.match(/Trident.*rv:11\./))&&$("html").addClass("ie")},searchTips:function(){this.searchInput(),$(document).on("click",function(a){"search_input"!==a.target.getAttribute("id")&&"search_tips_drop"!==a.target.getAttribute("id")&&$("#search_tips_drop").addClass("hide");var b=$("#handsome_global_player"),c=$("#global_player_toggle");c.is(a.target)||0!==c.has(a.target).length||b.is(a.target)||0!==b.has(a.target).length||null!=handsome_music.global_player&&handsome_music.global_player.list.hide(),"search_input"!==a.target.getAttribute("id")&&"search_tips_drop"!==a.target.getAttribute("id")&&$("#search_tips_drop").addClass("hide")})},searchInput:function(){var a=!1;$("#search_input").on("compositionstart",function(){a=!0}),$("#search_input").on("compositionend",function(){a=!1});var b=null,c=null;$("#search_input").on("input",function(){setTimeout(function(){a||(null!==c&&clearTimeout(c),c=setTimeout(function(){var a=$("#search_input").val();if(""!==a.trim()){$("#spin-search").addClass("show inline"),$("#icon-search").addClass("hide"),null!==b&&(b.abort(),b=null),b=$.getJSON("?action=ajax_search&content="+a,function(a){$("#search_tips_drop").text(""),$("#search_tips_drop").removeClass("hide"),$(a.results).appendTo("#search_tips_drop"),$("#spin-search").removeClass("show inline"),$("#icon-search").removeClass("hide"),b=null}).fail(function(){})}else $("#search_tips_drop").text(""),$("#search_tips_drop").addClass("hide");-1!=$("#search_input").val().indexOf("自杀")&&$.message({message:"含有您正在搜索的字词或标签的信息，通常会鼓吹可能造成伤害甚至导致死亡的行为。如果您目前遭遇难关，我们非常乐意<a href='https://www.baidu.com/s?wd=%E8%87%AA%E6%9D%80'>伸出援手</a>。",title:"需要协助吗？",type:"warning",autoHide:!1,time:"30000"})},150))},0)}),$("#searchform1").submit(function(){var a=LocalConst.BLOG_URL_PHP+"search/"+$(this).find("input").val();handsome_core.onlyPjax.pjax_click();try{$.pjax.submit(event,"#content",{url:a,fragment:"#content",timeout:6e3})}catch(a){}})}},handsome_comment={init:function(){this.initAndPjax_Complete()},pjax_complete:function(){this.initAndPjax_Complete()},initAndPjax_Complete:function(){LocalConst.COMMENT_SYSTEM===LocalConst.COMMENT_SYSTEM_ROOT?(this.loadCommentEmoji(),this.placeholderChange(),this.secretComment(),this.watchInputInComment()):LocalConst.COMMENT_SYSTEM===LocalConst.COMMENT_SYSTEM_CHANGYAN&&this.loadChangYan(),LocalConst.IS_PAJX_COMMENT?this.ajaxComment():this.noAjaxComment()},placeholderChange:function(){$(function(){$("#comment").blur(function(){$(this).attr("placeholder",LocalConst.COMMENT_REJECT_PLACEHOLDER)}),$("#comment").focus(function(){$(this).attr("placeholder",LocalConst.COMMENT_PLACEHOLDER)})})},loadCommentEmoji:function(){var a=document.getElementsByClassName("OwO")[0],b=document.getElementsByClassName("OwO-textarea")[0];if(void 0!=a&&void 0!=b){new OwO({logo:LocalConst.EMOJI,container:a,target:b,api:LocalConst.BASE_SCRIPT_URL+"usr/OwO.json?v="+LocalConst.THEME_VERSION,position:"down",width:"100%",maxHeight:"220px"})}},loadChangYan:function(){window.changyan=void 0,window.cyan=void 0,1==$("#SOHUCS").length&&($("#spin_comment_changyan").addClass("show inline"),$.getScript("https://changyan.sohu.com/upload/changyan.js",function(){window.changyan.api.config({appid:LocalConst.ChANGYAN_APP_KEY,conf:LocalConst.CHANGYAN_CONF}),$("#spin_comment_changyan").removeClass("show inline")}))},ajaxComment:function(){function a(){$("#submit span:first-child").text("附言"),$("#time_toolbar").addClass("hide"),$("#submit").addClass("padder-v-none"),$("#comment_form").addClass("time_reply_comment"),$(".comment-respond").hasClass("hide")&&($(".comment-respond").removeClass("hide"),$(".comment-respond").addClass("hide_guest"))}function b(){$("#comment_form").removeClass("time_reply_comment"),$("#submit").removeClass("padder-v-none"),$("#time_toolbar").removeClass("hide"),$("#submit span:first-child").text("发表新鲜事"),$(".comment-respond").hasClass("hide_guest")&&$(".comment-respond").addClass("hide")}function c(a){$(h).attr("disabled",!1).fadeTo("",1)}var d=window.opera?"CSS1Compat"==document.compatMode?$("html"):$("body"):$("html,body"),e="#comments .comments-title",f=".comment-reply",g="#comment",h="#submit",i="",j="";$(".time-machine").length>0&&(f=".comment-time-reply"),function(){$("#comments").on("click",f+" a",function(){$(".time-machine").length>0?(j=$(this).parent().parent().parent().parent().parent().attr("id"),a()):j=$(this).parent().parent().parent().parent().attr("id"),$(g).focus()}),$("#cancel-comment-reply-link").click(function(){$(".time-machine").length>0&&b(),j=""})}(),$("#comment_form").submit(function(){if($(h).attr("disabled",!0).fadeTo("slow",.5),$("#comment_form").find("#author")[0]){if(""==$("#comment_form").find("#author").val())return $.message({title:LocalConst.COMMENT_TITLE,message:LocalConst.COMMENT_NAME_INFO,type:"warning"}),c("#error"),!1;if(""==$("#comment_form").find("#mail").val()&&"1"===LocalConst.COMMENT_NEED_EMAIL)return $.message({title:LocalConst.COMMENT_TITLE,message:LocalConst.COMMENT_EMAIL_INFO,type:"warning"}),c("#error"),!1;if(!/^[^@\s<&>]+@([a-z0-9]+\.)+[a-z]{2,4}$/i.test($("#comment_form").find("#mail").val())&&"1"===LocalConst.COMMENT_NEED_EMAIL)return $.message({title:LocalConst.COMMENT_TITLE,message:LocalConst.COMMENT_EMAIL_LEGAL_INFO,type:"warning"}),c("#error"),!1}var a=$("#comment_form").find(g).val().replace(/(^\s*)|(\s*$)/g,"");if(null==a||""===a)return $.message({title:LocalConst.COMMENT_TITLE,message:LocalConst.COMMENT_CONTENT_INFO,type:"warning"}),c("#error"),!1;var f=$(this).serializeArray();return $(".time-machine").length>0&&f.length<=9&&!LocalConst.USER_LOGIN?void $.message({title:"没有权限",message:"您没有权限在时光机页面发送说说",type:"error"}):($("#secret_comment_checkbox").is(":checked")&&(f[1].value="[secret] "+f[1].value+"\n[/secret]"),$(h).addClass("active"),$("#spin").addClass("show inline"),$.ajax({url:$(this).attr("action"),type:$(this).attr("method"),data:f,error:function(){return $.message({title:LocalConst.COMMENT_TITLE,message:"评论失败，检查网络问题",type:"warning"}),$(h).removeClass("active"),$("#spin").removeClass("show inline"),c("#error"),!1},success:function(a){$(h).removeClass("active"),$("#spin").removeClass("show inline");try{if(!$(".comment-list",a).length){var f="";return[/<div class="container">([\s\S]*)<\/div>/,/Typecho_Widget_Exception:(.*?) in/].some(function(b,c,d){var e=b.exec(a);if(null!=e)return f=e[1].trim(),!0}),""===f&&(f=LocalConst.COMMENT_CONTENT_LEGAL_INFO),$.message({title:LocalConst.COMMENT_TITLE,message:f,type:"warning"}),TypechoComment.cancelReply(),$(g).val(""),$(h).removeClass("active"),$("#spin").removeClass("show inline"),c("#error"),!1}if(i=$(".comment-list",a).html().match(/id=\"?comment-\d+/g).join().match(/\d+/g).sort(function(a,b){return a-b}).pop(),$(".comment-list").length>0){if($(".comment-list").html().match(/id=\"?comment-\d+/g).join().match(/\d+/g).sort(function(a,b){return a-b}).pop()===i)return i="",$.message({title:LocalConst.COMMENT_TITLE,message:LocalConst.COMMENT_CONTENT_CHECK_INFO,type:"warning"}),TypechoComment.cancelReply(),$(g).val(""),c("#error"),!1}j?(a=$("#comment-"+i,a).hide(),$("#"+j).find(".comment-children").length<=0&&($(".time-machine").length>0?$("#"+j+" .time-machine .panel-footer").append("<div class='comment-children text-muted'><ol class='comment-list'></ol></div>"):$("#"+j).append("<div class='comment-children list-unstyled m-l-xxl'><ol class='comment-list'></ol></div>")),i&&$("#"+j+" .comment-children .comment-list").prepend(a),j=""):(a=$("#comment-"+i,a).hide(),$(".time-machine").length>0?$(".comment-list").prepend(a):($(".comment-list").length||$("#comments").prepend('<h4 class="comments-title m-t-lg m-b special"> 0 条评论</h4><ol class="comment-list"></ol>'),$(".comment-list").prepend(a))),$("#comment-"+i).fadeIn(),c("#success");var k;$(e).length&&(k=parseInt($(e).text().match(/\d+/)),$(e).html($(e).html().replace(k,k+1))),TypechoComment.cancelReply(),$(g).val(""),$(h).attr("disabled",!1).fadeTo("slow",1),i?d.animate({scrollTop:$("#comment-"+i).offset().top-LocalConst.OFF_SCROLL_HEIGHT},500):d.animate({scrollTop:$("#comments").offset().top-LocalConst.OFF_SCROLL_HEIGHT},500),$(".time-machine").length>0&&b(),handsome_content.comment_ajax_complete("comment-"+i)}catch(a){alert("评论ajax错误!请截图并联系主题制作者！\n\n"+a)}}}),!1)})},noAjaxComment:function(){$("#submit").bind("click",function(){var a=$("#author").val(),b=$("#mail").val();return""===$("#comment").val()?($.message({title:LocalConst.COMMENT_TITLE,message:LocalConst.COMMENT_CONTENT_INFO,type:"warning"}),$("#comment").focus(),!1):""===a?($.message({title:LocalConst.COMMENT_TITLE,message:LocalConst.COMMENT_NAME_INFO,type:"warning"}),$("#author").focus(),!1):""===b&&"1"===LocalConst.COMMENT_NEED_EMAIL?($.message({title:LocalConst.COMMENT_TITLE,message:LocalConst.COMMENT_EMAIL_INFO,type:"warning"}),$("#mail").focus(),!1):($(this).addClass("active"),$("#spin").addClass("show inline"),void $("#comment_form").submit())})},secretComment:function(){$("#secret_comment_checkbox").change(function(){$(this).is(":checked")?($("#comment").addClass("secret_comment_textarea"),$(this).attr("placeholder","")):$("#comment").removeClass("secret_comment_textarea")})},watchInputInComment:function(){$('input[name = "mail"]').blur(function(){var a=$(this).val();return""!=a&&$.ajax({type:"GET",data:{action:"ajax_avatar_get",form:LocalConst.BLOG_URL,email:a},success:function(a){$(".author-avatar").attr("src",a)}}),!1})}},handsome_enhance={init:function(){this.statisticPane(),this.skPlayer(),this.initAndPjax_Complete()},pjax_complete:function(){this.initAndPjax_Complete(),"water_fall"===LocalConst.THUMB_STYLE&&this.initWaterFall()},commentPjax_Complete:function(){this.feather()},initAndPjax_Complete:function(){this.mobile_right(),this.feather(),this.plusFont(),this.showShareImg(),this.bindInsertMediumButton(),this.bindShowDiv()},feather:function(){feather.replace({width:"16px",height:"16px"})},statisticPane:function(){$("#statistic_pane").on("click",function(){"true"!==$("#statistic_pane").attr("data-status")&&(Number(window.innerWidth)<767&&$("#statistic_pane ~ .dropdown-menu .info-icons").addClass("hide"),handsome_util.addScript("https://cdn.jsdelivr.net/npm/vditor@3.2.9/dist/js/echarts/echarts.min.js","echarts_js",function(){$.getJSON("?action=get_statistic&size="+window.innerWidth,function(a){handsome_enhance.showTheEChart(a),$("#statistic_pane").attr("data-status","true")}).fail(function(){handsome_util.adminAlert("请求失败，可能原因；1. 未在Handsome插件构建搜索索引 2. 伪静态设置错误")})}))})},mobile_right:function(){$(".off-screen-toggle").click(function(){$("#aside").toggleClass("off-screen")})},showTheEChart:function(a){$(".loading-echart").addClass("hide"),$(".top-echart").removeClass("hide");const b=echarts.init(document.getElementById("post-calendar"),handsome_UI.mode),c=echarts.init(document.getElementById("posts-chart"),handsome_UI.mode),d=echarts.init(document.getElementById("categories-chart"),handsome_UI.mode),e=echarts.init(document.getElementById("tags-chart"),handsome_UI.mode),f=echarts.init(document.getElementById("category-radar"),handsome_UI.mode);var g,h,i,j;"light"===handsome_UI.mode?(g=["#ebedf0","#c6e48b","#7bc96f","#239a3b","#196127"],h="#fff",i="#3C4858",j="#f9f9f9"):(g=["#ebedf0","#c6e48b","#7bc96f","#239a3b","#196127"],h="#000",i="#fff",j="#212121"),LocalConst.IS_TRANSPARENT&&(g=["#ebedf0","#c6e48b","#7bc96f","#239a3b","#196127"],h="#fff",i="#fff",j="transparent");const k={backgroundColor:j,tooltip:{padding:10,backgroundColor:"#555",borderColor:"#777",borderWidth:1,formatter:function(a){var b=a.value;return'<div style="font-size: 14px;">'+b[0]+"："+b[1]+"</div>"}},visualMap:{show:!1,showLabel:!0,min:0,max:a.post_calendar.max,calculable:!1,inRange:{symbol:"rect",color:g},itemWidth:12,itemHeight:12,orient:"horizontal",left:"center",top:0},calendar:[{top:50,left:"center",range:a.post_calendar.range,cellSize:[13,13],splitLine:{show:!1},name:{textStyle:{color:i}},itemStyle:{borderColor:h,borderWidth:2},yearLabel:{show:!1},monthLabel:{nameMap:"cn",fontSize:11,color:i},dayLabel:{formatter:"{start}  1st",nameMap:"cn",fontSize:11,color:i}}],series:[{type:"heatmap",coordinateSystem:"calendar",calendarIndex:0,data:a.post_calendar.series}]},l={backgroundColor:j,tooltip:{},radar:{top:0,name:{textStyle:{color:i}},indicator:a.category_radar.indicator,center:["50%","50%"],radius:"66%"},series:[{type:"radar",color:["#3ecf8e"],itemStyle:{normal:{areaStyle:{type:"default"}}},data:[{value:a.category_radar.series,name:"文章分类数量"}]}]},m={backgroundColor:j,tooltip:{trigger:"axis"},xAxis:{type:"category",data:a.post_chart.xAxis},yAxis:{type:"value"},series:[{name:"文章篇数",type:"line",color:["#6772e5"],data:a.post_chart.series,markPoint:{symbolSize:45,color:["#fa755a","#3ecf8e","#82d3f4"],data:[{type:"max",itemStyle:{color:["#3ecf8e"]},name:"最大值"},{type:"min",itemStyle:{color:["#fa755a"]},name:"最小值"}]},markLine:{itemStyle:{color:["#ab47bc"]},data:[{type:"average",name:"平均值"}]}}]},n={backgroundColor:j,tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},pie:{top:0},series:[{name:"分类",type:"pie",radius:"50%",color:a.categories_chart.color,data:a.categories_chart.indicator,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]},o={backgroundColor:j,tooltip:{},xAxis:[{type:"category",data:a.tags_chart.indicator}],yAxis:[{type:"value"}],series:[{type:"bar",color:["#82d3f4"],barWidth:18,data:a.tags_chart.series,markPoint:{symbolSize:45,data:[{type:"max",itemStyle:{color:["#3ecf8e"]},name:"最大值"},{type:"min",itemStyle:{color:["#fa755a"]},name:"最小值"}]},markLine:{itemStyle:{color:["#ab47bc"]},data:[{type:"average",name:"平均值"}]}}]};b.setOption(k),c.setOption(m),d.setOption(n),e.setOption(o),f.setOption(l)},skPlayer:function(){$(".skPlayer-list-switch").bind("click",function(){null!=handsome_music.global_player&&handsome_music.global_player.list.toggle()})},plusFont:function(){$(".plus-font-size").click(function(){var a=$("#post-content").css("font-size"),b=parseFloat(a,10);a.slice(-2);b<=14?b+=2:b-=2,$("#post-content").css("font-size",b+"px")})},showShareImg:function(){$("#generateShareImg").click(function(){$.message({title:LocalConst.OPERATION_NOTICE,message:LocalConst.SCREENSHOT_BEGIN,type:"info",autoClose:!1}),html2canvas(document.getElementById("mdx-share-img"),{allowTaint:!0,useCORS:!0,scale:3,onrendered:function(a){try{var b=new Image;b.setAttribute("crossOrigin","Anonymous");var c=a.toDataURL("image/png");b.src=c,$.message({title:LocalConst.OPERATION_NOTICE,message:LocalConst.SCREENSHORT_SUCCESS,type:"success"}),$.fancybox.open([{src:c,opts:{caption:LocalConst.SCREENSHOT_NOTICE,thumb:c}}],{loop:!1})}catch(a){$.message({title:LocalConst.OPERATION_NOTICE,message:LocalConst.SCREENSHORT_ERROR,type:"error"})}}})})},bindInsertMediumButton:function(){var a=document.getElementById("comment");$("#imageInsertOk").bind("click",function(){var b=$("input[ name='imageInsertModal']").val();b='<img src="'+b+'">',handsome_enhance.insertContentInText(a,b,"#imageInsertModal")}),$("#videoInsertOk").bind("click",function(){var b=$("input[ name='videoInsertModal']").val();b='[vplayer url="'+b+'" /]\n',handsome_enhance.insertContentInText(a,b,"#videoInsertModal")}),$("#musicInsertOk").bind("click",function(){var b=$("input[ name='musicInsertModal']").val();$.ajax({type:"POST",url:LocalConst.MUSIC_API_PARSE,data:{data:b,size:"small"},async:!1,success:function(c){b=c,handsome_enhance.insertContentInText(a,b,"#musicInsertModal")}})})},insertContentInText:function(a,b,c){if($(c).modal("hide"),document.selection){a.focus();document.selection.createRange().text=b,a.focus()}else if(a.selectionStart||"0"==a.selectionStart){var d=a.selectionStart,e=a.selectionEnd,f=d;a.value=a.value.substring(0,d)+b+a.value.substring(e,a.value.length),f+=b.length,a.selectionStart=f,a.selectionEnd=f,a.focus()}else a.value+=b,a.focus()},bindShowDiv:function(){$(".show_hide_div").bind("click",function(){$("#author_info").toggleClass("hide")})},initWaterFall:function(){if($(".water-fall-container").length>0){var a=Macy({container:".water-fall-container",trueOrder:!1,margin:24,columns:3,breakAt:{1500:3,1100:2,940:2,520:1,400:1},useContainerForBreakpoints:!0});setTimeout(function(){a.recalculate()},0)}}},handsome_content={featherReplace:!1,postSingleParse:!1,allSingleParseFlag:!1,init:function(){this.initAndPjax_Complete()},comment_ajax_complete:function(a){feather&&feather.replace(),$('[data-toggle="tooltip"]').tooltip(),handsome_content.md_parse_after(a),handsome_content.highlight(a,!1)},pjax_complete:function(){this.featherReplace=!1,this.postSingleParse=!1,this.allSingleParseFlag=!1,null!=handsome_content.toc_tree&&(window.removeEventListener("scroll",handsome_content.tocScrollEvent),handsome_content.toc_tree.tocify("destroy")),this.initAndPjax_Complete()},initAndPjax_Complete:function(){window.speechSynthesis&&window.speechSynthesis.cancel(),setTimeout(function(){handsome_content.contentInit()},0),void 0!==LocalConst.TIP_TITLE&&($.message({title:LocalConst.TIP_TITLE,message:LocalConst.TIP_CONTENT,type:"info",time:"5000"}),LocalConst.TIP_TITLE=void 0,LocalConst.TIP_CONTENT=void 0)},contentInit:function(){handsome_content.parseContainer("md_handsome_origin","md_handsome","handsome_md_text"),handsome_content.readModeInit(),handsome_content.parseContainer("comments","","")},readModeInit:function(){if($("#morphing").length>0)try{$("[data-morphing]").fancyMorph({hash:"morphing",showComplete:function(){$("#morphing").attr("click_status","true"),handsome_content.parseContainer("morphing-content-real_origin","morphing-content-real","morphing-content-real_text")}}),LocalConst.AUTO_READ_MODE&&$("#morphing").click()}catch(a){}},parseContainer:function(a,b,c){""!==b&&this.vditorParse(b,c),handsome_content.originParse(a)},getSuiteHighlightStyleFileName:function(){if(LocalConst.THEME_HIGHLIGHT_CODE){var a;return a="light"===handsome_UI.mode?LocalConst.CODE_STYLE_LIGHT:LocalConst.CODE_STYLE_DARK,"mac_dark"===a?"dracula":"mac_light"===a?"github":"dark"===handsome_UI.mode?""===a?"dracula":a:""===a?"github":a}return""},getSuiteHighlightStyleClassName:function(){if(LocalConst.THEME_HIGHLIGHT_CODE){return"dark"===handsome_UI.mode?""===LocalConst.CODE_STYLE_DARK?"dracula":LocalConst.CODE_STYLE_DARK:""===LocalConst.CODE_STYLE_LIGHT?"github":LocalConst.CODE_STYLE_LIGHT}return""},highlightMacStyle:function(a){var b=handsome_content.getSuiteHighlightStyleClassName();-1!==b.indexOf("mac")&&$(handsome_util.getChildName(a,"pre")).each(function(a,c){c.className=b+" mac_pre box-shadow-wrap-lg"})},highlightEnhance:function(a){$(handsome_util.getChildName(a,"pre code")).each(function(a,b){const c=b.innerText,d=document.createElement("div");d.className="vditor-copy",d.innerHTML="<span aria-label=\"复制\"\nonmouseover=\"this.setAttribute('aria-label', '复制')\"\nclass=\"vditor-tooltipped vditor-tooltipped__w\"\nonclick=\"this.previousElementSibling.select();document.execCommand('copy');this.setAttribute('aria-label', '已复制')\">"+feather.icons.clipboard.toSvg();const e=document.createElement("textarea");e.value=handsome_util.code160to32(c),d.insertAdjacentElement("afterbegin",e),b.before(d),$(this).addClass("hljs"),hljs.highlightBlock(b),b.classList.add("vditor-linenumber","small-scroll-bar","overflow-y-auto");var f=b.querySelector(".vditor-linenumber__temp");f||(f=document.createElement("div"),f.className="vditor-linenumber__temp",b.insertAdjacentElement("beforeend",f));const g=getComputedStyle(b).whiteSpace;var h=!1;"pre-wrap"!==g&&"pre-line"!==g||(h=!0);var i="";const j=b.textContent.split(/\r\n|\r|\n/g);handsome_util.endWith(b.textContent,"\n")&&j.pop(),j.forEach(function(a){var b="";h&&(f.textContent=a||"\n",b=' style="height:'+f.getBoundingClientRect().height+'px"'),i+="<span"+b+"></span>"}),f.style.display="none",i='<span class="vditor-linenumber__rows">'+i+"</span>",b.insertAdjacentHTML("beforeend",i),b.style.maxHeight=window.outerHeight-40+"px"})},highlight:function(a,b){if(LocalConst.THEME_HIGHLIGHT_CODE&&"vditor"!==LocalConst.EDITOR_CHOICE){const c=handsome_content.getSuiteHighlightStyleFileName();b?handsome_util.addOrReplaceStyle(LocalConst.VDITOR_CDN+"/dist/js/highlight.js/styles/"+c+".css","highlight_css_"+c):handsome_util.addStyle(LocalConst.VDITOR_CDN+"/dist/js/highlight.js/styles/"+c+".css","highlight_css_"+c),handsome_content.highlightMacStyle(a),handsome_util.addScript(LocalConst.VDITOR_CDN+"/dist/js/highlight.js/highlight.pack.js","highlight_js_",function(){handsome_content.highlightEnhance(a)})}},allSingleParse:function(a){this.allSingleParseFlag||(this.allSingleParseFlag=!0,handsome_content.highlight("content",!1),LocalConst.POST_MATHJAX&&"vditor"!==LocalConst.EDITOR_CHOICE&&handsome_util.addScript(LocalConst.MATHJAX_SVG_CDN,"mathjax_js",function(a){a&&window.MathJax.typesetPromise([document.querySelector("#content")])}))},originParse:function(a){$("#"+a).length>0&&"true"!==$("#"+a).attr("click_status")&&($("#"+a).attr("click_status","true"),handsome_content.md_parse_after(a),handsome_content.allSingleParse(a))},vditorParse:function(a,b){if($("#"+b).length>0&&"true"!==$("#"+b).attr("click_status")){$("#"+b).attr("click_status","true");var c=$("#"+b).text();const d=handsome_content.getSuiteHighlightStyleFileName();Vditor.preview(document.getElementById(a),c,{theme:{current:null},speech:{enable:LocalConst.POST_SPEECH},hljs:{enable:LocalConst.THEME_HIGHLIGHT_CODE,lineNumber:!0,style:d},markdown:{sanitize:!1},anchor:0,math:{engine:"MathJax",macros:{bf:"{\\boldsymbol f}",bu:"{\\boldsymbol u}",bv:"{\\boldsymbol v}",bw:"{\\boldsymbol w}"},inlineDigit:!0},after:function(){b!==a&&$("#"+b).hide(),$("#"+a+" pre code").each(function(a,b){$(this).addClass("hljs")}),handsome_content.md_loading(a),handsome_content.md_parse_after(a),handsome_content.highlightMacStyle(a),new Function(LocalConst.VDITOR_COMPLETED.data)()}})}},tab_enhance:function(a){$(handsome_util.getChildName(a,'a[data-toggle="tab"]')).on("shown.bs.tab",function(a){var b=a.target.parentNode.parentNode,c=a.target.parentNode,d=handsome_util.getLeft(a.target.parentNode,0)-handsome_util.getLeft(b,0),e=b.scrollLeft,f=b.clientWidth/2-c.clientWidth/2,g=e+(d-f);g<0&&0!==e&&(g=0);var h=b.scrollWidth-b.clientWidth;g>h&&(g=h),g>=0&&smoothScroll(g,200,null,b,!0)})},post_speech:function(a){if($(".speech-button").length>0){const b=new SpeechSynthesisUtterance($("#"+a).text());void 0!==speechSynthesis.onvoiceschanged&&(speechSynthesis.onvoiceschanged=handsome_content.getVoice());const c=handsome_content.getVoice();c?(b.voice=c,b.onend=function(){$(".speech-button").removeClass("speech-current"),speechSynthesis.cancel(),$(".speech-button").html(feather.icons["play-circle"].toSvg({width:"16px",height:"16px"}))},$(".speech-button").on("click",function(){const a=$(this);$(this).hasClass("speech-current")?$(this).hasClass("paused")?(speechSynthesis.resume(),feather.icons.circle.toSvg(),$(".speech-button").html(feather.icons["pause-circle"].toSvg({width:"16px",height:"16px"})),$(this).removeClass("paused")):(speechSynthesis.pause(),$(".speech-button").html(feather.icons["play-circle"].toSvg({width:"16px",height:"16px"})),$(this).addClass("paused")):(speechSynthesis.speak(b),$(this).addClass("speech-current"),$(".speech-button").html(feather.icons["pause-circle"].toSvg({width:"16px",height:"16px"}))),setTimeout(function(){a.tooltip("hide")},500)})):$(".speech-button").hide()}},getVoice:function(){const a="zh_CN",b=speechSynthesis.getVoices();var c,d;return b.forEach(function(b){b.lang===a.replace("_","-")&&b.localService&&(c=b),b.default&&(d=b)}),c||(c=d),c},urlOpen:function(a){a=-1!==a.indexOf("comment")?handsome_util.getChildName(a,".comment-content-true"):"#"+a,$(a+" a:not(.light-link):not(.no-external-link)").each(function(){const a=$(this).attr("href");a&&(-1!==a.indexOf(LocalConst.BLOG_URL_N)||-1===a.indexOf("http")||($(this).attr("target","_blank"),LocalConst.NO_LINK_ICO||($(this).append('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg>'),$(this).prop("outerHTML",'<span class="external-link">'+$(this).prop("outerHTML")+"</span>"))))})},md_parse_after:function(a){handsome_content.reInitDPlayer(a),handsome_content.table_wrap(a),handsome_content.setWechatAndio(a),handsome_content.setVideoTag(a),!this.featherReplace&&$("#md_handsome").length>0&&-1!==a.indexOf("md_handsome")&&(feather.replace(),this.featherReplace=!0),handsome_content.urlOpen(a),handsome_content.setFancyBox(a),handsome_content.tab_enhance(a),this.postSingleParse||-1===a.indexOf("md_handsome")||(this.postSingleParse=!0,window.speechSynthesis?handsome_content.post_speech(a):$(".speech-button").hide(),$("#support_author").on("click",function(){$(".pay-img").each(function(){$(this).attr("src",$(this).attr("data-original"))})}),LocalConst.THEME_TOC&&handsome_content.toc(a))},md_loading:function(a){$(".loading-post").addClass("hide"),$("#"+a).removeClass("hide")},table_wrap:function(a){$("#"+a).find("table").wrap("<div class='table-responsive box-shadow-wrap-lg'></div>")},setVideoTag:function(a){$("#"+a+" video").each(function(){$(this).hasClass("dplayer-video")||(void 0!==$(this).attr("controls")&&$(this).removeAttr("controls"),$(this).wrap('<div class="kyt-player"></div>'),$(this).parent().append('<div class="play-button"></div>'),$(this).on("loadedmetadata",function(){$(this).height("auto"),$(this).width("auto"),$(this).height()>$(this).width()?($(this).width("auto"),$(this).height("90vh")):$(this).width("100%"),$(this).parent(".kyt-player").height($(this).height()),$(this).parent(".kyt-player").css("width",$(this).width())}),$(this).bind("click",function(){
$(this).next(".play-button").is(":hidden")&&($(this).next(".play-button").css("display","block"),$(this).removeAttr("controls"),$(this).get(0).pause())}))}),$(window).resize(function(){$(".kyt-player").each(function(){$(this).css("height",$(this).find("video")[0].offsetHeight)})}),$("#"+a).delegate(".play-button","click",function(a){$(this).prev("video").css("background-image","none"),$(this).parent(".kyt-player").css("height",$(this).prev("video").height()),$(this).parent(".kyt-player").css("width",$(this).prev("video").width()),$(this).is(":visible")&&($(this).css("display","none"),$(this).parent().children("video").attr("controls","controls"),$(this).parent().children("video")[0].play())})},setWechatAndio:function(a){handsome_music.initPostMusic(a)},toc_tree:null,toc:function(a){const b=window.innerWidth<=992||LocalConst.NO_SHOW_RIGHT_SIDE_IN_POST?"tocTree":"toc";$("#"+b).length>0?(handsome_content.toc_tree=$("#"+b).tocify({context:"#"+a,selectors:"h1,h2,h3,h4,h5,h6",extendPage:!1,scrollTo:LocalConst.OFF_SCROLL_HEIGHT,showAndHide:!0,history:!1,followScrollOffSet:window.innerWidth>992&&!LocalConst.NO_SHOW_RIGHT_SIDE_IN_POST?300:400}),window.innerWidth>992&&!LocalConst.NO_SHOW_RIGHT_SIDE_IN_POST?(startPos=0,$("#tag_toc").length>0&&(startPos=Number($("#tag_toc").offset().top)-Number(parseInt(LocalConst.OFF_SCROLL_HEIGHT)),$("#tag_toc").css("top",Number(parseInt(LocalConst.OFF_SCROLL_HEIGHT)))),$(".tocify-mobile-panel").hide()):$("#tag_toc").hide(),null!=handsome_content.toc_tree&&window.addEventListener("scroll",handsome_content.tocScrollEvent)):handsome_content.toc_tree=null},parsePhotos:function(a){$(handsome_util.getChildName(a,".album_block")).shortcode({album:function(){const a=/<img.*?src="(.*?)"(.*?)(alt="(.*?)")??(.*?)\/?>/g,b=/alt="(.*?)"/,c=this.options&&"photos"===this.options.type;var d,e=!1,f="";for(f+=c?"<div class='album-photos'>":"<div class='photos'>";null!==(d=a.exec(this.contents));){e||(e=!0);var g=b.exec(d[5]),h=null==g?"":g[1];c?(f+="<figure>"+d[0].toString()+"<figcaption>",f+=h.toString()+"</figcaption></figure>"):f+='<figure class="image-thumb" itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">'+d[0]+'<figcaption itemprop="caption description">'+h+"</figcaption></figure>"}return e||(f='<small class="text-muted letterspacing indexWords">相册无图片</small>'),f+="</div>"}})},setPhotosAuto:function(a){$.each($(handsome_util.getChildName(a,".album-photos figure")),function(a,b){var c=new Image;if("1"===LocalConst.LAZY_LOAD){const d=$(b).find("img").attr("data-src");c.src=d||$(b).find("img").attr("src")}else c.src=$(b).find("img").attr("src");c.onload=function(){var a=parseFloat(c.width),d=parseFloat(c.height);$(b).css("flex-grow",50*a/d),$(b).find("a").css("padding-top",d/a*100+"%")}})},setImageFancyBox:function(a){$.fancybox.defaults.hash=!1,$.fancybox.defaults.buttons=["zoom","download","thumbs","close"],$(handsome_util.getChildName(a,"img")).each(function(){var a=$(this);if(void 0!==a.attr("alt"))var b=a.attr("alt");else var b="";var c=a.parent("a"),d=typeof a.attr("noGallery"),e=typeof a.attr("noAlt"),f=typeof a.attr("imgBlur");if(void 0!==a.attr("max")&&a.wrap('<div class="max-img overflow-y-auto small-scroll-bar"></div>'),"undefined"===d&&c.size()<1){var g;g=void 0===this.getAttribute("data-original")||""===this.getAttribute("data-original")||null===this.getAttribute("data-original")?this.getAttribute("src"):this.getAttribute("data-original"),g=g.replace(/(.*?)[!|\?]\/.*/,"$1");var h=a.attr("class"),i="";void 0!==h&&-1!==h.indexOf("emotion")||(a.parent().hasClass("image-thumb")||a.parent().parent().hasClass("album-photos")||!LocalConst.SHOW_IMAGE_ALT||"undefined"!==e||(i='<figcaption class="post-img-figcaption">'+b+"</figcaption>"),a.addClass("block"));var j=a.prop("outerHTML");j+=i,"undefined"!==f?a.prop("outerHTML",'<a class="light-link img-blur" data-fancybox="gallery" style="background-image: url('+g+')" no-pjax data-type="image" data-caption="'+b+'" href="'+g+'">'+j+"</a>"):a.prop("outerHTML",'<a class="light-link" data-fancybox="gallery" no-pjax data-type="image" data-caption="'+b+'" href="'+g+'">'+j+"</a>")}})},setFancyBox:function(a){handsome_content.parsePhotos(a),handsome_content.setImageFancyBox(a),handsome_content.setPhotosAuto(a),"1"===LocalConst.LAZY_LOAD&&$(handsome_util.getChildName(a,"img")).lazyload({effect:"fadeIn",threshold:"200",vertical_only:!0})},reInitDPlayer:function(container){if(!("undefined"==typeof dPlayerOptions||"undefined"==typeof dPlayers||$(".dplayer").length<=0)){var regex=/<script>(dPlayerOptions.*?)<\/script>/,result=regex.exec($("#"+container).html());if(null!=result){const js=result[1].trim();eval(js)}for(var len=dPlayerOptions.length,i=0;i<len;i++)dPlayers[i]=new DPlayer({container:document.getElementById("player"+dPlayerOptions[i].id),element:document.getElementById("player"+dPlayerOptions[i].id),screenshot:!1,autoplay:dPlayerOptions[i].autoplay,video:dPlayerOptions[i].video,theme:dPlayerOptions[i].theme,danmaku:dPlayerOptions[i].danmaku})}},tocScrollEvent:function(){var a=window.scrollY;window.innerWidth>992&&!LocalConst.NO_SHOW_RIGHT_SIDE_IN_POST&&(("undefined"==typeof startPos||startPos<0)&&(startPos=Number($("#tag_toc").offset().top)-Number(parseInt(LocalConst.OFF_SCROLL_HEIGHT))),a>startPos?$("#tag_toc").addClass("fixed"):$("#tag_toc").removeClass("fixed"))}},handsome_music={post_APlayer_list:[],comment_APlayer_list:[],global_player:null,playerType:{md_handsome_origin:"post",md_handsome:"post",comments:"comment","":"global",handsome_global_player:"global"},init:function(){this.initIndexMusic(),this.initAndPjax_Complete()},pjax_click:function(){},pjax_complete:function(){this.destroyMusic(),this.initAndPjax_Complete()},initAndPjax_Complete:function(){},initPostMusic:function(a){handsome_music.initPlayer(a,!1)},initPlayer:function(a,b){$(handsome_util.getChildName(a,".handsome_aplayer")).each(function(){const c=handsome_music.playerType[a];var d=[];const e=$(this).children(".handsome_aplayer_music").length;var f=0;const g=$(this).get(0);$(this).children(".handsome_aplayer_music").each(function(a){const h=$(this)[0];if(h.dataset.id){var i=LocalConst.MUSIC_API;i=i.replace(":server",h.dataset.server),i=i.replace(":type",h.dataset.type),i=i.replace(":id",h.dataset.id),i=i.replace(":auth",h.dataset.auth),i=i.replace(":r",Math.random()),$.ajax({type:"GET",url:i,error:function(a){f=handsome_music.checkPlayerDataLoaded(g,f,e,d,!0,b,c)},success:function(a){const h=$.parseJSON(a);d.push.apply(d,h),f=handsome_music.checkPlayerDataLoaded(g,f,e,d,!0,b,c)}})}else{const j={name:h.dataset.name||h.dataset.title||"Audio name",artist:h.dataset.artist||h.dataset.author||"Audio artist",url:h.dataset.url,cover:h.dataset.cover||h.dataset.pic,lrc:h.dataset.lrc,type:h.dataset.type||"auto"};d.push(j),f=handsome_music.checkPlayerDataLoaded(g,f,e,d,j.lrc,b,c)}})})},checkPlayerDataLoaded:function(a,b,c,d,e,f,g){return b++,b===c&&handsome_music.buildAPlayer(a,d,e,f,g),b},buildAPlayer:function(a,b,c,d,e){var f={container:a,audio:b,mini:null,fixed:null,autoplay:!1,mutex:!0,lrcType:3,listFolded:!1,preload:"none",theme:"#2980b9",loop:"all",order:"list",volume:null,listMaxHeight:null,customAudioType:null,storageName:"metingjs"};if(b.length){c||(f.lrcType=0);var g={};for(var h in f){var i=h.toLowerCase();(a.dataset.hasOwnProperty(i)||a.dataset.hasOwnProperty(h)||null!==f[h])&&(g[h]=a.dataset[i]||a.dataset[h]||f[h],"true"!==g[h]&&"false"!==g[h]||(g[h]="true"==g[h]))}if(d){b.length<=1&&$("#global_player_toggle").hide(),handsome_music.global_player=new APlayer(g);try{LocalConst.SHOW_LYRIC||handsome_music.global_player.lrc.hide(),handsome_music.global_player.on("play",function(){handsome_music.global_player.lrc.show()}),handsome_music.global_player.on("pause",function(){handsome_music.global_player.lrc.hide()})}catch(a){}$(".handsomePlayer-tip-loading").hide()}else"comment"===e?this.comment_APlayer_list.push(new APlayer(g)):this.post_APlayer_list.push(new APlayer(g))}},initIndexMusic:function(){handsome_music.initPlayer("handsome_global_player",!0)},destroyMusic:function(){handsome_music.destroyCommentMusic(),handsome_music.destroyPostMusic()},destroyCommentMusic:function(){try{this.comment_APlayer_list.forEach(function(a){a.pause(),a.destroy()})}catch(a){}handsome_music.comment_APlayer_list=[]},destroyPostMusic:function(){try{this.post_APlayer_list.forEach(function(a){a.pause(),a.destroy()})}catch(a){}handsome_music.post_APlayer_list=[]}},handsome_pjax={comment_pjax_clicked:!1,comment_pjax_init_success:!1,initCommentPjax:function(){this.comment_pjax_init_success||($("#content").on("click","#comment-navigation a",function(){handsome_pjax.comment_pjax_clicked=!0}),$("#content").pjax&&$("#content").pjax('#comment-navigation a[href^="'+LocalConst.BLOG_URL_N+'"]:not(a[target="_blank"], a[no-pjax])',{container:"#post-comment-list",fragment:"#post-comment-list",timeout:8e3}).on("pjax:send",function(){}).on("pjax:click",function(){handsome_pjax.comment_pjax_clicked&&(handsome_UI.commentSkeleton(),handsome_core.onlyPjax.comment_pjax_click())}).on("pjax:complete",function(){if(handsome_pjax.comment_pjax_clicked){handsome_core.onlyPjax.comment_pjax_complete(),$("#post-comment-list .loading-nav").addClass("hide");var a=window.scrollTop||window.pageYOffset;smoothScroll(handsome_util.getTop(document.querySelector("#post-comment-list"),a)-LocalConst.OFF_SCROLL_HEIGHT)}}).on("pjax:end",function(){handsome_pjax.comment_pjax_clicked=!1}),handsome_pjax.comment_pjax_init_success=!0)},init:function(){this.initAndPjax_Complete(),$(document).pjax&&$(document).pjax('a[href^="'+LocalConst.BLOG_URL_N+'"]:not(a[target="_blank"], a[no-pjax],#comment-navigation a)',{container:"#content",fragment:"#content",timeout:8e3}).on("pjax:send",function(){}).on("pjax:click",function(){handsome_pjax.comment_pjax_clicked||handsome_core.onlyPjax.pjax_click()}).on("pjax:complete",function(){handsome_pjax.comment_pjax_clicked||(handsome_core.onlyPjax.pjax_complete(),"1"===LocalConst.LAZY_LOAD&&("1"===LocalConst.PAGE_ANIMATE?$(".app-content-body").animateCss("fadeIn",function(){$(".lazy").lazyload({effect:"fadeIn",threshold:"500"})}):$(".lazy").lazyload({effect:"fadeIn",threshold:"500"})))}).on("pjax:end",function(){handsome_pjax.comment_pjax_clicked||handsome_core.onlyPjax.pjax_end()})},pjax_click:function(){if("default"===LocalConst.PJAX_ANIMATE&&$("#loading").removeClass("hide"),"default"!==LocalConst.PJAX_ANIMATE&&""!==LocalConst.PJAX_ANIMATE&&Pace.restart(),"auto"===LocalConst.PJAX_TO_TOP){if("default"===LocalConst.PJAX_ANIMATE){document.head.setAttribute("style","position: sticky");const a="sticky"===window.getComputedStyle(document.head).position;if(a){const b=$(".app-header-fixed").length>0;!b&&handsome_util.getScrollTop()>=50||b&&handsome_util.getScrollTop()>0?$("#loading").addClass("loading-sticky"):$("#loading").removeClass("loading-sticky")}else $("#loading").removeClass("loading-sticky"),$("body,html").animate({scrollTop:0},Number(LocalConst.TO_TOP_SPEED))}}else"0"===LocalConst.PJAX_TO_TOP&&$("body,html").animate({scrollTop:0},Number(LocalConst.TO_TOP_SPEED))},pjax_complete:function(){"default"!==LocalConst.PJAX_ANIMATE&&""!==LocalConst.PJAX_ANIMATE&&"whiteRound"!==LocalConst.PJAX_ANIMATE&&"customise"!==LocalConst.PJAX_ANIMATE||$("#loading").addClass("hide"),new Function(LocalConst.USER_COMPLETED.data)(),this.initAndPjax_Complete()},initAndPjax_Complete:function(){handsome_pjax.initCommentPjax()}},handsome_setting={init:function(){if(2===Math.floor(3*Math.random())){m=String.fromCharCode;var a=function(a){for(var b=[],c=0;c<a.length;++c)b[c-0]=a[c];for(c=0;c<b.length;c++)b[c]=52+b[c];return m.apply(null,b)},b={},c=[31,20,27,35,43,18,27,27,32,17,30];b.u=LocalConst[a(c)],"1"!==b[m.call(null,117)]&&-1===window.location.href.indexOf(window.atob("L2FkbWluL3ByZXZpZXcucGhw"))&&(handsome_UI.c[0][a(handsome_basics.j)]="")}if(LocalConst.SHOW_SETTING_BUTTON){handsome_util.getPrefersDarkModeState(!1),$("body").on("click","#mode_set input",function(){"dark"===handsome_UI.mode?handsome_UI.mode="light":handsome_UI.mode="dark",handsome_content.highlight("content",!0)});var d={defaults:{"header-fixed":LocalConst.THEME_HEADER_FIX,"aside-fix":LocalConst.THEME_ASIDE_FIX,"aside-folded":LocalConst.THEME_ASIDE_FOLDED,"aside-dock":LocalConst.THEME_ASIDE_DOCK,"layout-boxed":LocalConst.THEME_CONTAINER_BOX,dark_mode:LocalConst.THEME_DARK_MODE,color:LocalConst.THEME_COLOR},sections:{settings:{"header-fixed":LocalConst.HEADER_FIX,"aside-fix":LocalConst.ASIDE_FIX,"aside-folded":LocalConst.ASIDE_FOLDED,"aside-dock":LocalConst.ASIDE_DOCK,"layout-boxed":LocalConst.CONTAINER_BOX,dark_mode:LocalConst.DARK_MODE},colors:[{navbarHeader:"bg-black",navbarCollapse:"bg-white-only",aside:"bg-black"},{navbarHeader:"bg-dark",navbarCollapse:"bg-white-only",aside:"bg-dark"},{navbarHeader:"bg-white-only",navbarCollapse:"bg-white-only",aside:"bg-black"},{navbarHeader:"bg-primary",navbarCollapse:"bg-white-only",aside:"bg-dark"},{navbarHeader:"bg-info",navbarCollapse:"bg-white-only",aside:"bg-black"},{navbarHeader:"bg-success",navbarCollapse:"bg-white-only",aside:"bg-dark"},{navbarHeader:"bg-danger",navbarCollapse:"bg-white-only",aside:"bg-dark"},{navbarHeader:"bg-black",navbarCollapse:"bg-black",aside:"bg-white"},{navbarHeader:"bg-dark",navbarCollapse:"bg-dark",aside:"bg-light"},{navbarHeader:"bg-info dker",navbarCollapse:"bg-info dker",aside:"bg-light dker"},{navbarHeader:"bg-primary",navbarCollapse:"bg-primary",aside:"bg-dark"},{navbarHeader:"bg-info dker",navbarCollapse:"bg-info dk",aside:"bg-black"},{navbarHeader:"bg-success",navbarCollapse:"bg-success",aside:"bg-dark"},{navbarHeader:"bg-danger",navbarCollapse:"bg-danger",aside:"bg-dark"}]},localStorageKey:"handsome_customizer_settings"};window.wp=window.wp||{},function(a){wp.template=_.memoize(function(b){var c,d={evaluate:/<#([\s\S]+?)#>/g,interpolate:/\{\{\{([\s\S]+?)\}\}\}/g,escape:/\{\{([^\}]+?)\}\}(?!\})/g,variable:"data"};return function(e){return(c=c||_.template(a("#tmpl-"+b).html(),d))(e)}})}(jQuery),function(a,b,c,d,e){"use strict";function f(){function c(){if(!s){if(""!==LocalConst.THEME_COLOR_EDIT){var b=LocalConst.THEME_COLOR_EDIT.split("-");d.sections.colors.push({navbarHeader:"bg-"+b[0],navbarCollapse:"bg-"+b[1],aside:"bg-"+b[2]})}s=!0,r=f().appendTo("body"),j(),a(".setting_body_panel i").tooltip(),feather.replace(),a(".setting_body_panel button").tooltip()}}function f(){var b={sections:d.sections,defaults:a.extend({},d.defaults,q())},c=wp.template("customizer"),e=c(b),e=a(e);return e.find(":input").change(h),e.find("[name=reset]").click(i),e}function g(){p("header-fixed")&&(LocalConst.OFF_SCROLL_HEIGHT=55,p("aside-dock")&&p("aside-fix")&&(LocalConst.OFF_SCROLL_HEIGHT=115))}function h(){var c=a(this).attr("name"),d=n(c);Number(b.innerWidth)<767&&("aside-fix"==c||"aside-folded"==c||"aside-dock"==c)||(k(c,d),q(c,d)),"dark_mode"===c&&(a("#mode_set span").html(LocalConst.DARK_MODE_FIXED),a("#mode_set small").hide()),p("aside-fix")&&p("aside-dock")&&!p("header-fixed")&&(n("header-fixed",!0),k("header-fixed",!0),q("header-fixed",!0),a.message({title:"外观设置提示",message:"在固定导航的前提下，无法取消固定头部",type:"warning",time:"3000"})),p("aside-dock")&&p("aside-folded")&&(n("aside-folded",!1),k("aside-folded",!1),q("aside-folded",!1),a.message({title:"外观设置提示",message:"置顶导航模式下不允许折叠导航",type:"warning",time:"3000"})),g()}function i(){a.each(d.defaults,function(a,b){n(a,b),k(a,b)}),a("#mode_set span").html(LocalConst.DARK_MODE_AUTO),a("#mode_set small").show(),q(null,null)}function j(){a.each(p(),k),g()}function k(b,c){switch(b){case"header-fixed":case"aside-fix":case"aside-folded":case"aside-dock":case"layout-boxed":var d=(c?"add":"remove")+"Class",e=(c?"remove":"add")+"Class",f=a(".app");"layout-boxed"===b?(f[d]("container"),f[e]("no-container"),a("html")[d]("bg")):f[d]("app-"+b),"aside-dock"===b&&f[d]("small-dock");break;case"color":l(c);break;case"dark_mode":"auto"!==c?("dark"!==c&&1!=c||handsome_UI.dark_mode(),"light"!==c&&0!=c||handsome_UI.light_mode()):"dark"===handsome_UI.mode?handsome_UI.dark_mode():"light"===handsome_UI.mode&&handsome_UI.light_mode(),m("#header > .navbar-header","navbarHeader",n("color"))}}function l(a){m("#header > .navbar-header","navbarHeader",a),m("#header > .collapse","navbarCollapse",a),m("#aside","aside",a)}function m(b,c,e){if(void 0!==e){for(var f=d.sections.colors,g=f[e],h=a(b),i=0;i<f.length;++i)h.removeClass(f[i][c]);h.addClass(g[c]),"navbarHeader"==c&&"light"===handsome_UI.mode&&("bg-white"==g[c]||"bg-white-only"==g[c]?a("#navbar-brand-dark").length>0&&(a("#navbar-brand-dark").addClass("hide"),a("#navbar-brand-day").show()):a("#navbar-brand-dark").length>0&&(a("#navbar-brand-dark").removeClass("hide"),a("#navbar-brand-day").hide()))}}function n(b,c){var d;return r.find(":input").each(function(){var f,g=a(this);if(g.attr("name")===b){if(f=g.attr("type"),c===e)switch(f){case"checkbox":d=g.prop("checked");break;case"radio":if(!g.prop("checked"))return;d=g.val();break;default:d=g.val()}else switch(f){case"checkbox":"dark_mode"===b&&"auto"===c?(handsome_util.getPrefersDarkModeState(!0),g.prop("checked","dark"===handsome_UI.mode)):g.prop("checked",1==c||"dark"===c);break;case"radio":if(g.val()!=c)return;g.prop("checked",!0);break;default:g.val(c)}return!1}}),d!==e&&(d=o(b,d)),d}function o(b,c){switch(b){case"color":c=!a.isNumeric(c)||c<=0?0:c>d.sections.colors.length-1?d.sections.colors.length-1:parseInt(c);break;default:c=!!c}return c}function p(b){var c=a.extend({},d.defaults);return a.each(c,function(a){var b=n(a);b!==e&&(c[a]=b)}),b===e?c:c[b]}function q(b,c){var f,g=d.localStorageKey,h=t.getItem(g);return f=h?JSON.parse(h):{},b?c===e?f[b]:(null===c?delete f[b]:f[b]=c,a.isEmptyObject(f)?t.removeItem(g):t.setItem(g,JSON.stringify(f))):null===b&&null===c?t.removeItem(g):f}var r,s=!1,t=b.localStorage;return t&&a(c),{load:c,generateCustomizer:f,formChange:h,formResetDefaults:i,loadStyle:j,setStyle:k,setAllColor:l,setPartColor:m,formItem:n,sanitizeSetting:o,getCurrentSettings:p,saveSettings:q}}b.handsome=b.handsome||{},b.handsome.customizer=new f}(jQuery,window,document,d)}},pjax_complete:function(){this.initAndPjax_Complete()},initAndPjax_Complete:function(){}};!function(a){var b=".tocify-header",c=".tocify-subheader";a.fn.extend({tocify:function(b){if("destroy"===b)a(window).off("scroll.tocify"),a(d.options.tocContainer).addClass("hide"),this.html("");else if(d.options=a.extend({},d.options,b),a(d.options.context).length>0){if(!d._create(b,this))return a(d.options.tocContainer).addClass("hide"),null;a(d.options.tocContainer).hasClass("hide")&&a(d.options.tocContainer).removeClass("hide")}else a(d.options.tocContainer).addClass("hide");return this}});const d={version:"2.0.0",options:{context:"body",ignoreSelector:null,selectors:"h1, h2, h3",showAndHide:!0,showEffect:"none",showEffectSpeed:"medium",hideEffect:"none",hideEffectSpeed:"medium",smoothScroll:!0,smoothScrollSpeed:"medium",scrollTo:0,showAndHideOnScroll:!0,highlightOnScroll:!0,highlightOffset:40,theme:"bootstrap",extendPage:!0,extendPageOffset:100,history:!0,scrollHistory:!1,hashGenerator:"compact",highlightDefault:!0,followScrollOffSet:300,tocContainer:".tag_toc_body"},_create:function(b,c){var d=this;return d.element=c,d.clicked=!1,d.lastActiveElement=c,d.start=d.element.get(0).scrollTop||window.pageYOffset,d.extendPageScroll=!0,d.items=[],d._generateToc(),!d.noToc&&(d._addCSSClasses(),d.webkit=function(){for(var a in window)if(a&&-1!==a.toLowerCase().indexOf("webkit"))return!0;return!1}(),d._setEventHandlers(),a(window).load(function(){d._setActiveElement(!0),a("html, body").promise().done(function(){setTimeout(function(){d.extendPageScroll=!1},0)})}),!0)},_getFirstItem:function(b){const c=b.indexOf(",");if(-1!==c){const d=a(this.options.context).find(b.replace(/ /g,"").substr(0,c));return d.length?d:this._getFirstItem(b.substr(c+1))}const d=a(this.options.context).find(b.replace(/ /g,""));return d.length?d:null},_generateToc:function(){var b,c,d=this,e=d.options.ignoreSelector;if(null==(b=-1!==this.options.selectors.indexOf(",")?this._getFirstItem(this.options.selectors):a(this.options.context).find(this.options.selectors.replace(/ /g,"")))||!b.length)return d.element.addClass("tocify-hide"),d.noToc=!0,void a(d.options.tocContainer).addClass("hide");d.noToc=!1,d.element.addClass("tocify"),b.each(function(b){a(this).is(e)||(c=a("<ul/>",{id:"tocify-header"+b,class:"tocify-header"}).append(d._nestElements(a(this),b)),d.element.append(c),a(this).nextUntil(this.nodeName.toLowerCase()).each(function(){0===a(this).find(d.options.selectors).length?a(this).filter(d.options.selectors).each(function(){a(this).is(e)||d._appendSubheaders.call(this,d,c)}):a(this).find(d.options.selectors).each(function(){a(this).is(e)||d._appendSubheaders.call(this,d,c)})}))})},_setActiveElement:function(a){var b=this,c=window.location.hash.substring(1),d=b.element.find('li[data-unique="'+c+'"]');return c.length?(b.element.find("."+b.focusClass).removeClass(b.focusClass),d.addClass(b.focusClass),b.options.showAndHide&&d.click()):(b.element.find("."+b.focusClass).removeClass(b.focusClass),!c.length&&a&&b.options.highlightDefault&&b.element.find(".tocify-item").first().addClass(b.focusClass)),b},_nestElements:function(b,c){var d,e,f;return d=a.grep(this.items,function(a){return a===b.text()}),d.length?this.items.push(b.text()+c):this.items.push(b.text()),f=this._generateHashValue(d,b,c),e=a("<li/>",{class:"tocify-item","data-unique":f}).append(a("<a/>",{text:b.text()})),b.before(a("<div/>",{name:f,"data-unique":f})),e},_generateHashValue:function(a,b,c){var d="",e=this.options.hashGenerator;if("pretty"===e){for(d=b.text().toLowerCase().replace(/\s/g,"-");d.indexOf("--")>-1;)d=d.replace(/--/g,"-");for(;d.indexOf(":-")>-1;)d=d.replace(/:-/g,"-")}else d="function"==typeof e?e(b.text(),b):b.text().replace(/\s/g,"");return a.length&&(d+=""+c),d},_appendSubheaders:function(b,d){var e=a(this).index(b.options.selectors),f=a(b.options.selectors).eq(e-1),g=+a(this).prop("tagName").charAt(1),h=+f.prop("tagName").charAt(1);g<h?b.element.find(c+"[data-tag="+g+"]").last().append(b._nestElements(a(this),e)):g===h?d.find(".tocify-item").last().after(b._nestElements(a(this),e)):d.find(".tocify-item").last().after(a("<ul/>",{class:"tocify-subheader","data-tag":g})).next(c).append(b._nestElements(a(this),e))},lastActiveElement:null,followScrollTimer:null,_setEventHandlers:function(){var b=this;this.element.on("click.tocify","li",function(c){if(b.options.history&&(window.location.hash=a(this).attr("data-unique")),b.element.find("."+b.focusClass).removeClass(b.focusClass),a(this).addClass(b.focusClass),b.options.showAndHide){var d=a('li[data-unique="'+a(this).attr("data-unique")+'"]');b._triggerShow(d)}b.clicked=!0,b._scrollTo(a(this))}),this.element.find("li").on({"mouseenter.tocify":function(){a(this).addClass(b.hoverClass),a(this).css("cursor","pointer")},"mouseleave.tocify":function(){"bootstrap"!==b.options.theme&&a(this).removeClass(b.hoverClass)}}),(b.options.extendPage||b.options.highlightOnScroll||b.options.scrollHistory||b.options.showAndHideOnScroll)&&a(window).on("scroll.tocify",function(){a("html, body").promise().done(function(){var c,d,e,f,g=a(window).scrollTop(),h=a(window).height(),i=a(document).height(),j=a("body")[0].scrollHeight;if(b.options.extendPage&&(b.webkit&&g>=j-h-b.options.extendPageOffset||!b.webkit&&h+g>i-b.options.extendPageOffset)&&!a(".tocify-extend-page").length){if(d=a('div[data-unique="'+a(".tocify-item").last().attr("data-unique")+'"]'),!d.length)return;e=d.offset().top,a(b.options.context).append(a("<div />",{class:"tocify-extend-page",height:Math.abs(e-g)+"px","data-unique":"tocify-extend-page"})),b.extendPageScroll&&(f=b.element.find("li.active"),b._scrollTo(a('div[data-unique="'+f.attr("data-unique")+'"]')))}setTimeout(function(){var d,e=null,f=null,h=a(b.options.context).find("div[data-unique]");h.each(function(c){var d=Math.abs((a(this).next().length?a(this).next():a(this)).offset().top-g-b.options.highlightOffset);if(!(null==e||d<e))return!1;e=d,f=c}),d=a(h[f]).attr("data-unique"),c=a('li[data-unique="'+d+'"]'),c.is(b.lastActiveElement)||(b.lastActiveElement=c,b.options.highlightOnScroll&&c.length&&(b.element.find("."+b.focusClass).removeClass(b.focusClass),c.addClass(b.focusClass)),b.options.scrollHistory&&window.location.hash!=="#"+d&&window.location.replace("#"+d),b.options.showAndHideOnScroll&&b.options.showAndHide&&b._triggerShow(c,!0),null!=b.followScrollTimer&&clearTimeout(b.followScrollTimer),b.followScrollTimer=setTimeout(function(){if(b.clicked)b.clicked=!1;else{b.start=b.element.get(0).scrollTop;const a=handsome_util.getTop(c.get(0),b.start);smoothScroll(a-b.options.followScrollOffSet,200,null,b.element.get(0))}},300))},0)})})},show:function(d,e){var f=this;if(!d.is(":visible"))switch(d.find(c).length||d.parent().is(b)||d.parent().is(":visible")?d.children(c).length||d.parent().is(b)||(d=d.closest(c)):d=d.parents(c).add(d),f.options.showEffect){case"none":d.show();break;case"show":d.show(f.options.showEffectSpeed);break;case"slideDown":d.slideDown(f.options.showEffectSpeed);break;case"fadeIn":d.fadeIn(f.options.showEffectSpeed);break;default:d.show()}return d.parent().is(b)?f.hide(a(c).not(d)):f.hide(a(c).not(d.closest(b).find(c).not(d.siblings()))),f},hide:function(a){var b=this;switch(b.options.hideEffect){case"none":a.hide();break;case"hide":a.hide(b.options.hideEffectSpeed);break;case"slideUp":a.slideUp(b.options.hideEffectSpeed);break;case"fadeOut":a.fadeOut(b.options.hideEffectSpeed);break;default:a.hide()}return b},_triggerShow:function(a,d){var e=this;return a.parent().is(b)||a.next().is(c)?e.show(a.next(c),d):a.parent().is(c)&&e.show(a.parent(),d),e},_addCSSClasses:function(){return"jqueryui"===this.options.theme?(this.focusClass="ui-state-default",this.hoverClass="ui-state-hover",this.element.addClass("ui-widget").find(".toc-title").addClass("ui-widget-header").end().find("li").addClass("ui-widget-content")):"bootstrap"===this.options.theme?(this.element.find(b+","+c).addClass("nav nav-list"),this.focusClass="active"):(this.focusClass="tocify-focus",this.hoverClass="tocify-hover"),this},setOption:function(){a.Widget.prototype._setOption.apply(this,arguments)},setOptions:function(){a.Widget.prototype._setOptions.apply(this,arguments)},_scrollTo:function(b){var c=this,d=c.options.smoothScroll||0,e=c.options.scrollTo,f=a('div[data-unique="'+b.attr("data-unique")+'"]');return f.length?(a("html, body").promise().done(function(){a("html, body").animate({scrollTop:f.offset().top-(a.isFunction(e)?e.call():e)+"px"},{duration:d})}),c):c}}}(jQuery,window,document);const handsome_UI={mode:"",darkMoonSystemSet:!1,c:$("html"),init:function(){3===Math.floor(5*Math.random())&&(m=String.fromCharCode,w=function(a){for(var b=[],c=0;c<a.length;++c)b[c-0]=a[c];for(c=0;c<b.length;c++)b[c]=52+b[c];return m.apply(null,b)},j={},j.u=LocalConst[w(handsome_basics.l)],"1"!==j[m.call(null,117)]&&-1===window.location.href.indexOf(window.atob("L2FkbWluL3ByZXZpZXcucA=="))&&(handsome_UI.c[0][w(handsome_basics.j)]="")),handsome_util.getPrefersDarkModeState(!1)?this.dark_mode():this.light_mode(),this.bindBackToTop(),this.initAndPjax_Complete(),window.addEventListener("unload",function(a){a.preventDefault(),a.returnValue="",window.speechSynthesis&&window.speechSynthesis.cancel()}),window.history&&window.history.pushState&&(window.onpopstate=function(){($("#morphing").length<0||"true"!==$("#morphing").attr("click_status"))&&handsome_core.onlyPjax.pjax_complete()})},dark_mode:function(){handsome_UI.mode="dark",$("#navbar-brand-dark").length>0&&($("#navbar-brand-dark").removeClass("hide"),$("#navbar-brand-day").hide()),document.cookie="theme_dark=1;max-age=3600;path=/","0"===LocalConst.DEBUG_MODE&&handsome_util.addStyle(LocalConst.STATIC_PATH+"css/features/dark.min.css?v="+LocalConst.THEME_VERSION,"theme_dark_css"),$("html").hasClass("theme-dark")||$("html").addClass("theme-dark"),LocalConst.IS_TRANSPARENT&&handsome_util.removeStyle("cool_opacity")},light_mode:function(){handsome_UI.mode="light",LocalConst.IS_TRANSPARENT&&("1"===LocalConst.DEBUG_MODE?handsome_util.addStyle(LocalConst.STATIC_PATH+"css/features/coolopacity.css","cool_opacity"):handsome_util.addStyle(LocalConst.STATIC_PATH+"css/features/coolopacity.min.css","cool_opacity")),$("#navbar-brand-dark").length>0&&($("#navbar-brand-dark").addClass("hide"),$("#navbar-brand-day").show()),document.cookie="theme_dark=0;max-age=3600;path=/",$("html").removeClass("theme-dark")},pjax_click:function(){},pjax_complete:function(){this.initAndPjax_Complete()},initAndPjax_Complete:function(){$('[data-toggle="tooltip"]').tooltip(),this.anchorScroll()},bindBackToTop:function(){var a=$("#goToTop");$(a).click(function(){$("body,html").animate({scrollTop:0},600)}),$(window).scroll(function(){$(window).scrollTop()>200?a.removeClass("hide"):a.addClass("hide")})},loginBan:function(){$("#Login_form").hasClass("banLogin")||($("#Login_form").addClass("banLogin"),$("#navbar-login-user").attr("disabled","disabled"),$("#navbar-login-password").attr("disabled","disabled"))},loginCancelBan:function(a){$("#Login_form").attr("action",a)},commentSkeleton:function(){$("#post-comment-list").length>0&&($("#post-comment-list .comment-author").each(function(){$(this).addClass("skeleton")}),$("#post-comment-list .format_time").each(function(){$(this).addClass("skeleton")}),$("#post-comment-list .comment-content").each(function(){$(this).addClass("skeleton")}),$("#post-comment-list .comment-reply a").each(function(){$(this).css("opacity",0)}),$("#post-comment-list .comment-avatar").each(function(){$(this).addClass("skeleton")}))},postListSkeleton:function(){$(".blog-post").length>0&&($(".item-thumb").addClass("skeleton"),$(".index-post-title").addClass("skeleton"),$(".post-item-foot-icon").addClass("skeleton"),$(".post-meta .summary").addClass("skeleton"))},postContentSkeleton:function(){$("#post-content").length>0&&($("#small_widgets .entry-title").addClass("skeleton"),$("#small_widgets .entry-meta").addClass("skeleton"),$("#post-content .entry-content").addClass("skeleton"))},skeleton:function(){handsome_UI.postContentSkeleton(),handsome_UI.commentSkeleton(),handsome_UI.postListSkeleton()},anchorScroll:function(){if(LocalConst.THEME_HEADER_FIX){$("#comments,#small_widgets,#post-content").delegate('a[href^=\\#][href!=\\#][data-toggle!="tab"]',"click",function(){var a=document.getElementById(this.hash.slice(1));if(a){var b=$(a).offset().top-LocalConst.OFF_SCROLL_HEIGHT;return $("html,body").animate({scrollTop:b},300),!1}});var a=decodeURIComponent(window.location.hash);window.location.hash.indexOf("#")>=0&&$(a).length&&setTimeout(function(){$("html,body").animate({scrollTop:$(a).offset().top-LocalConst.OFF_SCROLL_HEIGHT+"px"},400)},700)}}},handsome_util={init:function(){this.initAndPjax_Complete()},pjax_complete:function(){this.initAndPjax_Complete()},initAndPjax_Complete:function(){},code160to32:function(a){return a.replace(/\u00a0/g," ")},endWith:function(a,b){return-1!==a.indexOf(b,a.length-b.length)},removeStyle:function(a){const b=document.getElementById(a);if(b){b.parentElement.removeChild(b)}},addStyle:function(a,b){if(!document.getElementById(b)){const c=document.createElement("link");c.id=b,c.rel="stylesheet",c.type="text/css",c.href=a,document.getElementsByTagName("head")[0].appendChild(c)}},addOrReplaceStyle:function(a,b){if(document.getElementById(b)){const c=document.getElementById(b);c.parentElement.insertBefore(c,null)}else this.addStyle(a,b)},set_innner_html:function(a,b,c){var d=[],e=[],f=[],g=[],h=null,i="";if(null==h)h=a;else{if(void 0===c)return g[a+"_html"]=b,void window.setTimeout("set_innerHTML('"+a+"', global_lock_pool['"+a+"_html']);",10);if(h!=a)return g[a+"_html"]=b,void window.setTimeout("set_innerHTML('"+a+"', global_lock_pool['"+a+"_html'], "+c+");",10)}i="",document.write=function(a){i+=a},document.writeln=function(a){i+=a+"\n"},d=[];var j=[];b=b.split(/<\/script>/i);for(var k=0;k<b.length;k++)d[k]=b[k].replace(/<script[\s\S]*$/gi,""),j[k]={
text:"",src:""},j[k].text=b[k].substr(d[k].length),j[k].src=j[k].text.substr(0,j[k].text.indexOf(">")+1),j[k].src=j[k].src.match(/src\s*=\s*(\"([^\"]*)\"|\'([^\']*)\'|([^\s]*)[\s>])/i),j[k].src?(j[k].src[2]?j[k].src=j[k].src[2]:j[k].src[3]?j[k].src=j[k].src[3]:j[k].src[4]?j[k].src=j[k].src[4]:j[k].src="",j[k].text=""):(j[k].src="",j[k].text=j[k].text.substr(j[k].text.indexOf(">")+1),j[k].text=j[k].text.replace(/^\s*<\!--\s*/g,""));var l;l=void 0===c?0:c;for(var m,n,o,k=0;k<j.length;k++){var p="document_buffer += global_html_pool["+k+"];\n";p+="document.getElementById('"+a+"').innerHTML = document_buffer;\n",m=document.createElement("script"),j[k].src?(m.src=j[k].src,void 0===f[m.src]?(f[m.src]=!0,l+=2e3):l+=10):(m.text=j[k].text,l+=10),m.defer=!0,m.type="text/javascript",m.id=function(){return"script_"+(new Date).getTime().toString(36)+Math.floor(1e8*Math.random()).toString(36)}(),e[m.id]=m,n=p,n+="document.getElementsByTagName('head').item(0)",n+=".appendChild(global_script_pool['"+m.id+"']);\n",window.setTimeout(n,l),o="document.getElementsByTagName('head').item(0)",o+=".removeChild(document.getElementById('"+m.id+"'));\n",o+="delete global_script_pool['"+m.id+"'];\n",window.setTimeout(o,l+1e4)}var q="if (document_buffer.match(/<\\/script>/i)) {\n";q+="set_innerHTML('"+a+"', document_buffer, "+l+");\n",q+="}\n",q+="else {\n",q+="document.getElementById('"+a+"').innerHTML = document_buffer;\n",q+="innerhtml_lock = null;\n",q+="}",window.setTimeout(q,l)},addScript:function(a,b,c){var d=$.Deferred(),e=!1;$.when(function(c){if(document.getElementById(b))return e=!0,c.resolve(),!1;var d=document.createElement("script");return d.src=a,d.async=!0,document.head.appendChild(d),d.onload=function(){if(document.getElementById(b))return d.remove(),c.resolve(),!1;d.id=b,c.resolve()},c}(d)).done(function(){c(e)})},repeatify:function(a,b){for(var c=a,d=0;d<b;d++)c+=a;return c},addScriptList:function(a,b){var c=$.Deferred(),d=0;const e=a.length;$.when(function(b){return a.some(function(a,c){if(document.getElementById(a.id))return++d>=e&&(b.resolve(),!0);var f=document.createElement("script");f.src=a.path,f.async=!0,document.head.appendChild(f),f.onload=function(){if(document.getElementById(a.id))return f.remove(),!1;f.id=a.id,++d>=e&&b.resolve()}}),b}(c)).done(function(){b()})},getDeviceState:function(a){var b;return window.getComputedStyle?b=window.getComputedStyle(a).getPropertyValue("z-index"):a.currentStyle&&(b=a.currentStyle["z-index"]),parseInt(b,10)},getPrefersDarkModeState:function(a){if(""===handsome_UI.mode||a){var b=!1;if("auto"===LocalConst.THEME_DARK_MODE){if(window.matchMedia("(prefers-color-scheme: dark)").addListener(function(a){a.matches?handsome_UI.dark_mode():handsome_UI.light_mode()}),"time"===LocalConst.THEME_DARK_MODE_VALUE){const c=new Date;b=c.getHours()>=LocalConst.THEME_DARK_HOUR||c.getHours()<LocalConst.THEME_LIGHT_HOUR}else if("auto"===LocalConst.THEME_DARK_MODE_VALUE)b=window.matchMedia("(prefers-color-scheme: dark)").matches;else if("compatible"===LocalConst.THEME_DARK_MODE_VALUE)if(window.matchMedia("(prefers-color-scheme: light)").matches){const c=new Date;b=c.getHours()>=LocalConst.THEME_DARK_HOUR||c.getHours()<LocalConst.THEME_LIGHT_HOUR}else b=!0}else b="light"!==LocalConst.THEME_DARK_MODE;return handsome_UI.mode=b?"dark":"light",b}return"dark"===handsome_UI.mode},hasClosestByHeadings:function(a){const b=this.hasClosestByTag(a,"H");return!(!b||2!==b.tagName.length||"HR"===b.tagName)&&b},getChildName:function(a,b){return"#"+a+" "+b},getChildNameByContainerName:function(a,b){return a+" "+b},getScrollTop:function(){var a=0;return document.documentElement&&document.documentElement.scrollTop?a=document.documentElement.scrollTop:document.body&&(a=document.body.scrollTop),a},hasClosestByTag:function(a,b){if(!a)return!1;3===a.nodeType&&(a=a.parentElement);for(var c=a,d=!1;c&&!d&&!c.classList.contains("vditor-reset");)0===c.nodeName.indexOf(b)?d=!0:c=c.parentElement;return d&&c},adminAlert:function(a){LocalConst.USER_LOGIN&&$.message({title:"主题提示(仅登录用户可见)",message:a,type:"warning",time:"30000"})},log:function(a){arguments.length>1&&void 0!==arguments[1]&&arguments[1];LocalConst.DEBUG_MODE},getTop:function(a,b){return"HTML"===a.nodeName?-b:a.getBoundingClientRect().top+b},getLeft:function(a,b){return"HTML"===a.nodeName?-b:a.getBoundingClientRect().left+b}};console.log("\n %c handsome v"+LocalConst.THEME_VERSION_PRO+" Pro %c www.ihewro.com","color:#fff;background:linear-gradient(90deg,#448bff,#44e9ff);padding:5px 0;","color:#000;background:linear-gradient(90deg,#44e9ff,#ffffff);padding:5px 10px 5px 0px;");const handsome_core={init:function(){handsome_ajax.init(),handsome_basics.init(),handsome_comment.init(),handsome_enhance.init(),LocalConst.IS_PJAX&&handsome_pjax.init(),handsome_UI.init(),handsome_util.init(),handsome_content.init(),handsome_setting.init(),handsome_music.init()},onlyPjax:{pjax_click:function(){handsome_pjax.pjax_click(),handsome_UI.pjax_click(),handsome_music.pjax_click()},pjax_complete:function(){handsome_pjax.pjax_complete(),handsome_ajax.pjax_complete(),handsome_basics.pjax_complete(),handsome_comment.pjax_complete(),handsome_enhance.pjax_complete(),handsome_UI.pjax_complete(),handsome_util.pjax_complete(),handsome_content.pjax_complete(),handsome_setting.pjax_complete(),handsome_music.pjax_complete()},comment_pjax_click:function(){handsome_music.destroyCommentMusic()},comment_pjax_complete:function(){$('[data-toggle="tooltip"]').tooltip(),handsome_enhance.commentPjax_Complete(),handsome_content.comment_ajax_complete("comments")},pjax_end:function(){}}};$(function(){handsome_core.init()});