/*! handsome 2019-12-05 */

$.fn.fancyMorph=function(a){var b=function(a,b){var c=this;c.opts=$.extend({animationEffect:!1,infobar:!1,buttons:["close"],smallBtn:!1,touch:!1,baseClass:"fancybox-morphing",afterClose:function(){c.close()}},b),c.init(a)};return b.prototype.init=function(a){var b=this;b.$btn=a.addClass("morphing-btn"),b.$clone=$('<div class="morphing-btn-clone" />').hide().insertAfter(a),a.wrap('<span class="morphing-btn-wrap "></span>').on("click",function(a){a.preventDefault(),b.start()})},b.prototype.start=function(){var a=this;a.$btn.hasClass("morphing-btn_circle")||(a.$btn.width(a.$btn.width()).parent().width(a.$btn.outerWidth()),a.$btn.off(".fm").on("transitionend.fm webkitTransitionEnd.fm oTransitionEnd.fm MSTransitionEnd.fm",function(b){"width"===b.originalEvent.propertyName&&(a.$btn.off(".fm"),a.animateBg())}).addClass("morphing-btn_circle"))},b.prototype.animateBg=function(){var a=this;a.scaleBg(),a.$clone.show(),a.$clone[0].offsetHeight,a.$clone.off(".fm").on("transitionend.fm webkitTransitionEnd.fm oTransitionEnd.fm MSTransitionEnd.fm",function(b){a.$clone.off(".fm"),a.complete()}).addClass("morphing-btn-clone_visible")},b.prototype.scaleBg=function(){var a=this,b=a.$clone,c=a.getScale(),d=a.$btn,e=d.offset();b.css({top:e.top+.5*d.outerHeight()-d.outerHeight()*c*.5-$(window).scrollTop(),left:e.left+.5*d.outerWidth()-d.outerWidth()*c*.5-$(window).scrollLeft(),width:d.outerWidth()*c,height:d.outerHeight()*c,transform:"scale("+1/c+")"})},b.prototype.getScale=function(){var a=this.$btn,b=.5*a.outerWidth(),c=a.offset().left+b-$(window).scrollLeft(),d=a.offset().top+b-$(window).scrollTop(),e=$(window).width(),f=$(window).height(),g=c>e/2?c:e-c,h=d>f/2?d:f-d;return Math.ceil(Math.sqrt(Math.pow(g,2)+Math.pow(h,2))/b)},b.prototype.complete=function(){var a=this,b=a.$btn;$.fancybox.open({src:b.data("src")||b.attr("href")},a.opts),$(window).on("resize.fm",function(){})},b.prototype.close=function(){var a=this,b=a.$clone;a.scaleBg(),b.one("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(c){b.hide(),a.$btn.removeClass("morphing-btn_circle")}),b.removeClass("morphing-btn-clone_visible"),$(window).off("resize.fm")},this.each(function(){var c=$(this);c.data("morphing")||c.data("morphing",new b(c,a))}),this};